!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("ractive")):"function"==typeof define&&define.amd?define(["ractive"],t):e.Ractive.load=t(e.Ractive)}(this,function(e){"use strict";function t(e){var t,r,n;return t=e.split("/"),r=t.pop(),n=r.lastIndexOf("."),-1!==n&&(r=r.substr(0,n)),r}function r(e,t){var r,n,o=0,i=0;for(r=e.map(function(e){var t=i+e.length+1;return i=t,t});t>=r[o];)i=r[o],o+=1;return n=t-i,{line:o,column:n,"char":t}}function n(e){var t,r,n,i,u,a,s,c,f,p,l;if(!X.Ractive)throw new Error("rcu has not been initialised! You must call rcu.init(Ractive) before rcu.parse()");if(t=X.Ractive.parse(e,{noStringify:!0,interpolate:{script:!1,style:!1},includeLinePositions:!0}),t.v!==U)throw new Error("Mismatched template version (expected "+U+", got "+t.v+")! Please ensure you are using the latest version of Ractive.js in your build process as well as in your app");for(n=[],a=[],c=[],r=t.t,f=r.length;f--;)if(p=r[f],p&&7===p.t){if("link"===p.e&&p.a&&"ractive"===p.a.rel&&n.push(r.splice(f,1)[0]),!("script"!==p.e||p.a&&p.a.type&&"text/javascript"!==p.a.type)){if(u)throw new Error("You can only have one <script> tag per component file");u=r.splice(f,1)[0]}"style"!==p.e||p.a&&p.a.type&&"text/css"!==p.a.type||a.push(r.splice(f,1)[0])}for(;/^\s*$/.test(r[0]);)r.shift();for(;/^\s*$/.test(r[r.length-1]);)r.pop();if(i=n.map(function(e){var t,r;if(t=e.a.href,r=e.a.name||A(t),"string"!=typeof r)throw new Error("Error parsing link tag");return{name:r,href:t}}),l={source:e,template:t,imports:i,css:a.map(o).join(" "),script:"",modules:c},u)for(function(){var t,r,n;t=e.indexOf(">",u.p[2])+1,r=t+u.f[0].length,n=e.split("\n"),l.scriptStart=P(n,t),l.scriptEnd=P(n,r)}(),l.script=u.f[0];s=O.exec(l.script);)c.push(s[1]||s[2]);return l}function o(e){return e.f}function i(e,t){t=t||{},t.sourceMap?e+="\n//# "+L+"=data:application/json;charset=utf-8;base64,"+M(JSON.stringify(t.sourceMap)):t.sourceURL&&(e+="\n//# sourceURL="+t.sourceURL);try{return S(e)}catch(r){if(j)return void a(e,t.sourceURL||"");throw x&&"SyntaxError"===r.name&&u(e),r}}function u(e){var t,r;t=I+":text/javascript;charset=utf-8,"+encodeURIComponent(e),r=document.createElement("script"),r.src=t,r.onload=function(){E.removeChild(r)},E.appendChild(r)}function a(e,t){var r=new q;try{r._compile("module.exports = function () {\n"+e+"\n};",t)}catch(n){return void console.error(n)}r.exports()}function s(e){var t,r={};for(t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}function c(e){var t,r;if("number"==typeof e)t=f(e);else for(t="",r=0;r<e.length;r+=1)t+=f(e[r]);return t}function f(e){var t,r="";0>e?e=-e<<1|1:e<<=1;do t=31&e,e>>=5,e>0&&(t|=32),r+=T[t];while(e>0);return r}function p(e){return new Buffer(e).toString("base64")}function l(e,t){var r,n,o;if(!t||!t.source)throw new Error("You must supply an options object with a `source` property to rcu.generateSourceMap()");return o=new Array((t.offset||0)+1).join(";"),r=e.script.split("\n"),n=o+r.map(function(t,r){return 0===r?c([0,0,e.scriptStart.line,e.scriptStart.column]):1===r?c([0,0,1,-e.scriptStart.column]):"AACA"}).join(";"),new Y({file:t.file,sources:[t.source],sourcesContent:[e.source],names:[],mappings:n})}function d(e,t,r,n){var o,i,u,a,s,c,f,p,l,d;if(t=t||{},i=t.url||"",a=t.loadImport,c=t.loadModule,o=C(e),u=function(){var u,a,c,f,p,l;if(u={template:o.template,partials:o.partials,css:o.css,components:s},o.script){var d=z(o,{source:i,content:e});try{if(c=new k.Function("component","require","Ractive",o.script,{sourceMap:d}),f={},c(f,t.require,X.Ractive),p=f.exports,"object"==typeof p)for(l in p)p.hasOwnProperty(l)&&(u[l]=p[l]);a=X.Ractive.extend(u)}catch(h){return void n(h)}r(a)}else a=X.Ractive.extend(u),r(a)},p=o.imports.length+(c?o.modules.length:0)){if(l=function(){--p||(d?u():setTimeout(u,0))},o.imports.length){if(!a)throw new Error('Component definition includes imports (e.g. `<link rel="ractive" href="'+o.imports[0].href+'">`) but no loadImport method was passed to rcu.make()');s={},o.imports.forEach(function(e){a(e.name,e.href,i,function(t){s[e.name]=t,l()})})}c&&o.modules.length&&(f={},o.modules.forEach(function(e){c(e,e,i,function(t){f[e]=t,l()})}))}else setTimeout(u,0);d=!0}function h(e,t){var r,n,o;if(!t||"/"===e.charAt(0))return e;for(r=(t||"").split("/"),n=e.split("/"),r.pop();o=n.shift();)".."===o?r.pop():"."!==o&&r.push(o);return r.join("/")}function m(t,r,n,o){var i,u;return u=Z.resolve(t,"."===t[0]?r:n),o&&G[u]||(i=_(u).then(function(t){return new e.Promise(function(e,r){Z.make(t,{url:u,loadImport:function(e,t,i,u){m(t,i,n,o).then(u,r)},require:v},e,r)})}),G[u]=i),G[u]}function v(e){var t,r;if(t=W.modules.hasOwnProperty(e)?W.modules[e]:D.hasOwnProperty(e)?D[e]:null,!t&&"function"==typeof require)try{t=require(e)}catch(n){if("undefined"==typeof process)throw n;t=require(process.cwd()+"/"+e)}if(!t)throw r=/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(e)?"."+e:'["'+e+'"]',new Error('Ractive.load() error: Could not find dependency "'+e+'". It should be exposed as Ractive.load.modules'+r+" or window"+r);return t}function g(t,r){var n=new e.Promise(function(n,o){var i,u;i=w(document.querySelectorAll('link[rel="ractive"]')),u=i.length,i.forEach(function(i){var a=y(i);K(i.getAttribute("href"),"",t,r).then(function(t){e.components[a]=t,--u||n()},o)})});return n}function y(e){return e.getAttribute("name")||Z.getName(e.getAttribute("href"))}function w(e){for(var t=[],r=e.length;r--;)t[r]=e[r];return t}function b(t,r,n){var o=new e.Promise(function(e,o){var i,u,a=0,s={};u=function(i){var u=t[i];K(u,r,r,n).then(function(t){s[i]=t,--a||e(s)},o)};for(i in t)t.hasOwnProperty(i)&&(a+=1,u(i))});return o}function R(e){var t=R.baseUrl,r=R.cache!==!1;return e?"object"==typeof e?V(e,t,r):K(e,t,t,r):Q(t,r)}var S,x,j,E,q,M,A=t,P=r,C=n,O=/require\s*\(\s*(?:"([^"]+)"|'([^']+)')\s*\)/g,U=3,k=i,L="sourceMappingUrl",I="data";S=eval,"undefined"!=typeof document?(x=!0,E=document.getElementsByTagName("head")[0]):"undefined"!=typeof process&&(j=!0,q=(require.nodeRequire||require)("module")),M="function"==typeof btoa?function(e){return e=e.replace(/[^\x00-\x7F]/g,function(e){for(var t=e.charCodeAt(0).toString(16);t.length<4;)t="0"+t;return"\\u"+t}),btoa(e)}:"function"==typeof Buffer?function(e){return new Buffer(e,"utf-8").toString("base64")}:function(){},i.Function=function(){var e,t,r,n,o=[];for(e=arguments.length;e--;)o[e]=arguments[e];return n="object"==typeof o[o.length-1]?o.pop():{},1===o.length&&"[object Array]"===Object.prototype.toString.call(o)&&(o=o[0]),n.sourceMap&&(n.sourceMap=s(n.sourceMap),n.sourceMap.mappings=";"+n.sourceMap.mappings),t=o.pop(),r="(function ("+o.join(", ")+") {\n"+t+"\n})",i(r,n)};var N={},T={};"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split("").forEach(function(e,t){N[e]=t,T[t]=e});var B=p,F=function(e){this.version=3,this.file=e.file,this.sources=e.sources,this.sourcesContent=e.sourcesContent,this.names=e.names,this.mappings=e.mappings};F.prototype={toString:function(){return JSON.stringify(this)},toUrl:function(){return"data:application/json;charset=utf-8;base64,"+B(this.toString())}};var $,Y=F,z=l,H=d,J=h,X={init:function(e){X.Ractive=e},parse:C,make:H,generateSourceMap:z,resolve:J,getName:A},Z=X;$="undefined"!=typeof XMLHttpRequest?function(t){return new e.Promise(function(e,r){var n,o,i;n=new XMLHttpRequest,n.open("GET",t),o=function(){4!==n.readyState||i||(e(n.responseText),i=!0)},n.onload=n.onreadystatechange=o,n.onerror=r,n.send(),4===n.readyState&&o()})}:function(t){return new e.Promise(function(e,r){require("fs").readFile(t,function(t,n){return t?r(t):void e(n.toString())})})};var _=$,G={},D="undefined"!=typeof window?window:{},K=m,Q=g,V=b;Z.init(e),R.baseUrl="",R.modules={};var W=R;return W});

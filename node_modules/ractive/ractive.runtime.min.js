!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Ractive=e()}(this,function(){"use strict";function t(t){var e;if(t&&"boolean"!=typeof t)return"undefined"!=typeof window&&document&&t?t.nodeType?t:"string"==typeof t&&(e=document.getElementById(t),!e&&document.querySelector&&(e=document.querySelector(t)),e&&e.nodeType)?e:t[0]&&t[0].nodeType?t[0]:null:null}function e(t){return t&&"unknown"!=typeof t.parentNode&&t.parentNode&&t.parentNode.removeChild(t),t}function n(t){return null!=t&&t.toString?t:""}function i(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];for(var r,s;s=n.shift();)for(r in s)To.call(s,r)&&(t[r]=s[r]);return t}function r(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];return n.forEach(function(e){for(var n in e)!e.hasOwnProperty(n)||n in t||(t[n]=e[n])}),t}function s(t){return"[object Array]"===So.call(t)}function o(t){return Fo.test(So.call(t))}function a(t,e){return null===t&&null===e?!0:"object"==typeof t||"object"==typeof e?!1:t===e}function u(t){return!isNaN(parseFloat(t))&&isFinite(t)}function h(t){return t&&"[object Object]"===So.call(t)}function c(t,e){return t.replace(/%s/g,function(){return e.shift()})}function l(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];throw t=c(t,n),new Error(t)}function d(){Sv.DEBUG&&Ao.apply(null,arguments)}function f(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];t=c(t,n),Co(t,n)}function p(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];t=c(t,n),jo[t]||(jo[t]=!0,Co(t,n))}function m(){Sv.DEBUG&&f.apply(null,arguments)}function v(){Sv.DEBUG&&p.apply(null,arguments)}function g(t,e,n){var i=y(t,e,n);return i?i[t][n]:null}function y(t,e,n){for(;e;){if(n in e[t])return e;if(e.isolated)return null;e=e.parent}}function b(t){return function(){return t}}function w(t){var e,n,i,r,s,o;for(e=t.split("."),(n=Bo[e.length])||(n=k(e.length)),s=[],i=function(t,n){return t?"*":e[n]},r=n.length;r--;)o=n[r].map(i).join("."),s.hasOwnProperty(o)||(s.push(o),s[o]=!0);return s}function k(t){var e,n,i,r,s,o,a,u,h="";if(!Bo[t]){for(i=[];h.length<t;)h+=1;for(e=parseInt(h,2),r=function(t){return"1"===t},s=0;e>=s;s+=1){for(n=s.toString(2);n.length<t;)n="0"+n;for(u=[],a=n.length,o=0;a>o;o++)u.push(r(n[o]));i[s]=u}Bo[t]=i}return Bo[t]}function x(t,e,n,i){var r=t[e];if(!r||!r.equalsOrStartsWith(i)&&r.equalsOrStartsWith(n))return t[e]=r?r.replace(n,i):i,!0}function E(t){var e=t.slice(2);return"i"===t[1]&&u(e)?+e:e}function _(t){return null==t?t:(Wo.hasOwnProperty(t)||(Wo[t]=new Ko(t)),Wo[t])}function A(t,e){function n(e,n){var i,r,o;return n.isRoot?o=[].concat(Object.keys(t.viewmodel.data),Object.keys(t.viewmodel.mappings),Object.keys(t.viewmodel.computations)):(i=t.viewmodel.wrapped[n.str],r=i?i.get():t.viewmodel.get(n),o=r?Object.keys(r):null),o&&o.forEach(function(t){"_ractive"===t&&s(r)||e.push(n.join(t))}),e}var i,r,o;for(i=e.str.split("."),o=[zo];r=i.shift();)"*"===r?o=o.reduce(n,[]):o[0]===zo?o[0]=_(r):o=o.map(C(r));return o}function C(t){return function(e){return e.join(t)}}function O(t){return t?t.replace(qo,".$1"):""}function T(t,e,n){if("string"!=typeof e||!u(n))throw new Error("Bad arguments");var i=void 0,r=void 0;if(/\*/.test(e))return r={},A(t,_(O(e))).forEach(function(e){var i=t.viewmodel.get(e);if(!u(i))throw new Error($o);r[e.str]=i+n}),t.set(r);if(i=t.get(e),!u(i))throw new Error($o);return t.set(e,+i+n)}function S(t,e){return Go(this,t,void 0===e?1:+e)}function F(t){this.event=t,this.method="on"+t,this.deprecate=ta[t]}function R(t,e){var n=t.indexOf(e);-1===n&&t.push(e)}function j(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]==e)return!0;return!1}function P(t,e){var n;if(!s(t)||!s(e))return!1;if(t.length!==e.length)return!1;for(n=t.length;n--;)if(t[n]!==e[n])return!1;return!0}function N(t){return"string"==typeof t?[t]:void 0===t?[]:t}function V(t){return t[t.length-1]}function I(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}function L(t){for(var e=[],n=t.length;n--;)e[n]=t[n];return e}function D(t){setTimeout(t,0)}function M(t,e){return function(){for(var n;n=t.shift();)n(e)}}function U(t,e,n,i){var r;if(e===t)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(e instanceof ea)e.then(n,i);else if(!e||"object"!=typeof e&&"function"!=typeof e)n(e);else{try{r=e.then}catch(s){return void i(s)}if("function"==typeof r){var o,a,u;a=function(e){o||(o=!0,U(t,e,n,i))},u=function(t){o||(o=!0,i(t))};try{r.call(e,a,u)}catch(s){if(!o)return i(s),void(o=!0)}}else n(e)}}function B(t,e,n){var i;return e=O(e),"~/"===e.substr(0,2)?(i=_(e.substring(2)),W(t,i.firstKey,n)):"."===e[0]?(i=q(aa(n),e),i&&W(t,i.firstKey,n)):i=Q(t,_(e),n),i}function q(t,e){var n;if(void 0!=t&&"string"!=typeof t&&(t=t.str),"."===e)return _(t);if(n=t?t.split("."):[],"../"===e.substr(0,3)){for(;"../"===e.substr(0,3);){if(!n.length)throw new Error('Could not resolve reference - too many "../" prefixes');n.pop(),e=e.substring(3)}return n.push(e),_(n.join("."))}return _(t?t+e.replace(/^\.\//,"."):e.replace(/^\.\/?/,""))}function Q(t,e,n,i){var r,s,o,a,u;if(e.isRoot)return e;for(s=e.firstKey;n;)if(r=n.context,n=n.parent,r&&(a=!0,o=t.viewmodel.get(r),o&&("object"==typeof o||"function"==typeof o)&&s in o))return r.join(e.str);return K(t.viewmodel,s)?e:t.parent&&!t.isolated&&(a=!0,n=t.component.parentFragment,s=_(s),u=Q(t.parent,s,n,!0))?(t.viewmodel.map(s,{origin:t.parent.viewmodel,keypath:u}),e):i||a?void 0:(t.viewmodel.set(e,void 0),e)}function W(t,e){var n;!t.parent||t.isolated||K(t.viewmodel,e)||(e=_(e),(n=Q(t.parent,e,t.component.parentFragment,!0))&&t.viewmodel.map(e,{origin:t.parent.viewmodel,keypath:n}))}function K(t,e){return""===e||e in t.data||e in t.computations||e in t.mappings}function H(t){t.teardown()}function z(t){t.unbind()}function G(t){t.unrender()}function $(t){t.cancel()}function Y(t){t.detach()}function J(t){t.detachNodes()}function Z(t){!t.ready||t.outros.length||t.outroChildren||(t.outrosComplete||(t.parent?t.parent.decrementOutros(t):t.detachNodes(),t.outrosComplete=!0),t.intros.length||t.totalChildren||("function"==typeof t.callback&&t.callback(),t.parent&&t.parent.decrementTotal()))}function X(){for(var t,e,n;ca.ractives.length;)e=ca.ractives.pop(),n=e.viewmodel.applyChanges(),n&&pa.fire(e,n);for(tt(),t=0;t<ca.views.length;t+=1)ca.views[t].update();for(ca.views.length=0,t=0;t<ca.tasks.length;t+=1)ca.tasks[t]();return ca.tasks.length=0,ca.ractives.length?X():void 0}function tt(){var t,e,n,i;for(t=fa.length;t--;)e=fa[t],e.keypath?fa.splice(t,1):(n=ua(e.root,e.ref,e.parentFragment))&&((i||(i=[])).push({item:e,keypath:n}),fa.splice(t,1));i&&i.forEach(et)}function et(t){t.item.resolve(t.keypath)}function nt(t,e,n){var i,r,s,o,a,u,h,c,l,d,f,p,m,v;if(i=new oa(function(t){return r=t}),"object"==typeof t){n=e||{},u=n.easing,h=n.duration,a=[],c=n.step,l=n.complete,(c||l)&&(f={},n.step=null,n.complete=null,d=function(t){return function(e,n){f[t]=n}});for(s in t)t.hasOwnProperty(s)&&((c||l)&&(p=d(s),n={easing:u,duration:h},c&&(n.step=p)),n.complete=l?p:Ro,a.push(it(this,s,t[s],n)));return v={easing:u,duration:h},c&&(v.step=function(t){return c(t,f)}),l&&i.then(function(t){return l(t,f)}),v.complete=r,m=it(this,null,null,v),a.push(m),i.stop=function(){for(var t;t=a.pop();)t.stop();m&&m.stop()},i}return n=n||{},n.complete&&i.then(n.complete),n.complete=r,o=it(this,t,e,n),i.stop=function(){return o.stop()},i}function it(t,e,n,i){var r,s,o,u;return e&&(e=_(O(e))),null!==e&&(u=t.viewmodel.get(e)),ya.abort(e,t),a(u,n)?(i.complete&&i.complete(i.to),xa):(i.easing&&(r="function"==typeof i.easing?i.easing:t.easing[i.easing],"function"!=typeof r&&(r=null)),s=void 0===i.duration?400:i.duration,o=new wa({keypath:e,from:u,to:n,root:t,duration:s,easing:r,interpolator:i.interpolator,step:i.step,complete:i.complete}),ya.add(o),t._animations.push(o),o)}function rt(){return this.detached?this.detached:(this.el&&I(this.el.__ractive_instances__,this),this.detached=this.fragment.detach(),_a.fire(this),this.detached)}function st(t){return this.el?this.fragment.find(t):null}function ot(t,e){var n;return n=this._isComponentQuery?!this.selector||t.name===this.selector:t.node?lo(t.node,this.selector):null,n?(this.push(t.node||t.instance),e||this._makeDirty(),!0):void 0}function at(t){var e;return(e=t.parentFragment)?e.owner:t.component&&(e=t.component.parentFragment)?e.owner:void 0}function ut(t){var e,n;for(e=[t],n=at(t);n;)e.push(n),n=at(n);return e}function ht(t,e,n,i){var r=[];return xo(r,{selector:{value:e},live:{value:n},_isComponentQuery:{value:i},_test:{value:Ca}}),n?(xo(r,{cancel:{value:Oa},_root:{value:t},_sort:{value:Fa},_makeDirty:{value:Ra},_remove:{value:ja},_dirty:{value:!1,writable:!0}}),r):r}function ct(t,e){var n,i;return this.el?(e=e||{},n=this._liveQueries,(i=n[t])?e&&e.live?i:i.slice():(i=Pa(this,t,!!e.live,!1),i.live&&(n.push(t),n["_"+t]=i),this.fragment.findAll(t,i),i)):[]}function lt(t,e){var n,i;return e=e||{},n=this._liveComponentQueries,(i=n[t])?e&&e.live?i:i.slice():(i=Pa(this,t,!!e.live,!0),i.live&&(n.push(t),n["_"+t]=i),this.fragment.findAllComponents(t,i),i)}function dt(t){return this.fragment.findComponent(t)}function ft(t){return this.container?this.container.component&&this.container.component.name===t?this.container:this.container.findContainer(t):null}function pt(t){return this.parent?this.parent.component&&this.parent.component.name===t?this.parent:this.parent.findParent(t):null}function mt(t,e){var n=void 0===arguments[2]?{}:arguments[2];if(e){n.event?n.event.name=e:n.event={name:e,_noArg:!0};var i=_(e).wildcardMatches();vt(t,i,n.event,n.args,!0)}}function vt(t,e,n,i){var r,s,o=void 0===arguments[4]?!1:arguments[4],a=!0;for(Ua.enqueue(t,n),s=e.length;s>=0;s--)r=t._subs[e[s]],r&&(a=gt(t,r,n,i)&&a);if(Ua.dequeue(t),t.parent&&a){if(o&&t.component){var u=t.component.name+"."+e[e.length-1];e=_(u).wildcardMatches(),n&&(n.component=t)}vt(t.parent,e,n,i)}}function gt(t,e,n,i){var r=null,s=!1;n&&!n._noArg&&(i=[n].concat(i)),e=e.slice();for(var o=0,a=e.length;a>o;o+=1)e[o].apply(t,i)===!1&&(s=!0);return n&&!n._noArg&&s&&(r=n.original)&&(r.preventDefault&&r.preventDefault(),r.stopPropagation&&r.stopPropagation()),!s}function yt(t){var e={args:Array.prototype.slice.call(arguments,1)};Ba(this,t,e)}function bt(t){var e;return t=_(O(t)),e=this.viewmodel.get(t,Wa),void 0===e&&this.parent&&!this.isolated&&ua(this,t.str,this.component.parentFragment)&&(e=this.viewmodel.get(t)),e}function wt(e,n){if(!this.fragment.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(e=t(e),n=t(n)||null,!e)throw new Error("You must specify a valid target to insert into");e.insertBefore(this.detach(),n),this.el=e,(e.__ractive_instances__||(e.__ractive_instances__=[])).push(this),this.detached=null,kt(this)}function kt(t){Ha.fire(t),t.findAllComponents("*").forEach(function(t){kt(t.instance)})}function xt(t,e,n){var i,r;return t=_(O(t)),i=this.viewmodel.get(t),s(i)&&s(e)?(r=ma.start(this,!0),this.viewmodel.merge(t,i,e,n),ma.end(),r):this.set(t,e,n&&n.complete)}function Et(t,e){var n,i;return n=A(t,e),i={},n.forEach(function(e){i[e.str]=t.get(e.str)}),i}function _t(t,e,n,i){var r,s,o;e=_(O(e)),i=i||au,e.isPattern?(r=new su(t,e,n,i),t.viewmodel.patternObservers.push(r),s=!0):r=new Ya(t,e,n,i),r.init(i.init),t.viewmodel.register(e,r,s?"patternObservers":"observers"),r.ready=!0;var a={cancel:function(){var n;o||(s?(n=t.viewmodel.patternObservers.indexOf(r),t.viewmodel.patternObservers.splice(n,1),t.viewmodel.unregister(e,r,"patternObservers")):t.viewmodel.unregister(e,r,"observers"),o=!0)}};return t._observers.push(a),a}function At(t,e,n){var i,r,s,o;if(h(t)){n=e,r=t,i=[];for(t in r)r.hasOwnProperty(t)&&(e=r[t],i.push(this.observe(t,e,n)));return{cancel:function(){for(;i.length;)i.pop().cancel()}}}if("function"==typeof t)return n=e,e=t,t="",ou(this,t,e,n);if(s=t.split(" "),1===s.length)return ou(this,t,e,n);for(i=[],o=s.length;o--;)t=s[o],t&&i.push(ou(this,t,e,n));return{cancel:function(){for(;i.length;)i.pop().cancel()}}}function Ct(t,e,n){var i=this.observe(t,function(){e.apply(this,arguments),i.cancel()},{init:!1,defer:n&&n.defer});return i}function Ot(t,e){var n,i=this;if(t)n=t.split(" ").map(cu).filter(lu),n.forEach(function(t){var n,r;(n=i._subs[t])&&(e?(r=n.indexOf(e),-1!==r&&n.splice(r,1)):i._subs[t]=[])});else for(t in this._subs)delete this._subs[t];return this}function Tt(t,e){var n,i,r,s=this;if("object"==typeof t){n=[];for(i in t)t.hasOwnProperty(i)&&n.push(this.on(i,t[i]));return{cancel:function(){for(var t;t=n.pop();)t.cancel()}}}return r=t.split(" ").map(cu).filter(lu),r.forEach(function(t){(s._subs[t]||(s._subs[t]=[])).push(e)}),{cancel:function(){return s.off(t,e)}}}function St(t,e){var n=this.on(t,function(){e.apply(this,arguments),n.cancel()});return n}function Ft(t,e,n){var i,r,s,o,a,u,h=[];if(i=Rt(t,e,n),!i)return null;for(r=t.length,a=i.length-2-i[1],s=Math.min(r,i[0]),o=s+i[1],u=0;s>u;u+=1)h.push(u);for(;o>u;u+=1)h.push(-1);for(;r>u;u+=1)h.push(u+a);return h.touchedFrom=0!==a?i[0]:t.length,h}function Rt(t,e,n){switch(e){case"splice":for(void 0!==n[0]&&n[0]<0&&(n[0]=t.length+Math.max(n[0],-t.length));n.length<2;)n.push(0);return n[1]=Math.min(n[1],t.length-n[0]),n;case"sort":case"reverse":return null;case"pop":return t.length?[t.length-1,1]:[0,0];case"push":return[t.length,0].concat(n);case"shift":return[0,t.length?1:0];case"unshift":return[0,0].concat(n)}}function jt(e,n){var i,r,s,o=this;if(s=this.transitionsEnabled,this.noIntro&&(this.transitionsEnabled=!1),i=ma.start(this,!0),ma.scheduleTask(function(){return Tu.fire(o)},!0),this.fragment.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");if(e=t(e)||this.el,n=t(n)||this.anchor,this.el=e,this.anchor=n,!this.append&&e){var a=e.__ractive_instances__;a&&a.length&&Pt(a),e.innerHTML=""}return this.cssId&&Cu.apply(),e&&((r=e.__ractive_instances__)?r.push(this):e.__ractive_instances__=[this],n?e.insertBefore(this.fragment.render(),n):e.appendChild(this.fragment.render())),ma.end(),this.transitionsEnabled=s,i.then(function(){return Su.fire(o)})}function Pt(t){t.splice(0,t.length).forEach(H)}function Nt(t,e){for(var n=t.slice(),i=e.length;i--;)~n.indexOf(e[i])||n.push(e[i]);return n}function Vt(t,e){var n,i,r;return i='[data-ractive-css~="{'+e+'}"]',r=function(t){var e,n,r,s,o,a,u,h=[];for(e=[];n=Vu.exec(t);)e.push({str:n[0],base:n[1],modifiers:n[2]});for(s=e.map(Lt),u=e.length;u--;)a=s.slice(),r=e[u],a[u]=r.base+i+r.modifiers||"",o=s.slice(),o[u]=i+" "+o[u],h.push(a.join(" "),o.join(" "));return h.join(", ")},n=Lu.test(t)?t.replace(Lu,i):t.replace(Nu,"").replace(Pu,function(t,e){var n,i;return Iu.test(e)?t:(n=e.split(",").map(It),i=n.map(r).join(", ")+" ",t.replace(e,i))})}function It(t){return t.trim?t.trim():t.replace(/^\s+/,"").replace(/\s+$/,"")}function Lt(t){return t.str}function Dt(t){t&&t.constructor!==Object&&("function"==typeof t||("object"!=typeof t?l("data option must be an object or a function, `"+t+"` is not valid"):m("If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged")))}function Mt(t,e){Dt(e);var n="function"==typeof t,i="function"==typeof e;return e||n||(e={}),n||i?function(){var r=i?Ut(e,this):e,s=n?Ut(t,this):t;return Bt(r,s)}:Bt(e,t)}function Ut(t,e){var n=t.call(e);if(n)return"object"!=typeof n&&l("Data function must return an object"),n.constructor!==Object&&v("Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged"),n}function Bt(t,e){if(t&&e){for(var n in e)n in t||(t[n]=e[n]);return t}return t||e}function qt(t){var e=wo(Ku);return e.parse=function(e,n){return Qt(e,n||t)},e}function Qt(t,e){if(!Qu)throw new Error("Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser");return Qu(t,e||this.options)}function Wt(t,e){var n;if(!Zs){if(e&&e.noThrow)return;throw new Error("Cannot retrieve template #"+t+" as Ractive is not running in a browser.")}if(Kt(t)&&(t=t.substring(1)),!(n=document.getElementById(t))){if(e&&e.noThrow)return;throw new Error("Could not find template element with id #"+t)}if("SCRIPT"!==n.tagName.toUpperCase()){if(e&&e.noThrow)return;throw new Error("Template element with id #"+t+", must be a <script> element")}return"textContent"in n?n.textContent:n.innerHTML}function Kt(t){return t&&"#"===t[0]}function Ht(t){return!("string"==typeof t)}function zt(t){return t.defaults&&(t=t.defaults),Wu.reduce(function(e,n){return e[n]=t[n],e},{})}function Gt(t){var e,n=t._config.template;if(n&&n.fn)return e=$t(t,n.fn),e!==n.result?(n.result=e,e=Jt(e,t)):void 0}function $t(t,e){var n=Yt(Hu.getParseOptions(t));return e.call(t,n)}function Yt(t){var e=wo(Hu);return e.parse=function(e,n){return Hu.parse(e,n||t)},e}function Jt(t,e){if("string"==typeof t)"#"===t[0]&&(t=Hu.fromId(t)),t=Qu(t,Hu.getParseOptions(e));else{if(void 0==t)throw new Error("The template cannot be "+t+".");if("number"!=typeof t.v)throw new Error("The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.");if(t.v!==so)throw new Error("Mismatched template version (expected "+so+", got "+t.v+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app")}return t}function Zt(t,e,n){if(e)for(var i in e)(n||!t.hasOwnProperty(i))&&(t[i]=e[i])}function Xt(t,e,n){if(!/_super/.test(n))return n;var i=function(){var t,r=te(i._parent,e),s="_super"in this,o=this._super;return this._super=r,t=n.apply(this,arguments),s?this._super=o:delete this._super,t};return i._parent=t,i._method=n,i}function te(t,e){var n,i;return e in t?(n=t[e],i="function"==typeof n?n:function(){return n}):i=Ro,i}function ee(t,e,n){return"options."+t+" has been deprecated in favour of options."+e+"."+(n?" You cannot specify both options, please use options."+e+".":"")}function ne(t,e,n){if(e in t){if(n in t)throw new Error(ee(e,n,!0));m(ee(e,n)),t[n]=t[e]}}function ie(t){ne(t,"beforeInit","onconstruct"),ne(t,"init","onrender"),ne(t,"complete","oncomplete"),ne(t,"eventDefinitions","events"),s(t.adaptors)&&ne(t,"adaptors","adapt")}function re(t,e,n,i){ih(i);for(var r in i)if(th.hasOwnProperty(r)){var s=i[r];"el"!==r&&"function"==typeof s?m(""+r+" is a Ractive option that does not expect a function and will be ignored","init"===t?n:null):n[r]=s}eh.forEach(function(r){r[t](e,n,i)}),Ru[t](e,n,i),Gu[t](e,n,i),Uu[t](e,n,i),se(e.prototype,n,i)}function se(t,e,n){for(var i in n)if(!Xu[i]&&n.hasOwnProperty(i)){var r=n[i];"function"==typeof r&&(r=nh(t,i,r)),e[i]=r}}function oe(t){var e={};return t.forEach(function(t){return e[t]=!0}),e}function ae(){this.dirtyValue=this.dirtyArgs=!0,this.bound&&"function"==typeof this.owner.bubble&&this.owner.bubble()}function ue(){var t;return 1===this.items.length?this.items[0].detach():(t=document.createDocumentFragment(),this.items.forEach(function(e){var n=e.detach();n&&t.appendChild(n)}),t)}function he(t){var e,n,i,r;if(this.items){for(n=this.items.length,e=0;n>e;e+=1)if(i=this.items[e],i.find&&(r=i.find(t)))return r;return null}}function ce(t,e){var n,i,r;if(this.items)for(i=this.items.length,n=0;i>n;n+=1)r=this.items[n],r.findAll&&r.findAll(t,e);return e}function le(t,e){var n,i,r;if(this.items)for(i=this.items.length,n=0;i>n;n+=1)r=this.items[n],r.findAllComponents&&r.findAllComponents(t,e);return e}function de(t){var e,n,i,r;if(this.items){for(e=this.items.length,n=0;e>n;n+=1)if(i=this.items[n],i.findComponent&&(r=i.findComponent(t)))return r;return null}}function fe(t){var e,n=t.index;return e=this.items[n+1]?this.items[n+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)}function pe(){return this.items&&this.items[0]?this.items[0].firstNode():null}function me(t){var e;return(e=t.matchPattern(Jh))?{t:Rh,v:e}:null}function ve(t){var e;return(e=$h(t))?tc.test(e.v)?e.v:'"'+e.v.replace(/"/g,'\\"')+'"':(e=Yh(t))?e.v:(e=t.matchPattern(Zh))?e:void 0}function ge(t){var e,n,i;return t.allowWhitespace(),(e=Xh(t))?(i={key:e},t.allowWhitespace(),t.matchString(":")?(t.allowWhitespace(),(n=t.read())?(i.value=n.v,i):null):null):null}function ye(t,e,n,i){return i=i||0,t.map(function(t){var r,s,o;return t.text?t.text:t.fragments?t.fragments.map(function(t){return ye(t.items,e,n,i)}).join(""):(r=n+"-"+i++,o=t.keypath&&(s=t.root.viewmodel.wrapped[t.keypath.str])?s.value:t.getValue(),e[r]=o,"${"+r+"}")}).join("")}function be(){var t,e,n,i;return this.dirtyArgs&&(e=cc(this.items,t={},this.root._guid),n=hc("["+e+"]",t),i=n?n.value:[this.toString()],this.argsList=i,this.dirtyArgs=!1),this.argsList}function we(){var t=this;do if(t.pElement)return t.pElement.node;while(t=t.parent);return this.root.detached||this.root.el}function ke(){var t,e,n,i;return this.dirtyValue&&(e=cc(this.items,t={},this.root._guid),n=hc(e,t),i=n?n.value:this.toString(),this.value=i,this.dirtyValue=!1),this.value}function xe(t){return t.replace(sc,function(t,e){var n;return n="#"!==e[0]?ic[e]:"x"===e[1]?parseInt(e.substring(2),16):parseInt(e.substring(1),10),n?String.fromCharCode(Ee(n)):t})}function Ee(t){return t?10===t?32:128>t?t:159>=t?rc[t-128]:55296>t?t:57343>=t?65533:65535>=t?t:65533:65533}function _e(t){return t.replace(uc,"&amp;").replace(oc,"&lt;").replace(ac,"&gt;")}function Ae(){this.registered&&this.root.viewmodel.unregister(this.keypath,this),this.resolver&&this.resolver.unbind()}function Ce(){return this.value}function Oe(t,e){for(var n,i=0;i<e.prop.length;i++)if(void 0!==(n=t[e.prop[i]]))return n}function Te(t,e){var n,i,r,s,o,a={},u=!1;for(e||(a.refs=n={});t;){if((o=t.owner)&&(i=o.indexRefs)){if(e&&(r=o.getIndexRef(e)))return a.ref={fragment:t,ref:r},a;if(!e)for(s in i)r=i[s],n[r.n]||(u=!0,n[r.n]={fragment:t,ref:r})}!t.parent&&t.owner&&t.owner.component&&t.owner.component.parentFragment&&!t.owner.component.instance.isolated?(a.componentBoundary=!0,t=t.owner.component.parentFragment):t=t.parent}return u?a:void 0}function Se(t,e,n){var i;return"@"===e.charAt(0)?new Ec(t,e,n):(i=Cc(t.parentFragment,e))?new Ac(t,i,n):new wc(t,e,n)}function Fe(t,e){var n,i;if(Fc[t])return Fc[t];for(i=[];e--;)i[e]="_"+e;return n=new Function(i.join(","),"return("+t+")"),Fc[t]=n,n}function Re(t){return t.call()}function je(t,e){return t.replace(/_([0-9]+)/g,function(t,n){var i,r;return+n>=e.length?"_"+n:(i=e[n],void 0===i?"undefined":i.isSpecial?(r=i.value,"number"==typeof r?r:'"'+r+'"'):i.str)})}function Pe(t){return _("${"+t.replace(/[\.\[\]]/g,"-").replace(/\*/,"#MUL#")+"}")}function Ne(t){return void 0!==t&&"@"!==t[0]}function Ve(t,e){var n,i,r;if(t.__ractive_nowrap)return t;if(i="__ractive_"+e._guid,n=t[i])return n;if(/this/.test(t.toString())){ko(t,i,{value:Rc.call(t,e),configurable:!0});for(r in t)t.hasOwnProperty(r)&&(t[i][r]=t[r]);return e._boundFunctions.push({fn:t,prop:i}),t[i]}return ko(t,"__ractive_nowrap",{value:t}),t.__ractive_nowrap}function Ie(t){return t.value}function Le(t){return void 0!=t}function De(t){t.forceResolution()}function Me(t,e){function n(e){t.resolve(e)}function i(e){var n=t.keypath;e!=n&&(t.resolve(e),void 0!==n&&t.fragments&&t.fragments.forEach(function(t){t.rebind(n,e)}))}var r,s,o;s=e.parentFragment,o=e.template,t.root=s.root,t.parentFragment=s,t.pElement=s.pElement,t.template=e.template,t.index=e.index||0,t.isStatic=e.template.s,t.type=e.template.t,t.registered=!1,(r=o.r)&&(t.resolver=Tc(t,r,n)),e.template.x&&(t.resolver=new jc(t,s,e.template.x,i)),e.template.rx&&(t.resolver=new Ic(t,e.template.rx,i)),t.template.n!==Vh||t.hasOwnProperty("value")||t.setValue(void 0)}function Ue(t){var e,n,i;return t&&t.isSpecial?(this.keypath=t,void this.setValue(t.value)):(this.registered&&(this.root.viewmodel.unregister(this.keypath,this),this.registered=!1,e=!0),this.keypath=t,void 0!=t&&(n=this.root.viewmodel.get(t),this.root.viewmodel.register(t,this),this.registered=!0),this.setValue(n),void(e&&(i=this.twowayBinding)&&i.rebound()))}function Be(t,e){this.fragments&&this.fragments.forEach(function(n){return n.rebind(t,e)}),this.resolver&&this.resolver.rebind(t,e)}function qe(){this.parentFragment.bubble()}function Qe(){var t;return 1===this.fragments.length?this.fragments[0].detach():(t=document.createDocumentFragment(),this.fragments.forEach(function(e){t.appendChild(e.detach())}),t)}function We(t){var e,n,i;for(n=this.fragments.length,e=0;n>e;e+=1)if(i=this.fragments[e].find(t))return i;return null}function Ke(t,e){var n,i;for(i=this.fragments.length,n=0;i>n;n+=1)this.fragments[n].findAll(t,e)}function He(t,e){var n,i;for(i=this.fragments.length,n=0;i>n;n+=1)this.fragments[n].findAllComponents(t,e)}function ze(t){var e,n,i;for(n=this.fragments.length,e=0;n>e;e+=1)if(i=this.fragments[e].findComponent(t))return i;return null}function Ge(t){return this.fragments[t.index+1]?this.fragments[t.index+1].firstNode():this.parentFragment.findNextNode(this)}function $e(){var t,e,n;if(t=this.fragments.length)for(e=0;t>e;e+=1)if(n=this.fragments[e].firstNode())return n;return this.parentFragment.findNextNode(this)}function Ye(t){var e,n,i,r,s,o,a,u=this;if(!this.shuffling&&!this.unbound&&this.currentSubtype===Ih){if(this.shuffling=!0,ma.scheduleTask(function(){return u.shuffling=!1}),e=this.parentFragment,s=[],t.forEach(function(t,e){var i,r,o,a,h;return t===e?void(s[t]=u.fragments[e]):(i=u.fragments[e],void 0===n&&(n=e),-1===t?(u.fragmentsToUnrender.push(i),void i.unbind()):(r=t-e,o=u.keypath.join(e),a=u.keypath.join(t),i.index=t,(h=i.registeredIndexRefs)&&h.forEach(Je),i.rebind(o,a),void(s[t]=i)))}),r=this.root.viewmodel.get(this.keypath).length,void 0===n){if(this.length===r)return;n=this.length}for(this.length=this.fragments.length=r,this.rendered&&ma.addView(this),o={template:this.template.f,root:this.root,owner:this},i=n;r>i;i+=1)a=s[i],a||this.fragmentsToCreate.push(i),this.fragments[i]=a}}function Je(t){t.rebind("","")}function Ze(){var t=this;return this.docFrag=document.createDocumentFragment(),this.fragments.forEach(function(e){return t.docFrag.appendChild(e.render())}),this.renderedFragments=this.fragments.slice(),this.fragmentsToRender=[],this.rendered=!0,this.docFrag}function Xe(t){var e,n,i=this;this.updating||(this.updating=!0,this.keypath&&(e=this.root.viewmodel.wrapped[this.keypath.str])&&(t=e.get()),this.fragmentsToCreate.length?(n={template:this.template.f||[],root:this.root,pElement:this.pElement,owner:this},this.fragmentsToCreate.forEach(function(t){var e;n.context=i.keypath.join(t),n.index=t,e=new ev(n),i.fragmentsToRender.push(i.fragments[t]=e)}),this.fragmentsToCreate.length=0):en(this,t)&&(this.bubble(),this.rendered&&ma.addView(this)),this.value=t,this.updating=!1)}function tn(t,e,n){if(e===Ih&&t.indexRefs&&t.indexRefs[0]){var i=t.indexRefs[0];(n&&"i"===i.t||!n&&"k"===i.t)&&(n||(t.length=0,t.fragmentsToUnrender=t.fragments.slice(0),t.fragmentsToUnrender.forEach(function(t){return t.unbind()}))),i.t=n?"k":"i"}t.currentSubtype=e}function en(t,e){var n={template:t.template.f||[],root:t.root,pElement:t.parentFragment.pElement,owner:t};if(t.hasContext=!0,t.subtype)switch(t.subtype){case Nh:return t.hasContext=!1,an(t,e,!1,n);case Vh:return t.hasContext=!1,an(t,e,!0,n);case Lh:return on(t,n);case Dh:return sn(t,e,n);case Ih:if(h(e))return tn(t,t.subtype,!0),rn(t,e,n)}return t.ordered=!!o(e),t.ordered?(tn(t,Ih,!1),nn(t,e,n)):h(e)||"function"==typeof e?t.template.i?(tn(t,Ih,!0),rn(t,e,n)):(tn(t,Lh,!1),on(t,n)):(tn(t,Nh,!1),t.hasContext=!1,an(t,e,!1,n))}function nn(t,e,n){var i,r,s;if(r=e.length,r===t.length)return!1;if(r<t.length)t.fragmentsToUnrender=t.fragments.splice(r,t.length-r),t.fragmentsToUnrender.forEach(z);else if(r>t.length)for(i=t.length;r>i;i+=1)n.context=t.keypath.join(i),n.index=i,s=new ev(n),t.fragmentsToRender.push(t.fragments[i]=s);return t.length=r,!0}function rn(t,e,n){var i,r,s,o,a,u;for(s=t.hasKey||(t.hasKey={}),r=t.fragments.length;r--;)o=t.fragments[r],o.key in e||(a=!0,o.unbind(),t.fragmentsToUnrender.push(o),t.fragments.splice(r,1),s[o.key]=!1);for(r=t.fragments.length;r--;)o=t.fragments[r],o.index!==r&&(o.index=r,(u=o.registeredIndexRefs)&&u.forEach(cn));r=t.fragments.length;for(i in e)s[i]||(a=!0,n.context=t.keypath.join(i),n.key=i,n.index=r++,o=new ev(n),t.fragmentsToRender.push(o),t.fragments.push(o),s[i]=!0);return t.length=t.fragments.length,a}function sn(t,e,n){return e?on(t,n):un(t)}function on(t,e){var n;return t.length?void 0:(e.context=t.keypath,e.index=0,n=new ev(e),t.fragmentsToRender.push(t.fragments[0]=n),t.length=1,!0)}function an(t,e,n,i){var r,s,a,u,c;if(s=o(e)&&0===e.length,a=!1,!o(e)&&h(e)){a=!0;for(c in e){a=!1;break}}return r=n?s||a||!e:e&&!s&&!a,r?t.length?t.length>1?(t.fragmentsToUnrender=t.fragments.splice(1),t.fragmentsToUnrender.forEach(z),!0):void 0:(i.index=0,u=new ev(i),t.fragmentsToRender.push(t.fragments[0]=u),t.length=1,!0):un(t)}function un(t){return t.length?(t.fragmentsToUnrender=t.fragments.splice(0,t.fragments.length).filter(hn),t.fragmentsToUnrender.forEach(z),t.length=t.fragmentsToRender.length=0,!0):void 0}function hn(t){return t.rendered}function cn(t){t.rebind("","")}function ln(t){var e,n,i;for(e="",n=0,i=this.length,n=0;i>n;n+=1)e+=this.fragments[n].toString(t);return e}function dn(){var t=this;this.fragments.forEach(z),this.fragmentsToRender.forEach(function(e){return I(t.fragments,e)}),this.fragmentsToRender=[],gc.call(this),this.length=0,this.unbound=!0}function fn(t){this.fragments.forEach(t?pn:mn),this.renderedFragments=[],this.rendered=!1}function pn(t){t.unrender(!0)}function mn(t){t.unrender(!1)}function vn(){var t,e,n,i,r,s,o;for(n=this.renderedFragments;t=this.fragmentsToUnrender.pop();)t.unrender(!0),n.splice(n.indexOf(t),1);for(;t=this.fragmentsToRender.shift();)t.render();for(this.rendered&&(r=this.parentFragment.getNode()),o=this.fragments.length,s=0;o>s;s+=1)t=this.fragments[s],e=n.indexOf(t,s),e!==s?(this.docFrag.appendChild(t.detach()),-1!==e&&n.splice(e,1),n.splice(s,0,t)):this.docFrag.childNodes.length&&(i=t.firstNode(),r.insertBefore(this.docFrag,i));this.rendered&&this.docFrag.childNodes.length&&(i=this.parentFragment.findNextNode(this),r.insertBefore(this.docFrag,i)),this.renderedFragments=this.fragments.slice()}function gn(){var t,e;if(this.docFrag){for(t=this.nodes.length,e=0;t>e;e+=1)this.docFrag.appendChild(this.nodes[e]);return this.docFrag}}function yn(t){var e,n,i,r;for(n=this.nodes.length,e=0;n>e;e+=1)if(i=this.nodes[e],1===i.nodeType){if(lo(i,t))return i;if(r=i.querySelector(t))return r}return null}function bn(t,e){var n,i,r,s,o,a;for(i=this.nodes.length,n=0;i>n;n+=1)if(r=this.nodes[n],1===r.nodeType&&(lo(r,t)&&e.push(r),s=r.querySelectorAll(t)))for(o=s.length,a=0;o>a;a+=1)e.push(s[a])}function wn(){return this.rendered&&this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)}function kn(t){return fl[t]||(fl[t]=co(t))}function xn(t){var e,n,i;t&&"select"===t.name&&t.binding&&(e=L(t.node.options).filter(En),t.getAttribute("multiple")?i=e.map(function(t){return t.value}):(n=e[0])&&(i=n.value),void 0!==i&&t.binding.setValue(i),t.bubble())}function En(t){return t.selected}function _n(){if(this.rendered)throw new Error("Attempted to render an item that was already rendered");return this.docFrag=document.createDocumentFragment(),this.nodes=pl(this.value,this.parentFragment.getNode(),this.docFrag),ml(this.pElement),this.rendered=!0,this.docFrag}function An(t){var e;(e=this.root.viewmodel.wrapped[this.keypath.str])&&(t=e.get()),t!==this.value&&(this.value=t,this.parentFragment.bubble(),this.rendered&&ma.addView(this))}function Cn(){return void 0!=this.value?xe(""+this.value):""}function On(t){this.rendered&&t&&(this.nodes.forEach(e),this.rendered=!1)}function Tn(){var t,e;if(this.rendered){for(;this.nodes&&this.nodes.length;)t=this.nodes.pop(),
t.parentNode.removeChild(t);e=this.parentFragment.getNode(),this.nodes=pl(this.value,e,this.docFrag),e.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),ml(this.pElement)}}function Sn(){var t,e=this.node;return e?((t=e.parentNode)&&t.removeChild(e),e):void 0}function Fn(){return null}function Rn(){return this.node}function jn(t){return this.attributes&&this.attributes[t]?this.attributes[t].value:void 0}function Pn(){var t=this.useProperty||!this.rendered?this.fragment.getValue():this.fragment.toString();a(t,this.value)||("id"===this.name&&this.value&&delete this.root.nodes[this.value],this.value=t,"value"===this.name&&this.node&&(this.node._ractive.value=t),this.rendered&&ma.addView(this))}function Nn(t){var e=t.fragment.items;if(1===e.length)return e[0].type===kh?e[0]:void 0}function Vn(t){return this.type=Oh,this.element=t.element,this.root=t.root,Bl(this,t.name),this.isBoolean=ec.test(this.name),t.value&&"string"!=typeof t.value?(this.parentFragment=this.element.parentFragment,this.fragment=new ev({template:t.value,root:this.root,owner:this}),this.value=this.fragment.getValue(),this.interpolator=ql(this),this.isBindable=!!this.interpolator&&!this.interpolator.isStatic,void(this.ready=!0)):void(this.value=this.isBoolean?!0:t.value||"")}function In(t,e){this.fragment&&this.fragment.rebind(t,e)}function Ln(t){var e;this.node=t,t.namespaceURI&&t.namespaceURI!==no.html||(e=Hl[this.name]||this.name,void 0!==t[e]&&(this.propertyName=e),(this.isBoolean||this.isTwoway)&&(this.useProperty=!0),"value"===e&&(t._ractive.value=this.value)),this.rendered=!0,this.update()}function Dn(){var t=this,e=t.name,n=t.namespacePrefix,i=t.value,r=t.interpolator,s=t.fragment;if(("value"!==e||"select"!==this.element.name&&"textarea"!==this.element.name)&&("value"!==e||void 0===this.element.getAttribute("contenteditable"))){if("name"===e&&"input"===this.element.name&&r)return"name={{"+(r.keypath.str||r.ref)+"}}";if(this.isBoolean)return i?e:"";if(s){if(1===s.items.length&&null==s.items[0].value)return"";i=s.toString()}return n&&(e=n+":"+e),i?e+'="'+Mn(i)+'"':e}}function Mn(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function Un(){this.fragment&&this.fragment.unbind(),"id"===this.name&&delete this.root.nodes[this.value]}function Bn(){var t,e,n,i,r=this.value;if(!this.locked)for(this.node._ractive.value=r,t=this.node.options,i=t.length;i--;)if(e=t[i],n=e._ractive?e._ractive.value:e.value,n==r){e.selected=!0;break}}function qn(){var t,e,n,i,r=this.value;for(s(r)||(r=[r]),t=this.node.options,e=t.length;e--;)n=t[e],i=n._ractive?n._ractive.value:n.value,n.selected=j(r,i)}function Qn(){var t=this,e=t.node,n=t.value;e.checked=n==e._ractive.value}function Wn(){var t,e,n,i,r=this.node;if(t=r.checked,r.value=this.element.getAttribute("value"),r.checked=this.element.getAttribute("value")===this.element.getAttribute("name"),t&&!r.checked&&this.element.binding&&(n=this.element.binding.siblings,i=n.length)){for(;i--;){if(e=n[i],!e.element.node)return;if(e.element.node.checked)return ma.addRactive(e.root),e.handleChange()}this.root.viewmodel.set(e.keypath,void 0)}}function Kn(){var t,e,n=this,i=n.element,r=n.node,o=n.value,a=i.binding;if(t=i.getAttribute("value"),s(o)){for(e=o.length;e--;)if(t==o[e])return void(a.isChecked=r.checked=!0);a.isChecked=r.checked=!1}else a.isChecked=r.checked=o==t}function Hn(){this.node.className=n(this.value)}function zn(){var t=this,e=t.node,n=t.value;this.root.nodes[n]=e,e.id=n}function Gn(){var t,e;t=this.node,e=this.value,void 0===e&&(e=""),t.style.setAttribute("cssText",e)}function $n(){var t=this.value;void 0===t&&(t=""),this.locked||(this.node.innerHTML=t)}function Yn(){var t=this,e=t.node,n=t.value;e._ractive.value=n,this.locked||(e.value=void 0==n?"":n)}function Jn(){this.locked||(this.node[this.propertyName]=this.value)}function Zn(){var t=this,e=t.node,n=t.namespace,i=t.name,r=t.value,s=t.fragment;n?e.setAttributeNS(n,i,(s||r).toString()):this.isBoolean?r?e.setAttribute(i,""):e.removeAttribute(i):null==r?e.removeAttribute(i):e.setAttribute(i,(s||r).toString())}function Xn(){var t,e,n=this,i=n.name,r=n.element,s=n.node;"id"===i?e=ed:"value"===i?"select"===r.name&&"value"===i?e=r.getAttribute("multiple")?Yl:$l:"textarea"===r.name?e=rd:null!=r.getAttribute("contenteditable")?e=id:"input"===r.name&&(t=r.getAttribute("type"),e="file"===t?Ro:"radio"===t&&r.binding&&"name"===r.binding.name?Zl:rd):this.isTwoway&&"name"===i?"radio"===s.type?e=Jl:"checkbox"===s.type&&(e=Xl):"style"===i&&s.style.setAttribute?e=nd:"class"!==i||s.namespaceURI&&s.namespaceURI!==no.html?this.useProperty&&(e=sd):e=td,e||(e=od),this.update=e,this.update()}function ti(t,e){var n=e?"svg":"div";return hd.innerHTML="<"+n+" "+t+"></"+n+">",L(hd.childNodes[0].attributes)}function ei(t,e){for(var n=t.length;n--;)if(t[n].name===e.name)return!1;return!0}function ni(t){for(;t=t.parent;)if("form"===t.name)return t}function ii(){this._ractive.binding.handleChange()}function ri(){var t;yd.call(this),t=this._ractive.root.viewmodel.get(this._ractive.binding.keypath),this.value=void 0==t?"":t}function si(){var t=this._ractive.binding,e=this;t._timeout&&clearTimeout(t._timeout),t._timeout=setTimeout(function(){t.rendered&&yd.call(e),t._timeout=void 0},t.element.lazy)}function oi(t,e,n){var i=t+e+n;return Ed[i]||(Ed[i]=[])}function ai(t){return t.isChecked}function ui(t){return t.element.getAttribute("value")}function hi(t){var e,n,i,r,s,o=t.attributes;return t.binding&&(t.binding.teardown(),t.binding=null),(t.getAttribute("contenteditable")||o.contenteditable&&ci(o.contenteditable))&&ci(o.value)?n=kd:"input"===t.name?(e=t.getAttribute("type"),"radio"===e||"checkbox"===e?(i=ci(o.name),r=ci(o.checked),i&&r&&m("A radio input can have two-way binding on its name attribute, or its checked attribute - not both",{ractive:t.root}),i?n="radio"===e?Od:Sd:r&&(n="radio"===e?Ad:Rd)):"file"===e&&ci(o.value)?n=Ld:ci(o.value)&&(n="number"===e||"range"===e?Dd:bd)):"select"===t.name&&ci(o.value)?n=t.getAttribute("multiple")?Vd:Pd:"textarea"===t.name&&ci(o.value)&&(n=bd),n&&(s=new n(t))&&s.keypath?s:void 0}function ci(t){return t&&t.isBindable}function li(){var t=this.getAction();t&&!this.hasListener?this.listen():!t&&this.hasListener&&this.unrender()}function di(t){Ba(this.root,this.getAction(),{event:t})}function fi(){return this.action.toString().trim()}function pi(t,e,n){var i,r,s,o=this;this.element=t,this.root=t.root,this.parentFragment=t.parentFragment,this.name=e,-1!==e.indexOf("*")&&(l('Only component proxy-events may contain "*" wildcards, <%s on-%s="..."/> is not valid',t.name,e),this.invalid=!0),n.m?(r=n.a.r,this.method=n.m,this.keypaths=[],this.fn=Sc(n.a.s,r.length),this.parentFragment=t.parentFragment,s=this.root,this.refResolvers=[],r.forEach(function(t,e){var n=void 0;(n=Wd.exec(t))?o.keypaths[e]={eventObject:!0,refinements:n[1]?n[1].split("."):[]}:o.refResolvers.push(Tc(o,t,function(t){return o.resolve(e,t)}))}),this.fire=mi):(i=n.n||n,"string"!=typeof i&&(i=new ev({template:i,root:this.root,owner:this})),this.action=i,n.d?(this.dynamicParams=new ev({template:n.d,root:this.root,owner:this.element}),this.fire=gi):n.a&&(this.params=n.a,this.fire=vi))}function mi(t){var e,n,i;if(e=this.root,"function"!=typeof e[this.method])throw new Error('Attempted to call a non-existent method ("'+this.method+'")');n=this.keypaths.map(function(n){var i,r,s;if(void 0===n)return void 0;if(n.eventObject){if(i=t,r=n.refinements.length)for(s=0;r>s;s+=1)i=i[n.refinements[s]]}else i=e.viewmodel.get(n);return i}),Ua.enqueue(e,t),i=this.fn.apply(null,n),e[this.method].apply(e,i),Ua.dequeue(e)}function vi(t){Ba(this.root,this.getAction(),{event:t,args:this.params})}function gi(t){var e=this.dynamicParams.getArgsList();"string"==typeof e&&(e=e.substr(1,e.length-2)),Ba(this.root,this.getAction(),{event:t,args:e})}function yi(t){var e,n,i,r={};e=this._ractive,n=e.events[t.type],(i=Cc(n.element.parentFragment))&&(r=Cc.resolve(i)),n.fire({node:this,original:t,index:r,keypath:e.keypath.str,context:e.root.viewmodel.get(e.keypath)})}function bi(){var t,e=this.name;if(!this.invalid){if(t=g("events",this.root,e))this.custom=t(this.node,wi(e));else{if(!("on"+e in this.node||window&&"on"+e in window||Xs))return void(Gd[e]||v(Vo(e,"event"),{node:this.node}));this.node.addEventListener(e,Kd,!1)}this.hasListener=!0}}function wi(t){return zd[t]||(zd[t]=function(e){var n=e.node._ractive;e.index=n.index,e.keypath=n.keypath.str,e.context=n.root.viewmodel.get(n.keypath),n.events[t].fire(e)}),zd[t]}function ki(t,e){function n(n){n&&n.rebind(t,e)}var i;return this.method?(i=this.element.parentFragment,void this.refResolvers.forEach(n)):("string"!=typeof this.action&&n(this.action),void(this.dynamicParams&&n(this.dynamicParams)))}function xi(){this.node=this.element.node,this.node._ractive.events[this.name]=this,(this.method||this.getAction())&&this.listen()}function Ei(t,e){this.keypaths[t]=e}function _i(){return this.method?void this.refResolvers.forEach(z):("string"!=typeof this.action&&this.action.unbind(),void(this.dynamicParams&&this.dynamicParams.unbind()))}function Ai(){this.custom?this.custom.teardown():this.node.removeEventListener(this.name,Kd,!1),this.hasListener=!1}function Ci(){var t=this;this.dirty||(this.dirty=!0,ma.scheduleTask(function(){Oi(t),t.dirty=!1})),this.parentFragment.bubble()}function Oi(t){var e,n,i,r,s;e=t.node,e&&(r=L(e.options),n=t.getAttribute("value"),i=t.getAttribute("multiple"),void 0!==n?(r.forEach(function(t){var e,r;e=t._ractive?t._ractive.value:t.value,r=i?Ti(n,e):n==e,r&&(s=!0),t.selected=r}),s||(r[0]&&(r[0].selected=!0),t.binding&&t.binding.forceUpdate())):t.binding&&t.binding.forceUpdate())}function Ti(t,e){for(var n=t.length;n--;)if(t[n]==e)return!0}function Si(t,e){t.select=Ri(t.parent),t.select&&(t.select.options.push(t),e.a||(e.a={}),void 0!==e.a.value||e.a.hasOwnProperty("disabled")||(e.a.value=e.f),"selected"in e.a&&void 0!==t.select.getAttribute("value")&&delete e.a.selected)}function Fi(t){t.select&&I(t.select.options,t)}function Ri(t){if(t)do if("select"===t.name)return t;while(t=t.parent)}function ji(t){var e,n,i,r,s,o,a;this.type=_h,e=this.parentFragment=t.parentFragment,n=this.template=t.template,this.parent=t.pElement||e.pElement,this.root=i=e.root,this.index=t.index,this.key=t.key,this.name=Ul(n.e),"option"===this.name&&Si(this,n),"select"===this.name&&(this.options=[],this.bubble=Ci),"form"===this.name&&(this.formBindings=[]),a=Dl(this,n),this.attributes=ld(this,n.a),this.conditionalAttributes=pd(this,n.m),n.f&&(this.fragment=new ev({template:n.f,root:i,owner:this,pElement:this,cssIds:null})),o=i.twoway,a.twoway===!1?o=!1:a.twoway===!0&&(o=!0),this.twoway=o,this.lazy=a.lazy,o&&(r=Md(this,n.a))&&(this.binding=r,s=this.root._twowayBindings[r.keypath.str]||(this.root._twowayBindings[r.keypath.str]=[]),s.push(r)),n.v&&(this.eventHandlers=nf(this,n.v)),n.o&&(this.decorator=new uf(this,n.o)),this.intro=n.t0||n.t1,this.outro=n.t0||n.t2}function Pi(t,e){function n(n){n.rebind(t,e)}var i,r,s,o;if(this.attributes&&this.attributes.forEach(n),this.conditionalAttributes&&this.conditionalAttributes.forEach(n),this.eventHandlers&&this.eventHandlers.forEach(n),this.decorator&&n(this.decorator),this.fragment&&n(this.fragment),s=this.liveQueries)for(o=this.root,i=s.length;i--;)s[i]._makeDirty();this.node&&(r=this.node._ractive)&&x(r,"keypath",t,e)}function Ni(t){var e;(t.attributes.width||t.attributes.height)&&t.node.addEventListener("load",e=function(){var n=t.getAttribute("width"),i=t.getAttribute("height");void 0!==n&&t.node.setAttribute("width",n),void 0!==i&&t.node.setAttribute("height",i),t.node.removeEventListener("load",e,!1)},!1)}function Vi(t){t.node.addEventListener("reset",Li,!1)}function Ii(t){t.node.removeEventListener("reset",Li,!1)}function Li(){var t=this._ractive.proxy;ma.start(),t.formBindings.forEach(Di),ma.end()}function Di(t){t.root.viewmodel.set(t.keypath,t.resetValue)}function Mi(t,e,n){var i,r,s;this.element=t,this.root=i=t.root,this.isIntro=n,r=e.n||e,("string"==typeof r||(s=new ev({template:r,root:i,owner:t}),r=s.toString(),s.unbind(),""!==r))&&(this.name=r,e.a?this.params=e.a:e.d&&(s=new ev({template:e.d,root:i,owner:t}),this.params=s.getArgsList(),s.unbind()),this._fn=g("transitions",i,r),this._fn||v(Vo(r,"transition"),{ractive:this.root}))}function Ui(t){return t}function Bi(){Df.hidden=document[Nf]}function qi(){Df.hidden=!0}function Qi(){Df.hidden=!1}function Wi(){var t,e,n,i=this;return t=this.node=this.element.node,e=t.getAttribute("style"),this.complete=function(r){n||(!r&&i.isIntro&&Ki(t,e),t._ractive.transition=null,i._manager.remove(i),n=!0)},this._fn?void this._fn.apply(this.root,[this].concat(this.params)):void this.complete()}function Ki(t,e){e?t.setAttribute("style",e):(t.getAttribute("style"),t.removeAttribute("style"))}function Hi(){var t,e,n,i=this,r=this.root;return t=zi(this),e=this.node=co(this.name,t),this.parentFragment.cssIds&&this.node.setAttribute("data-ractive-css",this.parentFragment.cssIds.map(function(t){return"{"+t+"}"}).join(" ")),ko(this.node,"_ractive",{value:{proxy:this,keypath:aa(this.parentFragment),events:wo(null),root:r}}),this.attributes.forEach(function(t){return t.render(e)}),this.conditionalAttributes.forEach(function(t){return t.render(e)}),this.fragment&&("script"===this.name?(this.bubble=$f,this.node.text=this.fragment.toString(!1),this.fragment.unrender=Ro):"style"===this.name?(this.bubble=Gf,this.bubble(),this.fragment.unrender=Ro):this.binding&&this.getAttribute("contenteditable")?this.fragment.unrender=Ro:this.node.appendChild(this.fragment.render())),this.binding&&(this.binding.render(),this.node._ractive.binding=this.binding),this.eventHandlers&&this.eventHandlers.forEach(function(t){return t.render()}),"option"===this.name&&Gi(this),"img"===this.name?Ni(this):"form"===this.name?Vi(this):"input"===this.name||"textarea"===this.name?this.node.defaultValue=this.node.value:"option"===this.name&&(this.node.defaultSelected=this.node.selected),this.decorator&&this.decorator.fn&&ma.scheduleTask(function(){i.decorator.torndown||i.decorator.init()},!0),r.transitionsEnabled&&this.intro&&(n=new Yf(this,this.intro,!0),ma.registerTransition(n),ma.scheduleTask(function(){return n.start()},!0),this.transition=n),this.node.autofocus&&ma.scheduleTask(function(){return i.node.focus()},!0),$i(this),this.node}function zi(t){var e,n,i;return e=(n=t.getAttribute("xmlns"))?n:"svg"===t.name?no.svg:(i=t.parent)?"foreignObject"===i.name?no.html:i.node.namespaceURI:t.root.el.namespaceURI}function Gi(t){var e,n,i;if(t.select&&(n=t.select.getAttribute("value"),void 0!==n))if(e=t.getAttribute("value"),t.select.node.multiple&&s(n)){for(i=n.length;i--;)if(e==n[i]){t.node.selected=!0;break}}else t.node.selected=e==n}function $i(t){var e,n,i,r,s;e=t.root;do for(n=e._liveQueries,i=n.length;i--;)r=n[i],s=n["_"+r],s._test(t)&&(t.liveQueries||(t.liveQueries=[])).push(s);while(e=e.parent)}function Yi(t){var e,n,i;if(e=t.getAttribute("value"),void 0===e||!t.select)return!1;if(n=t.select.getAttribute("value"),n==e)return!0;if(t.select.getAttribute("multiple")&&s(n))for(i=n.length;i--;)if(n[i]==e)return!0}function Ji(t){var e,n,i,r;return e=t.attributes,n=e.type,i=e.value,r=e.name,n&&"radio"===n.value&&i&&r.interpolator&&i.value===r.interpolator.value?!0:void 0}function Zi(t){var e=t.toString();return e?" "+e:""}function Xi(){this.fragment&&this.fragment.unbind(),this.binding&&this.binding.unbind(),this.eventHandlers&&this.eventHandlers.forEach(z),"option"===this.name&&Fi(this),this.attributes.forEach(z),this.conditionalAttributes.forEach(z)}function tr(t){var e,n,i;(i=this.transition)&&i.complete(),"option"===this.name?this.detach():t&&ma.detachWhenReady(this),this.fragment&&this.fragment.unrender(!1),(e=this.binding)&&(this.binding.unrender(),this.node._ractive.binding=null,n=this.root._twowayBindings[e.keypath.str],n.splice(n.indexOf(e),1)),this.eventHandlers&&this.eventHandlers.forEach(G),this.decorator&&ma.registerDecorator(this.decorator),this.root.transitionsEnabled&&this.outro&&(i=new Yf(this,this.outro,!1),ma.registerTransition(i),ma.scheduleTask(function(){return i.start()})),this.liveQueries&&er(this),"form"===this.name&&Ii(this)}function er(t){var e,n,i;for(i=t.liveQueries.length;i--;)e=t.liveQueries[i],n=e.selector,e._remove(t.node)}function nr(t,e){var n=rp.exec(e)[0];return null===t||n.length<t.length?n:t}function ir(t,e,n){var i;if(i=rr(t,e,n||{}))return i;if(i=Hu.fromId(e,{noThrow:!0})){i=sp(i);var r=Hu.parse(i,Hu.getParseOptions(t));return t.partials[e]=r.t}}function rr(t,e,n){var i=void 0,r=ar(e,n.owner);if(r)return r;var s=y("partials",t,e);if(s){if(r=s.partials[e],"function"==typeof r&&(i=r.bind(s),i.isOwner=s.partials.hasOwnProperty(e),r=i.call(t,Hu)),!r&&""!==r)return void m(No,e,"partial","partial",{ractive:t});if(!Hu.isParsed(r)){var o=Hu.parse(r,Hu.getParseOptions(s));o.p&&m("Partials ({{>%s}}) cannot contain nested inline partials",e,{ractive:t});var a=i?s:sr(s,e);a.partials[e]=r=o.t}return i&&(r._fn=i),r.v?r.t:r}}function sr(t,e){return t.partials.hasOwnProperty(e)?t:or(t.constructor,e)}function or(t,e){return t?t.partials.hasOwnProperty(e)?t:or(t._Parent,e):void 0}function ar(t,e){if(e){if(e.template&&e.template.p&&e.template.p[t])return e.template.p[t];if(e.parentFragment&&e.parentFragment.owner)return ar(t,e.parentFragment.owner)}}function ur(t,e){var n,i=y("components",t,e);if(i&&(n=i.components[e],!n._Parent)){var r=n.bind(i);if(r.isOwner=i.components.hasOwnProperty(e),n=r(),!n)return void m(No,e,"component","component",{ractive:t});"string"==typeof n&&(n=ur(t,n)),n._fn=r,i.components[e]=n}return n}function hr(){var t=this.instance.fragment.detach();return vp.fire(this.instance),t}function cr(t){return this.instance.fragment.find(t)}function lr(t,e){return this.instance.fragment.findAll(t,e)}function dr(t,e){e._test(this,!0),this.instance.fragment&&this.instance.fragment.findAllComponents(t,e)}function fr(t){return t&&t!==this.name?this.instance.fragment?this.instance.fragment.findComponent(t):null:this.instance}function pr(){return this.parentFragment.findNextNode(this)}function mr(){return this.rendered?this.instance.fragment.firstNode():null}function vr(t,e,n){function i(t){var n,i;t.value=e,t.updating||(i=t.ractive,n=t.keypath,t.updating=!0,ma.start(i),i.viewmodel.mark(n),ma.end(),t.updating=!1)}var r,s,o,a,u,h;if(r=t.obj,s=t.prop,n&&!n.configurable){if("length"===s)return;throw new Error('Cannot use magic mode with property "'+s+'" - object is not configurable')}n&&(o=n.get,a=n.set),u=o||function(){return e},h=function(t){a&&a(t),e=o?o():t,h._ractiveWrappers.forEach(i)},h._ractiveWrappers=[t],Object.defineProperty(r,s,{get:u,set:h,enumerable:!0,configurable:!0})}function gr(t,e){var n,i,r,s;if(this.adaptors)for(n=this.adaptors.length,i=0;n>i;i+=1)if(r=this.adaptors[i],r.filter(e,t,this.ractive))return s=this.wrapped[t]=r.wrap(this.ractive,e,t,br(t)),void(s.value=e)}function yr(t,e){var n,i={};if(!e)return t;e+=".";for(n in t)t.hasOwnProperty(n)&&(i[e+n]=t[n]);return i}function br(t){var e;return Up[t]||(e=t?t+".":"",Up[t]=function(n,i){var r;return"string"==typeof n?(r={},r[e+n]=i,r):"object"==typeof n?e?yr(n,t):n:void 0}),Up[t]}function wr(t){var e,n,i=[zo];for(e=t.length;e--;)for(n=t[e].parent;n&&!n.isRoot;)-1===t.indexOf(n)&&R(i,n),n=n.parent;return i}function kr(t,e,n){var i;Er(t,e),n||(i=e.wildcardMatches(),i.forEach(function(n){xr(t,n,e)}))}function xr(t,e,n){var i,r,s;e=e.str||e,i=t.depsMap.patternObservers,r=i&&i[e],r&&r.forEach(function(e){s=n.join(e.lastKey),Er(t,s),xr(t,e,s)})}function Er(t,e){t.patternObservers.forEach(function(t){t.regex.test(e.str)&&t.update(e)})}function _r(){function t(t){var i=t.key;t.viewmodel===o?(o.clearCache(i.str),t.invalidate(),n.push(i),e(i)):t.viewmodel.mark(i)}function e(n){var i,r;o.noCascade.hasOwnProperty(n.str)||((r=o.deps.computed[n.str])&&r.forEach(t),(i=o.depsMap.computed[n.str])&&i.forEach(e))}var n,i,r,s=this,o=this,a={};return n=this.changes,n.length?(n.slice().forEach(e),i=Bp(n),i.forEach(function(e){var i;-1===n.indexOf(e)&&(i=o.deps.computed[e.str])&&i.forEach(t)}),this.changes=[],this.patternObservers.length&&(i.forEach(function(t){return qp(s,t,!0)}),n.forEach(function(t){return qp(s,t)})),this.deps.observers&&(i.forEach(function(t){return Ar(s,null,t,"observers")}),Or(this,n,"observers")),this.deps["default"]&&(r=[],i.forEach(function(t){return Ar(s,r,t,"default")}),r.length&&Cr(this,r,n),Or(this,n,"default")),n.forEach(function(t){a[t.str]=s.get(t)}),this.implicitChanges={},this.noCascade={},a):void 0}function Ar(t,e,n,i){var r,s;(r=Tr(t,n,i))&&(s=t.get(n),r.forEach(function(t){e&&t.refineValue?e.push(t):t.setValue(s)}))}function Cr(t,e,n){e.forEach(function(e){for(var i=!1,r=0,s=n.length,o=[];s>r;){var a=n[r];if(a===e.keypath){i=!0;break}a.slice(0,e.keypath.length)===e.keypath&&o.push(a),r++}i&&e.setValue(t.get(e.keypath)),o.length&&e.refineValue(o)})}function Or(t,e,n){function i(t){t.forEach(r),t.forEach(s)}function r(e){var i=Tr(t,e,n);i&&a.push({keypath:e,deps:i})}function s(e){var r;(r=t.depsMap[n][e.str])&&i(r)}function o(e){var n=t.get(e.keypath);e.deps.forEach(function(t){return t.setValue(n)})}var a=[];i(e),a.forEach(o)}function Tr(t,e,n){var i=t.deps[n];return i?i[e.str]:null}function Sr(){this.captureGroups.push([])}function Fr(t,e){var n,i;if(e||(i=this.wrapped[t])&&i.teardown()!==!1&&(this.wrapped[t]=null),this.cache[t]=void 0,n=this.cacheMap[t])for(;n.length;)this.clearCache(n.pop())}function Rr(t,e){var n=e.firstKey;return!(n in t.data||n in t.computations||n in t.mappings)}function jr(t,e){var n=new $p(t,e);return this.ready&&n.init(this),this.computations[t.str]=n}function Pr(t,e){var n,i,r,s,o,a=this.cache,u=t.str;if(e=e||Xp,e.capture&&(s=V(this.captureGroups))&&(~s.indexOf(t)||s.push(t)),To.call(this.mappings,t.firstKey))return this.mappings[t.firstKey].get(t,e);if(t.isSpecial)return t.value;if(void 0===a[u]?((i=this.computations[u])&&!i.bypass?(n=i.get(),this.adapt(u,n)):(r=this.wrapped[u])?n=r.value:t.isRoot?(this.adapt("",this.data),n=this.data):n=Nr(this,t),a[u]=n):n=a[u],!e.noUnwrap&&(r=this.wrapped[u])&&(n=r.get()),t.isRoot&&e.fullRootGet)for(o in this.mappings)n[o]=this.mappings[o].getValue();return n===Jp?void 0:n}function Nr(t,e){var n,i,r,s;return n=t.get(e.parent),(s=t.wrapped[e.parent.str])&&(n=s.get()),null!==n&&void 0!==n?((i=t.cacheMap[e.parent.str])?-1===i.indexOf(e.str)&&i.push(e.str):t.cacheMap[e.parent.str]=[e.str],"object"!=typeof n||e.lastKey in n?(r=n[e.lastKey],t.adapt(e.str,r,!1),t.cache[e.str]=r,r):t.cache[e.str]=Jp):void 0}function Vr(){var t;for(t in this.computations)this.computations[t].init(this)}function Ir(t,e){var n=this.mappings[t.str]=new nm(t,e);return n.initViewmodel(this),n}function Lr(t,e){var n,i=t.str;e&&(e.implicit&&(this.implicitChanges[i]=!0),e.noCascade&&(this.noCascade[i]=!0)),(n=this.computations[i])&&n.invalidate(),-1===this.changes.indexOf(t)&&this.changes.push(t);var r=e?e.keepExistingWrapper:!1;this.clearCache(i,r),this.ready&&this.onchange()}function Dr(t,e,n,i){var r,s,o,a;if(this.mark(t),i&&i.compare){o=Ur(i.compare);try{r=e.map(o),s=n.map(o)}catch(u){m('merge(): "%s" comparison failed. Falling back to identity checking',t),r=e,s=n}}else r=e,s=n;a=rm(r,s),this.smartUpdate(t,n,a,e.length!==n.length)}function Mr(t){return JSON.stringify(t)}function Ur(t){if(t===!0)return Mr;if("string"==typeof t)return om[t]||(om[t]=function(e){return e[t]}),om[t];if("function"==typeof t)return t;throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}function Br(t,e){var n,i,r,s=void 0===arguments[2]?"default":arguments[2];e.isStatic||((n=this.mappings[t.firstKey])?n.register(t,e,s):(i=this.deps[s]||(this.deps[s]={}),r=i[t.str]||(i[t.str]=[]),r.push(e),this.depsMap[s]||(this.depsMap[s]={}),t.isRoot||qr(this,t,s)))}function qr(t,e,n){for(var i,r,s;!e.isRoot;)i=t.depsMap[n],r=i[e.parent.str]||(i[e.parent.str]=[]),s=e.str,void 0===r["_"+s]&&(r["_"+s]=0,r.push(e)),r["_"+s]+=1,e=e.parent}function Qr(){return this.captureGroups.pop()}function Wr(t){this.data=t,this.clearCache("")}function Kr(t,e){var n,i,r,s,o=void 0===arguments[2]?{}:arguments[2];if(!o.noMapping&&(n=this.mappings[t.firstKey]))return n.set(t,e);if(i=this.computations[t.str]){if(i.setting)return;i.set(e),e=i.get()}a(this.cache[t.str],e)||(r=this.wrapped[t.str],r&&r.reset&&(s=r.reset(e)!==!1,s&&(e=r.get())),i||s||Hr(this,t,e),o.silent?this.clearCache(t.str):this.mark(t))}function Hr(t,e,n){var i,r,s,o;s=function(){i.set?i.set(e.lastKey,n):(r=i.get(),o())},o=function(){r||(r=Np(e.lastKey),t.set(e.parent,r,{silent:!0})),r[e.lastKey]=n},i=t.wrapped[e.parent.str],i?s():(r=t.get(e.parent),(i=t.wrapped[e.parent.str])?s():o())}function zr(t,e,n){var i,r,s,o=this;if(r=n.length,n.forEach(function(e,n){-1===e&&o.mark(t.join(n),fm)}),this.set(t,e,{silent:!0}),(i=this.deps["default"][t.str])&&i.filter(Gr).forEach(function(t){return t.shuffle(n,e)}),r!==e.length){for(this.mark(t.join("length"),dm),s=n.touchedFrom;s<e.length;s+=1)this.mark(t.join(s));for(s=e.length;r>s;s+=1)this.mark(t.join(s),fm)}}function Gr(t){return"function"==typeof t.shuffle}function $r(){var t,e=this;for(Object.keys(this.cache).forEach(function(t){return e.clearCache(t)});t=this.unresolvedImplicitDependencies.pop();)t.teardown()}function Yr(t,e){var n,i,r,s=void 0===arguments[2]?"default":arguments[2];if(!e.isStatic){if(n=this.mappings[t.firstKey])return n.unregister(t,e,s);if(i=this.deps[s][t.str],r=i.indexOf(e),-1===r)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");i.splice(r,1),t.isRoot||Jr(this,t,s)}}function Jr(t,e,n){for(var i,r;!e.isRoot;)i=t.depsMap[n],r=i[e.parent.str],r["_"+e.str]-=1,r["_"+e.str]||(I(r,e),r["_"+e.str]=void 0),e=e.parent}function Zr(t){this.hook=new na(t),this.inProcess={},this.queue={}}function Xr(t,e){return t[e._guid]||(t[e._guid]=[])}function ts(t,e){var n=Xr(t.queue,e);for(t.hook.fire(e);n.length;)ts(t,n.shift());delete t.queue[e._guid]}function es(t,e){var n,i={};for(n in e)i[n]=ns(t,n,e[n]);return i}function ns(t,e,n){var i,r;return"function"==typeof n&&(i=rs(n,t)),"string"==typeof n&&(i=is(t,n)),"object"==typeof n&&("string"==typeof n.get?i=is(t,n.get):"function"==typeof n.get?i=rs(n.get,t):l("`%s` computation must have a `get()` method",e),"function"==typeof n.set&&(r=rs(n.set,t))),{getter:i,setter:r}}function is(t,e){var n,i,r;return n="return ("+e.replace(wm,function(t,e){return i=!0,'__ractive.get("'+e+'")'})+");",i&&(n="var __ractive = this; "+n),r=new Function(n),i?r.bind(t):r}function rs(t,e){return/this/.test(t.toString())?t.bind(e):t}function ss(e){var n,r,s=void 0===arguments[1]?{}:arguments[1],o=void 0===arguments[2]?{}:arguments[2];if(Sv.DEBUG&&Oo(),us(e,o),ko(e,"data",{get:hs}),km.fire(e,s),Am.forEach(function(t){e[t]=i(wo(e.constructor[t]||null),s[t])}),r=new gm({adapt:os(e,e.adapt,s),data:qu.init(e.constructor,e,s),computed:bm(e,i(wo(e.constructor.prototype.computed),s.computed)),mappings:o.mappings,ractive:e,onchange:function(){return ma.addRactive(e)}}),e.viewmodel=r,r.init(),oh.init(e.constructor,e,s),xm.fire(e),Em.begin(e),e.template){var a=void 0;(o.cssIds||e.cssId)&&(a=o.cssIds?o.cssIds.slice():[],e.cssId&&a.push(e.cssId)),e.fragment=new ev({template:e.template,root:e,owner:e,cssIds:a})}if(Em.end(e),n=t(e.el)){var u=e.render(n,e.append);Sv.DEBUG_PROMISES&&u["catch"](function(t){throw v("Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;"),m("An error happened during rendering",{ractive:e}),t.stack&&d(t.stack),t})}}function os(t,e,n){function i(e){return"string"==typeof e&&(e=g("adaptors",t,e),e||l(Vo(e,"adaptor"))),e}var r,s,o;if(e=e.map(i),r=N(n.adapt).map(i),r=as(e,r),s="magic"in n?n.magic:t.magic,o="modifyArrays"in n?n.modifyArrays:t.modifyArrays,s){if(!eo)throw new Error("Getters and setters (magic mode) are not supported in this browser");o&&r.push(Dp),r.push(Lp)}return o&&r.push(jp),r}function as(t,e){for(var n=t.slice(),i=e.length;i--;)~n.indexOf(e[i])||n.push(e[i]);return n}function us(t,e){t._guid="r-"+_m++,t._subs=wo(null),t._config={},t._twowayBindings=wo(null),t._animations=[],t.nodes={},t._liveQueries=[],t._liveComponentQueries=[],t._boundFunctions=[],t._observers=[],e.component?(t.parent=e.parent,t.container=e.container||null,t.root=t.parent.root,t.component=e.component,e.component.instance=t,t._inlinePartials=e.inlinePartials):(t.root=t,t.parent=t.container=null)}function hs(){throw new Error("Using `ractive.data` is no longer supported - you must use the `ractive.get()` API instead")}function cs(t,e,n){this.parentFragment=t.parentFragment,this.callback=n,this.fragment=new ev({template:e,root:t.root,owner:this}),this.update()}function ls(t,e,n){var i;return e.r?i=Tc(t,e.r,n):e.x?i=new jc(t,t.parentFragment,e.x,n):e.rx&&(i=new Ic(t,e.rx,n)),i}function ds(t){return 1===t.length&&t[0].t===kh}function fs(t,e){var n;for(n in e)e.hasOwnProperty(n)&&ps(t.instance,t.root,n,e[n])}function ps(t,e,n,i){"string"!=typeof i&&l("Components currently only support simple events - you cannot include arguments. Sorry!"),t.on(n,function(){var t,n;return arguments.length&&arguments[0]&&arguments[0].node&&(t=Array.prototype.shift.call(arguments)),n=Array.prototype.slice.call(arguments),Ba(e,i,{event:t,args:n}),!1})}function ms(t,e){var n,i;if(!e)throw new Error('Component "'+this.name+'" not found');n=this.parentFragment=t.parentFragment,i=n.root,this.root=i,this.type=Th,this.name=t.template.e,this.index=t.index,this.indexRefBindings={},this.yielders={},this.resolvers=[],Tm(this,e,t.template.a,t.template.f,t.template.p),Sm(this,t.template.v),(t.template.t0||t.template.t1||t.template.t2||t.template.o)&&m('The "intro", "outro" and "decorator" directives have no effect on components',{ractive:this.instance}),Fm(this)}function vs(t,e){function n(n){n.rebind(t,e)}var i;this.resolvers.forEach(n);for(var r in this.yielders)this.yielders[r][0]&&n(this.yielders[r][0]);(i=this.root._liveComponentQueries["_"+this.name])&&i._makeDirty()}function gs(){var t=this.instance;return t.render(this.parentFragment.getNode()),this.rendered=!0,t.fragment.detach()}function ys(){return this.instance.fragment.toString()}function bs(){var t=this.instance;this.resolvers.forEach(z),ws(this),t._observers.forEach($),t.fragment.unbind(),t.viewmodel.teardown(),t.fragment.rendered&&t.el.__ractive_instances__&&I(t.el.__ractive_instances__,t),Im.fire(t)}function ws(t){var e,n;e=t.root;do(n=e._liveComponentQueries["_"+t.name])&&n._remove(t);while(e=e.parent)}function ks(t){this.shouldDestroy=t,this.instance.unrender()}function xs(t){var e=this;this.owner=t.owner,this.parent=this.owner.parentFragment,this.root=t.root,this.pElement=t.pElement,this.context=t.context,this.index=t.index,this.key=t.key,this.registeredIndexRefs=[],this.cssIds="cssIds"in t?t.cssIds:this.parent?this.parent.cssIds:null,this.items=t.template.map(function(n,i){return Es({parentFragment:e,pElement:t.pElement,template:n,index:i})}),this.value=this.argsList=null,this.dirtyArgs=this.dirtyValue=!0,this.bound=!0}function Es(t){if("string"==typeof t.template)return new vc(t);switch(t.template.t){case Sh:return new Qm(t);case kh:return new qc(t);case Eh:return new ul(t);case xh:return new Cl(t);case _h:var e=void 0;return(e=pp(t.parentFragment.root,t.template.e))?new Mm(t,e):new np(t);case Ah:return new fp(t);case Ch:return new Bm(t);case Fh:return new Km(t);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!")}}function _s(t,e){(!this.owner||this.owner.hasContext)&&x(this,"context",t,e),this.items.forEach(function(n){n.rebind&&n.rebind(t,e)})}function As(){var t;return 1===this.items.length?t=this.items[0].render():(t=document.createDocumentFragment(),
this.items.forEach(function(e){t.appendChild(e.render())})),this.rendered=!0,t}function Cs(t){return this.items?this.items.map(t?Ts:Os).join(""):""}function Os(t){return t.toString()}function Ts(t){return t.toString(!0)}function Ss(){this.bound&&(this.items.forEach(Fs),this.bound=!1)}function Fs(t){t.unbind&&t.unbind()}function Rs(t){if(!this.rendered)throw new Error("Attempted to unrender a fragment that was not rendered");this.items.forEach(function(e){return e.unrender(t)}),this.rendered=!1}function js(t){var e,n,i,r,s;if(t=t||{},"object"!=typeof t)throw new Error("The reset method takes either no arguments, or an object containing new data");for((n=this.viewmodel.wrapped[""])&&n.reset?n.reset(t)===!1&&this.viewmodel.reset(t):this.viewmodel.reset(t),i=oh.reset(this),r=i.length;r--;)if(iv.indexOf(i[r])>-1){s=!0;break}if(s){var o=void 0;this.viewmodel.mark(zo),(o=this.component)&&(o.shouldDestroy=!0),this.unrender(),o&&(o.shouldDestroy=!1),this.fragment.template!==this.template&&(this.fragment.unbind(),this.fragment=new ev({template:this.template,root:this,owner:this})),e=this.render(this.el,this.anchor)}else e=ma.start(this,!0),this.viewmodel.mark(zo),ma.end();return rv.fire(this,t),e}function Ps(t){var e,n;Gu.init(null,this,{template:t}),e=this.transitionsEnabled,this.transitionsEnabled=!1,(n=this.component)&&(n.shouldDestroy=!0),this.unrender(),n&&(n.shouldDestroy=!1),this.fragment.unbind(),this.fragment=new ev({template:this.template,root:this,owner:this}),this.render(this.el,this.anchor),this.transitionsEnabled=e}function Ns(t,e){var n,i;if(i=ma.start(this,!0),h(t)){n=t;for(t in n)n.hasOwnProperty(t)&&(e=n[t],Vs(this,t,e))}else Vs(this,t,e);return ma.end(),i}function Vs(t,e,n){e=_(O(e)),e.isPattern?A(t,e).forEach(function(e){t.viewmodel.set(e,n)}):t.viewmodel.set(e,n)}function Is(t,e){return Go(this,t,void 0===e?-1:-e)}function Ls(){var t;return this.fragment.unbind(),this.viewmodel.teardown(),this._observers.forEach($),this.fragment.rendered&&this.el.__ractive_instances__&&I(this.el.__ractive_instances__,this),this.shouldDestroy=!0,t=this.fragment.rendered?this.unrender():oa.resolve(),pv.fire(this),this._boundFunctions.forEach(Ds),t}function Ds(t){delete t.fn[t.prop]}function Ms(t){var e=this;if("string"!=typeof t)throw new TypeError(Po);var n=void 0;return/\*/.test(t)?(n={},A(this,_(O(t))).forEach(function(t){n[t.str]=!e.viewmodel.get(t)}),this.set(n)):this.set(t,!this.get(t))}function Us(){return this.fragment.toString(!0)}function Bs(){var t,e;if(!this.fragment.rendered)return m("ractive.unrender() was called on a Ractive instance that was not rendered"),oa.resolve();for(t=ma.start(this,!0),e=!this.component||this.component.shouldDestroy||this.shouldDestroy;this._animations[0];)this._animations[0].stop();return this.fragment.unrender(e),I(this.el.__ractive_instances__,this),yv.fire(this),ma.end(),t}function qs(t){var e;return t=_(t)||zo,e=ma.start(this,!0),this.viewmodel.mark(t),ma.end(),kv.fire(this,t),e}function Qs(t,e){var n,i,r;if("string"!=typeof t||e){r=[];for(i in this._twowayBindings)(!t||_(i).equalsOrStartsWith(t))&&r.push.apply(r,this._twowayBindings[i])}else r=this._twowayBindings[t];return n=Ws(this,r),this.set(n)}function Ws(t,e){var n={},i=[];return e.forEach(function(t){var e,r;if(!t.radioName||t.element.node.checked){if(t.checkboxName)return void(i[t.keypath.str]||t.changed()||(i.push(t.keypath),i[t.keypath.str]=t));e=t.attribute.value,r=t.getValue(),P(e,r)||a(e,r)||(n[t.keypath.str]=r)}}),i.length&&i.forEach(function(t){var e,r,s;e=i[t.str],r=e.attribute.value,s=e.getValue(),P(r,s)||(n[t.str]=s)}),n}function Ks(t,e){return"function"==typeof e&&/_super/.test(t)}function Hs(t){for(var e={};t;)zs(t,e),$s(t,e),t=t._Parent!==Sv?t._Parent:!1;return e}function zs(t,e){eh.forEach(function(n){Gs(n.useDefaults?t.prototype:t,e,n.name)})}function Gs(t,e,n){var i,r=Object.keys(t[n]);r.length&&((i=e[n])||(i=e[n]={}),r.filter(function(t){return!(t in i)}).forEach(function(e){return i[e]=t[n][e]}))}function $s(t,e){Object.keys(t.prototype).forEach(function(n){if("computed"!==n){var i=t.prototype[n];if(n in e){if("function"==typeof e[n]&&"function"==typeof i&&e[n]._method){var r=void 0,s=i._method;s&&(i=i._method),r=_v(e[n]._method,i),s&&(r._method=r),e[n]=r}}else e[n]=i._method?i._method:i}})}function Ys(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return e.length?e.reduce(Js,this):Js(this)}function Js(t){var e,n,r=void 0===arguments[1]?{}:arguments[1];return r.prototype instanceof Sv&&(r=Av(r)),e=function(t){return this instanceof e?void Cm(this,t):new e(t)},n=wo(t.prototype),n.constructor=e,xo(e,{defaults:{value:n},extend:{value:Ys,writable:!0,configurable:!0},_Parent:{value:t}}),oh.extend(t,n,r),qu.extend(t,n,r),r.computed&&(n.computed=i(wo(t.prototype.computed),r.computed)),e.prototype=n,e}var Zs,Xs,to,eo,no,io,ro,so=3,oo={el:void 0,append:!1,template:{v:so,t:[]},preserveWhitespace:!1,sanitize:!1,stripComments:!0,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],interpolate:!1,data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,css:null,noCssTransform:!1},ao=oo,uo={linear:function(t){return t},easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return Math.pow(t-1,3)+1},easeInOut:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)}};Zs="object"==typeof document,Xs="undefined"!=typeof navigator&&/jsDom/.test(navigator.appName),to="undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply;try{Object.defineProperty({},"test",{value:0}),eo=!0}catch(ho){eo=!1}no={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},io="undefined"==typeof document?!1:document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),ro=["o","ms","moz","webkit"];var co,lo,fo,po,mo,vo,go,yo,bo;if(co=io?function(t,e){return e&&e!==no.html?document.createElementNS(e,t):document.createElement(t)}:function(t,e){if(e&&e!==no.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return document.createElement(t)},Zs){for(fo=co("div"),po=["matches","matchesSelector"],bo=function(t){return function(e,n){return e[t](n)}},go=po.length;go--&&!lo;)if(mo=po[go],fo[mo])lo=bo(mo);else for(yo=ro.length;yo--;)if(vo=ro[go]+mo.substr(0,1).toUpperCase()+mo.substring(1),fo[vo]){lo=bo(vo);break}lo||(lo=function(t,e){var n,i,r;for(i=t.parentNode,i||(fo.innerHTML="",i=fo,t=t.cloneNode(),fo.appendChild(t)),n=i.querySelectorAll(e),r=n.length;r--;)if(n[r]===t)return!0;return!1})}else lo=null;var wo,ko,xo,Eo=null;try{Object.defineProperty({},"test",{value:0}),Zs&&Object.defineProperty(document.createElement("div"),"test",{value:0}),ko=Object.defineProperty}catch(_o){ko=function(t,e,n){t[e]=n.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(_o){throw _o}Zs&&Object.defineProperties(co("div"),{test:{value:0}}),xo=Object.defineProperties}catch(_o){xo=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&ko(t,n,e[n])}}try{Object.create(null),wo=Object.create}catch(_o){wo=function(){var t=function(){};return function(e,n){var i;return null===e?{}:(t.prototype=e,i=new t,n&&Object.defineProperties(i,n),i)}}()}var Ao,Co,Oo,To=Object.prototype.hasOwnProperty,So=Object.prototype.toString,Fo=/^\[object (?:Array|FileList)\]$/,Ro=function(){},jo={};to?!function(){var t=["%cRactive.js %c0.7.3 %cin debug mode, %cmore...","color: rgb(114, 157, 52); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"],e="You're running Ractive 0.7.3 in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://docs.ractivejs.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n";Oo=function(){var n=!!console.groupCollapsed;console[n?"groupCollapsed":"log"].apply(console,t),console.log(e),n&&console.groupEnd(t),Oo=Ro},Co=function(t,e){if(Oo(),"object"==typeof e[e.length-1]){var n=e.pop(),i=n?n.ractive:null;if(i){var r=void 0;i.component&&(r=i.component.name)&&(t="<"+r+"> "+t);var s=void 0;(s=n.node||i.fragment&&i.fragment.rendered&&i.find("*"))&&e.push(s)}}console.warn.apply(console,["%cRactive.js: %c"+t,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(e))},Ao=function(){console.log.apply(console,arguments)}}():Co=Ao=Oo=Ro;var Po="Bad arguments",No='A function was specified for "%s" %s, but no %s was returned',Vo=function(t,e){return'Missing "'+t+'" '+e+" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#"+e+"s"},Io=function(t,e,n,i){if(t===e)return b(e);if(i){var r=g("interpolators",n,i);if(r)return r(t,e)||b(e);l(Vo(i,"interpolator"))}return Mo.number(t,e)||Mo.array(t,e)||Mo.object(t,e)||b(e)},Lo=Io,Do={number:function(t,e){var n;return u(t)&&u(e)?(t=+t,e=+e,n=e-t,n?function(e){return t+e*n}:function(){return t}):null},array:function(t,e){var n,i,r,o;if(!s(t)||!s(e))return null;for(n=[],i=[],o=r=Math.min(t.length,e.length);o--;)i[o]=Lo(t[o],e[o]);for(o=r;o<t.length;o+=1)n[o]=t[o];for(o=r;o<e.length;o+=1)n[o]=e[o];return function(t){for(var e=r;e--;)n[e]=i[e](t);return n}},object:function(t,e){var n,i,r,s,o;if(!h(t)||!h(e))return null;n=[],s={},r={};for(o in t)To.call(t,o)&&(To.call(e,o)?(n.push(o),r[o]=Lo(t[o],e[o])):s[o]=t[o]);for(o in e)To.call(e,o)&&!To.call(t,o)&&(s[o]=e[o]);return i=n.length,function(t){for(var e,o=i;o--;)e=n[o],s[e]=r[e](t);return s}}},Mo=Do,Uo=w,Bo={},qo=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,Qo=/\*/,Wo={},Ko=function(t){var e=t.split(".");this.str=t,"@"===t[0]&&(this.isSpecial=!0,this.value=E(t)),this.firstKey=e[0],this.lastKey=e.pop(),this.isPattern=Qo.test(t),this.parent=""===t?null:_(e.join(".")),this.isRoot=!t};Ko.prototype={equalsOrStartsWith:function(t){return t===this||this.startsWith(t)},join:function(t){return _(this.isRoot?String(t):this.str+"."+t)},replace:function(t,e){return this===t?e:this.startsWith(t)?null===e?e:_(this.str.replace(t.str+".",e.str+".")):void 0},startsWith:function(t){return t?t&&this.str.substr(0,t.str.length+1)===t.str+".":!1},toString:function(){throw new Error("Bad coercion")},valueOf:function(){throw new Error("Bad coercion")},wildcardMatches:function(){return this._wildcardMatches||(this._wildcardMatches=Uo(this.str))}};var Ho,zo=_(""),Go=T,$o="Cannot add to a non-numeric value",Yo=S;"undefined"==typeof window?Ho=null:(!function(t,e,n){var i,r;if(!n.requestAnimationFrame){for(i=0;i<t.length&&!n.requestAnimationFrame;++i)n.requestAnimationFrame=n[t[i]+"RequestAnimationFrame"];n.requestAnimationFrame||(r=n.setTimeout,n.requestAnimationFrame=function(t){var n,i,s;return n=Date.now(),i=Math.max(0,16-(n-e)),s=r(function(){t(n+i)},i),e=n+i,s})}}(ro,0,window),Ho=window.requestAnimationFrame);var Jo,Zo=Ho;Jo="undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?function(){return window.performance.now()}:function(){return Date.now()};var Xo=Jo,ta={construct:{deprecated:"beforeInit",replacement:"onconstruct"},render:{deprecated:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},complete:{deprecated:"complete",replacement:"oncomplete"}};F.prototype.fire=function(t,e){function n(n){return t[n]?(e?t[n](e):t[n](),!0):void 0}n(this.method),!t[this.method]&&this.deprecate&&n(this.deprecate.deprecated)&&(this.deprecate.message?m(this.deprecate.message):m('The method "%s" has been deprecated in favor of "%s" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',this.deprecate.deprecated,this.deprecate.replacement)),e?t.fire(this.event,e):t.fire(this.event)};var ea,na=F,ia={},ra={},sa={};"function"==typeof Promise?ea=Promise:(ea=function(t){var e,n,i,r,s,o,a=[],u=[],h=ia;i=function(t){return function(i){h===ia&&(e=i,h=t,n=M(h===ra?a:u,e),D(n))}},r=i(ra),s=i(sa);try{t(r,s)}catch(c){s(c)}return o={then:function(t,e){var i=new ea(function(r,s){var o=function(t,e,n){e.push("function"==typeof t?function(e){var n;try{n=t(e),U(i,n,r,s)}catch(o){s(o)}}:n)};o(t,a,r),o(e,u,s),h!==ia&&D(n)});return i}},o["catch"]=function(t){return this.then(null,t)},o},ea.all=function(t){return new ea(function(e,n){var i,r,s,o=[];if(!t.length)return void e(o);for(s=function(t,r){t&&"function"==typeof t.then?t.then(function(t){o[r]=t,--i||e(o)},n):(o[r]=t,--i||e(o))},i=r=t.length;r--;)s(t[r],r)})},ea.resolve=function(t){return new ea(function(e){e(t)})},ea.reject=function(t){return new ea(function(e,n){n(t)})});var oa=ea,aa=function(t){do if(void 0!==t.context)return t.context;while(t=t.parent);return zo},ua=B,ha=function(t,e){this.callback=t,this.parent=e,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.decoratorQueue=[],this.outrosComplete=!1,e&&e.addChild(this)};ha.prototype={addChild:function(t){this.children.push(t),this.totalChildren+=1,this.outroChildren+=1},decrementOutros:function(){this.outroChildren-=1,Z(this)},decrementTotal:function(){this.totalChildren-=1,Z(this)},add:function(t){var e=t.isIntro?this.intros:this.outros;e.push(t)},addDecorator:function(t){this.decoratorQueue.push(t)},remove:function(t){var e=t.isIntro?this.intros:this.outros;I(e,t),Z(this)},init:function(){this.ready=!0,Z(this)},detachNodes:function(){this.decoratorQueue.forEach(H),this.detachQueue.forEach(Y),this.children.forEach(J)}};var ca,la,da=ha,fa=[],pa=new na("change");la={start:function(t,e){var n,i;return e&&(n=new oa(function(t){return i=t})),ca={previousBatch:ca,transitionManager:new da(i,ca&&ca.transitionManager),views:[],tasks:[],ractives:[],instance:t},t&&ca.ractives.push(t),n},end:function(){X(),ca.transitionManager.init(),!ca.previousBatch&&ca.instance&&(ca.instance.viewmodel.changes=[]),ca=ca.previousBatch},addRactive:function(t){ca&&R(ca.ractives,t)},registerTransition:function(t){t._manager=ca.transitionManager,ca.transitionManager.add(t)},registerDecorator:function(t){ca.transitionManager.addDecorator(t)},addView:function(t){ca.views.push(t)},addUnresolved:function(t){fa.push(t)},removeUnresolved:function(t){I(fa,t)},detachWhenReady:function(t){ca.transitionManager.detachQueue.push(t)},scheduleTask:function(t,e){var n;if(ca){for(n=ca;e&&n.previousBatch;)n=n.previousBatch;n.tasks.push(t)}else t()}};var ma=la,va=[],ga={tick:function(){var t,e,n;for(n=Xo(),ma.start(),t=0;t<va.length;t+=1)e=va[t],e.tick(n)||va.splice(t--,1);ma.end(),va.length?Zo(ga.tick):ga.running=!1},add:function(t){va.push(t),ga.running||(ga.running=!0,Zo(ga.tick))},abort:function(t,e){for(var n,i=va.length;i--;)n=va[i],n.root===e&&n.keypath===t&&n.stop()}},ya=ga,ba=function(t){var e;this.startTime=Date.now();for(e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);this.interpolator=Lo(this.from,this.to,this.root,this.interpolator),this.running=!0,this.tick()};ba.prototype={tick:function(){var t,e,n,i,r,s;return s=this.keypath,this.running?(i=Date.now(),t=i-this.startTime,t>=this.duration?(null!==s&&(ma.start(this.root),this.root.viewmodel.set(s,this.to),ma.end()),this.step&&this.step(1,this.to),this.complete(this.to),r=this.root._animations.indexOf(this),-1===r&&m("Animation was not found"),this.root._animations.splice(r,1),this.running=!1,!1):(e=this.easing?this.easing(t/this.duration):t/this.duration,null!==s&&(n=this.interpolator(e),ma.start(this.root),this.root.viewmodel.set(s,n),ma.end()),this.step&&this.step(e,n),!0)):!1},stop:function(){var t;this.running=!1,t=this.root._animations.indexOf(this),-1===t&&m("Animation was not found"),this.root._animations.splice(t,1)}};var wa=ba,ka=nt,xa={stop:Ro},Ea=rt,_a=new na("detach"),Aa=st,Ca=ot,Oa=function(){var t,e,n;t=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],e=this.selector,n=t.indexOf(e),-1!==n&&(t.splice(n,1),t[e]=null)},Ta=function(t,e){var n,i,r,s,o,a,u,h,c,l;for(n=ut(t.component||t._ractive.proxy),i=ut(e.component||e._ractive.proxy),r=V(n),s=V(i);r&&r===s;)n.pop(),i.pop(),o=r,r=V(n),s=V(i);if(r=r.component||r,s=s.component||s,c=r.parentFragment,l=s.parentFragment,c===l)return a=c.items.indexOf(r),u=l.items.indexOf(s),a-u||n.length-i.length;if(h=o.fragments)return a=h.indexOf(c),u=h.indexOf(l),a-u||n.length-i.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")},Sa=function(t,e){var n;return t.compareDocumentPosition?(n=t.compareDocumentPosition(e),2&n?1:-1):Ta(t,e)},Fa=function(){this.sort(this._isComponentQuery?Ta:Sa),this._dirty=!1},Ra=function(){var t=this;this._dirty||(this._dirty=!0,ma.scheduleTask(function(){t._sort()}))},ja=function(t){var e=this.indexOf(this._isComponentQuery?t.instance:t);-1!==e&&this.splice(e,1)},Pa=ht,Na=ct,Va=lt,Ia=dt,La=ft,Da=pt,Ma={enqueue:function(t,e){t.event&&(t._eventQueue=t._eventQueue||[],t._eventQueue.push(t.event)),t.event=e},dequeue:function(t){t._eventQueue&&t._eventQueue.length?t.event=t._eventQueue.pop():delete t.event}},Ua=Ma,Ba=mt,qa=yt,Qa=bt,Wa={capture:!0,noUnwrap:!0,fullRootGet:!0},Ka=wt,Ha=new na("insert"),za=xt,Ga=function(t,e,n,i){this.root=t,this.keypath=e,this.callback=n,this.defer=i.defer,this.context=i&&i.context?i.context:t};Ga.prototype={init:function(t){this.value=this.root.get(this.keypath.str),t!==!1?this.update():this.oldValue=this.value},setValue:function(t){var e=this;a(t,this.value)||(this.value=t,this.defer&&this.ready?ma.scheduleTask(function(){return e.update()}):this.update())},update:function(){this.updating||(this.updating=!0,this.callback.call(this.context,this.value,this.oldValue,this.keypath.str),this.oldValue=this.value,this.updating=!1)}};var $a,Ya=Ga,Ja=Et,Za=Array.prototype.slice;$a=function(t,e,n,i){this.root=t,this.callback=n,this.defer=i.defer,this.keypath=e,this.regex=new RegExp("^"+e.str.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$"),this.values={},this.defer&&(this.proxies=[]),this.context=i&&i.context?i.context:t},$a.prototype={init:function(t){var e,n;if(e=Ja(this.root,this.keypath),t!==!1)for(n in e)e.hasOwnProperty(n)&&this.update(_(n));else this.values=e},update:function(t){var e,n=this;if(t.isPattern){e=Ja(this.root,t);for(t in e)e.hasOwnProperty(t)&&this.update(_(t))}else if(!this.root.viewmodel.implicitChanges[t.str])return this.defer&&this.ready?void ma.scheduleTask(function(){return n.getProxy(t).update()}):void this.reallyUpdate(t)},reallyUpdate:function(t){var e,n,i,r;return e=t.str,n=this.root.viewmodel.get(t),this.updating?void(this.values[e]=n):(this.updating=!0,a(n,this.values[e])&&this.ready||(i=Za.call(this.regex.exec(e),1),r=[n,this.values[e],e].concat(i),this.values[e]=n,this.callback.apply(this.context,r)),void(this.updating=!1))},getProxy:function(t){var e=this;return this.proxies[t.str]||(this.proxies[t.str]={update:function(){return e.reallyUpdate(t)}}),this.proxies[t.str]}};var Xa,tu,eu,nu,iu,ru,su=$a,ou=_t,au={},uu=At,hu=Ct,cu=function(t){return t.trim()},lu=function(t){return""!==t},du=Ot,fu=Tt,pu=St,mu=Ft,vu=Array.prototype,gu=function(t){return function(e){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;n>r;r++)i[r-1]=arguments[r];var o,a,u,h,c=[];if(e=_(O(e)),o=this.viewmodel.get(e),a=o.length,!s(o))throw new Error("Called ractive."+t+"('"+e.str+"'), but '"+e.str+"' does not refer to an array");return c=mu(o,t,i),h=vu[t].apply(o,i),u=ma.start(this,!0).then(function(){return h}),c?this.viewmodel.smartUpdate(e,o,c):this.viewmodel.mark(e),ma.end(),u}},yu=gu("pop"),bu=gu("push"),wu="/* Ractive.js component styles */\n",ku=[],xu=!1;Zs?(eu=document.createElement("style"),eu.type="text/css",nu=document.getElementsByTagName("head")[0],ru=!1,iu=eu.styleSheet,tu=function(){var t=wu+ku.map(function(t){return"\n/* {"+t.id+"} */\n"+t.styles}).join("\n");iu?iu.cssText=t:eu.innerHTML=t,ru||(nu.appendChild(eu),ru=!0)},Xa={add:function(t){ku.push(t),xu=!0},apply:function(){xu&&(tu(),xu=!1)}}):Xa={add:Ro,apply:Ro};var Eu,_u,Au,Cu=Xa,Ou=jt,Tu=new na("render"),Su=new na("complete"),Fu={extend:function(t,e,n){e.adapt=Nt(e.adapt,N(n.adapt))},init:function(){}},Ru=Fu,ju=Vt,Pu=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,Nu=/\/\*.*?\*\//g,Vu=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~\(]+(?:\([^\)]+\))?)?\s*[\s\+\>\~]?)\s*/g,Iu=/^@media/,Lu=/\[data-ractive-css~="\{[a-z0-9-]+\}"]/g,Du=1,Mu={name:"css",extend:function(t,e,n){if(n.css){var i=Du++,r=n.noCssTransform?n.css:ju(n.css,i);e.cssId=i,Cu.add({id:i,styles:r})}},init:function(){}},Uu=Mu,Bu={name:"data",extend:function(t,e,n){var i=void 0,r=void 0;if(n.data&&h(n.data))for(i in n.data)r=n.data[i],r&&"object"==typeof r&&(h(r)||s(r))&&m("Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }");e.data=Mt(e.data,n.data)},init:function(t,e,n){var i=Mt(t.prototype.data,n.data);return"function"==typeof i&&(i=i.call(e)),i||{}},reset:function(t){var e=this.init(t.constructor,t,t.viewmodel);return t.viewmodel.reset(e),!0}},qu=Bu,Qu=null,Wu=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters","interpolate"],Ku={fromId:Wt,isHashedId:Kt,isParsed:Ht,getParseOptions:zt,createHelper:qt,parse:Qt},Hu=Ku,zu={name:"template",extend:function(t,e,n){var i;"template"in n&&(i=n.template,e.template="function"==typeof i?i:Jt(i,e))},init:function(t,e,n){var i,r;i="template"in n?n.template:t.prototype.template,"function"==typeof i&&(r=i,i=$t(e,r),e._config.template={fn:r,result:i}),i=Jt(i,e),e.template=i.t,i.p&&Zt(e.partials,i.p)},reset:function(t){var e,n=Gt(t);return n?(e=Jt(n,t),t.template=e.t,Zt(t.partials,e.p,!0),!0):void 0}},Gu=zu;Eu=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"],_u=function(t,e){this.name=t,this.useDefaults=e},_u.prototype={constructor:_u,extend:function(t,e,n){this.configure(this.useDefaults?t.defaults:t,this.useDefaults?e:e.constructor,n)},init:function(){},configure:function(t,e,n){var i,r=this.name,s=n[r];i=wo(t[r]);for(var o in s)i[o]=s[o];e[r]=i},reset:function(t){var e=t[this.name],n=!1;return Object.keys(e).forEach(function(t){var i=e[t];i._fn&&(i._fn.isOwner?e[t]=i._fn:delete e[t],n=!0)}),n}},Au=Eu.map(function(t){return new _u(t,"computed"===t)});var $u,Yu,Ju,Zu,Xu,th,eh=Au,nh=Xt,ih=ie;Zu={adapt:Ru,css:Uu,data:qu,template:Gu},Ju=Object.keys(ao),th=oe(Ju.filter(function(t){return!Zu[t]})),Xu=oe(Ju.concat(eh.map(function(t){return t.name}))),Yu=[].concat(Ju.filter(function(t){return!eh[t]&&!Zu[t]}),eh,Zu.data,Zu.template,Zu.css),$u={extend:function(t,e,n){return re("extend",t,e,n)},init:function(t,e,n){return re("init",t,e,n)},reset:function(t){return Yu.filter(function(e){return e.reset&&e.reset(t)}).map(function(t){return t.name})},order:Yu};var rh,sh,oh=$u,ah=ae,uh=ue,hh=he,ch=ce,lh=le,dh=de,fh=fe,ph=pe,mh=/^\s+/;sh=function(t){this.name="ParseError",this.message=t;try{throw new Error(t)}catch(e){this.stack=e.stack}},sh.prototype=Error.prototype,rh=function(t,e){var n,i,r=0;for(this.str=t,this.options=e||{},this.pos=0,this.lines=this.str.split("\n"),this.lineEnds=this.lines.map(function(t){var e=r+t.length+1;return r=e,e},0),this.init&&this.init(t,e),n=[];this.pos<this.str.length&&(i=this.read());)n.push(i);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(n,e):n},rh.prototype={read:function(t){var e,n,i,r;for(t||(t=this.converters),e=this.pos,i=t.length,n=0;i>n;n+=1)if(this.pos=e,r=t[n](this))return r;return null},getLinePos:function(t){for(var e,n=0,i=0;t>=this.lineEnds[n];)i=this.lineEnds[n],n+=1;return e=t-i,[n+1,e+1,t]},error:function(t){var e=this.getLinePos(this.pos),n=e[0],i=e[1],r=this.lines[e[0]-1],s=0,o=r.replace(/\t/g,function(t,n){return n<e[1]&&(s+=1),"  "})+"\n"+new Array(e[1]+s).join(" ")+"^----",a=new sh(""+t+" at line "+n+" character "+i+":\n"+o);throw a.line=e[0],a.character=e[1],a.shortMessage=t,a},matchString:function(t){return this.str.substr(this.pos,t.length)===t?(this.pos+=t.length,t):void 0},matchPattern:function(t){var e;return(e=t.exec(this.remaining()))?(this.pos+=e[0].length,e[1]||e[0]):void 0},allowWhitespace:function(){this.matchPattern(mh)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},rh.extend=function(t){var e,n,i=this;e=function(t,e){rh.call(this,t,e)},e.prototype=wo(i.prototype);for(n in t)To.call(t,n)&&(e.prototype[n]=t[n]);return e.extend=rh.extend,e};var vh,gh,yh,bh=rh,wh=1,kh=2,xh=3,Eh=4,_h=7,Ah=8,Ch=9,Oh=13,Th=15,Sh=16,Fh=18,Rh=20,jh=21,Ph=30,Nh=50,Vh=51,Ih=52,Lh=53,Dh=54;vh=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,gh=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,yh=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;var Mh,Uh,Bh,qh,Qh,Wh,Kh,Hh=function(t){return function(e){var n,i,r,s;for(n=e.pos,i='"',r=!1;!r;)s=e.matchPattern(vh)||e.matchPattern(gh)||e.matchString(t),s?i+='"'===s?'\\"':"\\'"===s?"'":s:(s=e.matchPattern(yh),s?i+="\\u"+("000"+s.charCodeAt(1).toString(16)).slice(-4):r=!0);return i+='"',JSON.parse(i)}},zh=Hh('"'),Gh=Hh("'"),$h=function(t){var e,n;return e=t.pos,t.matchString('"')?(n=Gh(t),t.matchString('"')?{t:jh,v:n}:(t.pos=e,null)):t.matchString("'")?(n=zh(t),t.matchString("'")?{t:jh,v:n}:(t.pos=e,null)):null},Yh=me,Jh=/^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,Zh=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,Xh=ve,tc=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;Uh={"true":!0,"false":!1,undefined:void 0,"null":null},Bh=new RegExp("^(?:"+Object.keys(Uh).join("|")+")"),qh=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,Qh=/\$\{([^\}]+)\}/g,Wh=/^\$\{([^\}]+)\}/,Kh=/^\s*$/,Mh=bh.extend({init:function(t,e){this.values=e.values,this.allowWhitespace()},postProcess:function(t){return 1===t.length&&Kh.test(this.leftover)?{value:t[0].v}:null},converters:[function(t){var e;return t.values?(e=t.matchPattern(Wh),e&&t.values.hasOwnProperty(e)?{v:t.values[e]}:void 0):null},function(t){var e;return(e=t.matchPattern(Bh))?{v:Uh[e]}:void 0},function(t){var e;return(e=t.matchPattern(qh))?{v:+e}:void 0},function(t){var e,n=$h(t);return n&&(e=t.values)?{v:n.v.replace(Qh,function(t,n){return n in e?e[n]:n})}:n},function(t){var e,n;if(!t.matchString("{"))return null;if(e={},t.allowWhitespace(),t.matchString("}"))return{v:e};for(;n=ge(t);){if(e[n.key]=n.value,t.allowWhitespace(),t.matchString("}"))return{v:e};if(!t.matchString(","))return null}return null},function(t){var e,n;if(!t.matchString("["))return null;if(e=[],t.allowWhitespace(),t.matchString("]"))return{v:e};for(;n=t.read();){if(e.push(n.v),t.allowWhitespace(),t.matchString("]"))return{v:e};if(!t.matchString(","))return null;t.allowWhitespace()}return null}]});var ec,nc,ic,rc,sc,oc,ac,uc,hc=function(t,e){var n=new Mh(t,{values:e});return n.result},cc=ye,lc=be,dc=we,fc=ke;ec=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i,nc=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,ic={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},rc=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],sc=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(ic).join("|")+"));?","g"),oc=/</g,ac=/>/g,uc=/&/g;var pc=function(){return e(this.node)},mc=function(t){this.type=wh,this.text=t.template};mc.prototype={detach:pc,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createTextNode(this.text)),this.node},toString:function(t){return t?_e(this.text):this.text},unrender:function(t){return t?this.detach():void 0}};var vc=mc,gc=Ae,yc=Ce,bc=function(t,e,n){var i;this.ref=e,this.resolved=!1,this.root=t.root,this.parentFragment=t.parentFragment,this.callback=n,i=ua(t.root,e,t.parentFragment),void 0!=i?this.resolve(i):ma.addUnresolved(this);

};bc.prototype={resolve:function(t){this.keypath&&!t&&ma.addUnresolved(this),this.resolved=!0,this.keypath=t,this.callback(t)},forceResolution:function(){this.resolve(_(this.ref))},rebind:function(t,e){var n;void 0!=this.keypath&&(n=this.keypath.replace(t,e),void 0!==n&&this.resolve(n))},unbind:function(){this.resolved||ma.removeUnresolved(this)}};var wc=bc,kc=function(t,e,n){this.parentFragment=t.parentFragment,this.ref=e,this.callback=n,this.rebind()},xc={"@keypath":{prefix:"c",prop:["context"]},"@index":{prefix:"i",prop:["index"]},"@key":{prefix:"k",prop:["key","index"]}};kc.prototype={rebind:function(){var t,e=this.ref,n=this.parentFragment,i=xc[e];if(!i)throw new Error('Unknown special reference "'+e+'" - valid references are @index, @key and @keypath');if(this.cached)return this.callback(_("@"+i.prefix+Oe(this.cached,i)));if(-1!==i.prop.indexOf("index")||-1!==i.prop.indexOf("key"))for(;n;){if(n.owner.currentSubtype===Ih&&void 0!==(t=Oe(n,i)))return this.cached=n,n.registerIndexRef(this),this.callback(_("@"+i.prefix+t));n=!n.parent&&n.owner&&n.owner.component&&n.owner.component.parentFragment&&!n.owner.component.instance.isolated?n.owner.component.parentFragment:n.parent}else for(;n;){if(void 0!==(t=Oe(n,i)))return this.callback(_("@"+i.prefix+t.str));n=n.parent}},unbind:function(){this.cached&&this.cached.unregisterIndexRef(this)}};var Ec=kc,_c=function(t,e,n){this.parentFragment=t.parentFragment,this.ref=e,this.callback=n,e.ref.fragment.registerIndexRef(this),this.rebind()};_c.prototype={rebind:function(){var t,e=this.ref.ref;t="k"===e.ref.t?"k"+e.fragment.key:"i"+e.fragment.index,void 0!==t&&this.callback(_("@"+t))},unbind:function(){this.ref.ref.fragment.unregisterIndexRef(this)}};var Ac=_c,Cc=Te;Te.resolve=function(t){var e,n,i={};for(e in t.refs)n=t.refs[e],i[n.ref.n]="k"===n.ref.t?n.fragment.key:n.fragment.index;return i};var Oc,Tc=Se,Sc=Fe,Fc={},Rc=Function.prototype.bind;Oc=function(t,e,n,i){var r,s=this;r=t.root,this.root=r,this.parentFragment=e,this.callback=i,this.owner=t,this.str=n.s,this.keypaths=[],this.pending=n.r.length,this.refResolvers=n.r.map(function(t,e){return Tc(s,t,function(t){s.resolve(e,t)})}),this.ready=!0,this.bubble()},Oc.prototype={bubble:function(){this.ready&&(this.uniqueString=je(this.str,this.keypaths),this.keypath=Pe(this.uniqueString),this.createEvaluator(),this.callback(this.keypath))},unbind:function(){for(var t;t=this.refResolvers.pop();)t.unbind()},resolve:function(t,e){this.keypaths[t]=e,this.bubble()},createEvaluator:function(){var t,e,n,i,r,s=this;i=this.keypath,t=this.root.viewmodel.computations[i.str],t?this.root.viewmodel.mark(i):(r=Sc(this.str,this.refResolvers.length),e=this.keypaths.map(function(t){var e;return"undefined"===t?function(){return void 0}:t.isSpecial?(e=t.value,function(){return e}):function(){var e=s.root.viewmodel.get(t,{noUnwrap:!0,fullRootGet:!0});return"function"==typeof e&&(e=Ve(e,s.root)),e}}),n={deps:this.keypaths.filter(Ne),getter:function(){var t=e.map(Re);return r.apply(null,t)}},t=this.root.viewmodel.compute(i,n))},rebind:function(t,e){this.refResolvers.forEach(function(n){return n.rebind(t,e)})}};var jc=Oc,Pc=function(t,e,n){var i=this;this.resolver=e,this.root=e.root,this.parentFragment=n,this.viewmodel=e.root.viewmodel,"string"==typeof t?this.value=t:t.t===Ph?this.refResolver=Tc(this,t.n,function(t){i.resolve(t)}):new jc(e,n,t,function(t){i.resolve(t)})};Pc.prototype={resolve:function(t){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.keypath=t,this.value=this.viewmodel.get(t),this.bind(),this.resolver.bubble()},bind:function(){this.viewmodel.register(this.keypath,this)},rebind:function(t,e){this.refResolver&&this.refResolver.rebind(t,e)},setValue:function(t){this.value=t,this.resolver.bubble()},unbind:function(){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.refResolver&&this.refResolver.unbind()},forceResolution:function(){this.refResolver&&this.refResolver.forceResolution()}};var Nc=Pc,Vc=function(t,e,n){var i,r,s,o,a=this;this.parentFragment=o=t.parentFragment,this.root=i=t.root,this.mustache=t,this.ref=r=e.r,this.callback=n,this.unresolved=[],(s=ua(i,r,o))?this.base=s:this.baseResolver=new wc(this,r,function(t){a.base=t,a.baseResolver=null,a.bubble()}),this.members=e.m.map(function(t){return new Nc(t,a,o)}),this.ready=!0,this.bubble()};Vc.prototype={getKeypath:function(){var t=this.members.map(Ie);return!t.every(Le)||this.baseResolver?null:this.base.join(t.join("."))},bubble:function(){this.ready&&!this.baseResolver&&this.callback(this.getKeypath())},unbind:function(){this.members.forEach(z)},rebind:function(t,e){var n;if(this.base){var i=this.base.replace(t,e);i&&i!==this.base&&(this.base=i,n=!0)}this.members.forEach(function(i){i.rebind(t,e)&&(n=!0)}),n&&this.bubble()},forceResolution:function(){this.baseResolver&&(this.base=_(this.ref),this.baseResolver.unbind(),this.baseResolver=null),this.members.forEach(De),this.bubble()}};var Ic=Vc,Lc=Me,Dc=Ue,Mc=Be,Uc={getValue:yc,init:Lc,resolve:Dc,rebind:Mc},Bc=function(t){this.type=kh,Uc.init(this,t)};Bc.prototype={update:function(){this.node.data=void 0==this.value?"":this.value},resolve:Uc.resolve,rebind:Uc.rebind,detach:pc,unbind:gc,render:function(){return this.node||(this.node=document.createTextNode(n(this.value))),this.node},unrender:function(t){t&&e(this.node)},getValue:Uc.getValue,setValue:function(t){var e;this.keypath&&(e=this.root.viewmodel.wrapped[this.keypath.str])&&(t=e.get()),a(t,this.value)||(this.value=t,this.parentFragment.bubble(),this.node&&ma.addView(this))},firstNode:function(){return this.node},toString:function(t){var e=""+n(this.value);return t?_e(e):e}};var qc=Bc,Qc=qe,Wc=Qe,Kc=We,Hc=Ke,zc=He,Gc=ze,$c=Ge,Yc=$e,Jc=Ye,Zc=function(t,e){Uc.rebind.call(this,t,e)},Xc=Ze,tl=Xe,el=ln,nl=dn,il=fn,rl=vn,sl=function(t){this.type=Eh,this.subtype=this.currentSubtype=t.template.n,this.inverted=this.subtype===Vh,this.pElement=t.pElement,this.fragments=[],this.fragmentsToCreate=[],this.fragmentsToRender=[],this.fragmentsToUnrender=[],t.template.i&&(this.indexRefs=t.template.i.split(",").map(function(t,e){return{n:t,t:0===e?"k":"i"}})),this.renderedFragments=[],this.length=0,Uc.init(this,t)};sl.prototype={bubble:Qc,detach:Wc,find:Kc,findAll:Hc,findAllComponents:zc,findComponent:Gc,findNextNode:$c,firstNode:Yc,getIndexRef:function(t){if(this.indexRefs)for(var e=this.indexRefs.length;e--;){var n=this.indexRefs[e];if(n.n===t)return n}},getValue:Uc.getValue,shuffle:Jc,rebind:Zc,render:Xc,resolve:Uc.resolve,setValue:tl,toString:el,unbind:nl,unrender:il,update:rl};var ol,al,ul=sl,hl=gn,cl=yn,ll=bn,dl=wn,fl={};try{co("table").innerHTML="foo"}catch(_o){ol=!0,al={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var pl=function(t,e,n){var i,r,s,o,a,u=[];if(null!=t&&""!==t){for(ol&&(r=al[e.tagName])?(i=kn("DIV"),i.innerHTML=r[0]+t+r[1],i=i.querySelector(".x"),"SELECT"===i.tagName&&(s=i.options[i.selectedIndex])):e.namespaceURI===no.svg?(i=kn("DIV"),i.innerHTML='<svg class="x">'+t+"</svg>",i=i.querySelector(".x")):(i=kn(e.tagName),i.innerHTML=t,"SELECT"===i.tagName&&(s=i.options[i.selectedIndex]));o=i.firstChild;)u.push(o),n.appendChild(o);if("SELECT"===e.tagName)for(a=u.length;a--;)u[a]!==s&&(u[a].selected=!1)}return u},ml=xn,vl=_n,gl=An,yl=Cn,bl=On,wl=Tn,kl=function(t){this.type=xh,Uc.init(this,t)};kl.prototype={detach:hl,find:cl,findAll:ll,firstNode:dl,getValue:Uc.getValue,rebind:Uc.rebind,render:vl,resolve:Uc.resolve,setValue:gl,toString:yl,unbind:gc,unrender:bl,update:wl};var xl,El,_l,Al,Cl=kl,Ol=function(){this.parentFragment.bubble()},Tl=Sn,Sl=function(t){return this.node?lo(this.node,t)?this.node:this.fragment&&this.fragment.find?this.fragment.find(t):void 0:null},Fl=function(t,e){e._test(this,!0)&&e.live&&(this.liveQueries||(this.liveQueries=[])).push(e),this.fragment&&this.fragment.findAll(t,e)},Rl=function(t,e){this.fragment&&this.fragment.findAllComponents(t,e)},jl=function(t){return this.fragment?this.fragment.findComponent(t):void 0},Pl=Fn,Nl=Rn,Vl=jn,Il=/^true|on|yes|1$/i,Ll=/^[0-9]+$/,Dl=function(t,e){var n,i,r;return r=e.a||{},i={},n=r.twoway,void 0!==n&&(i.twoway=0===n||Il.test(n)),n=r.lazy,void 0!==n&&(i.lazy=0!==n&&Ll.test(n)?parseInt(n):0===n||Il.test(n)),i},Ml=Pn;xl="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),El="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),_l=function(t){for(var e={},n=t.length;n--;)e[t[n].toLowerCase()]=t[n];return e},Al=_l(xl.concat(El));var Ul=function(t){var e=t.toLowerCase();return Al[e]||e},Bl=function(t,e){var n,i;if(n=e.indexOf(":"),-1===n||(i=e.substr(0,n),"xmlns"===i))t.name=t.element.namespace!==no.html?Ul(e):e;else if(e=e.substring(n+1),t.name=Ul(e),t.namespace=no[i.toLowerCase()],t.namespacePrefix=i,!t.namespace)throw'Unknown namespace ("'+i+'")'},ql=Nn,Ql=Vn,Wl=In,Kl=Ln,Hl={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},zl=Dn,Gl=Un,$l=Bn,Yl=qn,Jl=Qn,Zl=Wn,Xl=Kn,td=Hn,ed=zn,nd=Gn,id=$n,rd=Yn,sd=Jn,od=Zn,ad=Xn,ud=function(t){this.init(t)};ud.prototype={bubble:Ml,init:Ql,rebind:Wl,render:Kl,toString:zl,unbind:Gl,update:ad};var hd,cd=ud,ld=function(t,e){var n,i,r=[];for(n in e)"twoway"!==n&&"lazy"!==n&&e.hasOwnProperty(n)&&(i=new cd({element:t,name:n,value:e[n],root:t.root}),r[n]=i,"value"!==n&&r.push(i));return(i=r.value)&&r.push(i),r};"undefined"!=typeof document&&(hd=co("div"));var dd=function(t,e){this.element=t,this.root=t.root,this.parentFragment=t.parentFragment,this.attributes=[],this.fragment=new ev({root:t.root,owner:this,template:[e]})};dd.prototype={bubble:function(){this.node&&this.update(),this.element.bubble()},rebind:function(t,e){this.fragment.rebind(t,e)},render:function(t){this.node=t,this.isSvg=t.namespaceURI===no.svg,this.update()},unbind:function(){this.fragment.unbind()},update:function(){var t,e,n=this;t=this.fragment.toString(),e=ti(t,this.isSvg),this.attributes.filter(function(t){return ei(e,t)}).forEach(function(t){n.node.removeAttribute(t.name)}),e.forEach(function(t){n.node.setAttribute(t.name,t.value)}),this.attributes=e},toString:function(){return this.fragment.toString()}};var fd=dd,pd=function(t,e){return e?e.map(function(e){return new fd(t,e)}):[]},md=function(t){var e,n,i,r;if(this.element=t,this.root=t.root,this.attribute=t.attributes[this.name||"value"],e=this.attribute.interpolator,e.twowayBinding=this,n=e.keypath){if("}"===n.str.slice(-1))return v("Two-way binding does not work with expressions (`%s` on <%s>)",e.resolver.uniqueString,t.name,{ractive:this.root}),!1;if(n.isSpecial)return v("Two-way binding does not work with %s",e.resolver.ref,{ractive:this.root}),!1}else{var s=e.template.r?"'"+e.template.r+"' reference":"expression";m("The %s being used for two-way binding is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",s,{ractive:this.root}),e.resolver.forceResolution(),n=e.keypath}this.attribute.isTwoway=!0,this.keypath=n,i=this.root.viewmodel.get(n),void 0===i&&this.getInitialValue&&(i=this.getInitialValue(),void 0!==i&&this.root.viewmodel.set(n,i)),(r=ni(t))&&(this.resetValue=i,r.formBindings.push(this))};md.prototype={handleChange:function(){var t=this;ma.start(this.root),this.attribute.locked=!0,this.root.viewmodel.set(this.keypath,this.getValue()),ma.scheduleTask(function(){return t.attribute.locked=!1}),ma.end()},rebound:function(){var t,e,n;e=this.keypath,n=this.attribute.interpolator.keypath,e!==n&&(I(this.root._twowayBindings[e.str],this),this.keypath=n,t=this.root._twowayBindings[n.str]||(this.root._twowayBindings[n.str]=[]),t.push(this))},unbind:function(){}},md.extend=function(t){var e,n=this;return e=function(t){md.call(this,t),this.init&&this.init()},e.prototype=wo(n.prototype),i(e.prototype,t),e.extend=md.extend,e};var vd,gd=md,yd=ii;vd=gd.extend({getInitialValue:function(){return""},getValue:function(){return this.element.node.value},render:function(){var t,e=this.element.node,n=!1;this.rendered=!0,t=this.root.lazy,this.element.lazy===!0?t=!0:this.element.lazy===!1?t=!1:u(this.element.lazy)?(t=!1,n=+this.element.lazy):u(t||"")&&(n=+t,t=!1,this.element.lazy=n),this.handler=n?si:yd,e.addEventListener("change",yd,!1),t||(e.addEventListener("input",this.handler,!1),e.attachEvent&&e.addEventListener("keyup",this.handler,!1)),e.addEventListener("blur",ri,!1)},unrender:function(){var t=this.element.node;this.rendered=!1,t.removeEventListener("change",yd,!1),t.removeEventListener("input",this.handler,!1),t.removeEventListener("keyup",this.handler,!1),t.removeEventListener("blur",ri,!1)}});var bd=vd,wd=bd.extend({getInitialValue:function(){return this.element.fragment?this.element.fragment.toString():""},getValue:function(){return this.element.node.innerHTML}}),kd=wd,xd=oi,Ed={},_d=gd.extend({name:"checked",init:function(){this.siblings=xd(this.root._guid,"radio",this.element.getAttribute("name")),this.siblings.push(this)},render:function(){var t=this.element.node;t.addEventListener("change",yd,!1),t.attachEvent&&t.addEventListener("click",yd,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",yd,!1),t.removeEventListener("click",yd,!1)},handleChange:function(){ma.start(this.root),this.siblings.forEach(function(t){t.root.viewmodel.set(t.keypath,t.getValue())}),ma.end()},getValue:function(){return this.element.node.checked},unbind:function(){I(this.siblings,this)}}),Ad=_d,Cd=gd.extend({name:"name",init:function(){this.siblings=xd(this.root._guid,"radioname",this.keypath.str),this.siblings.push(this),this.radioName=!0},getInitialValue:function(){return this.element.getAttribute("checked")?this.element.getAttribute("value"):void 0},render:function(){var t=this.element.node;t.name="{{"+this.keypath.str+"}}",t.checked=this.root.viewmodel.get(this.keypath)==this.element.getAttribute("value"),t.addEventListener("change",yd,!1),t.attachEvent&&t.addEventListener("click",yd,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",yd,!1),t.removeEventListener("click",yd,!1)},getValue:function(){var t=this.element.node;return t._ractive?t._ractive.value:t.value},handleChange:function(){this.element.node.checked&&gd.prototype.handleChange.call(this)},rebound:function(t,e){var n;gd.prototype.rebound.call(this,t,e),(n=this.element.node)&&(n.name="{{"+this.keypath.str+"}}")},unbind:function(){I(this.siblings,this)}}),Od=Cd,Td=gd.extend({name:"name",getInitialValue:function(){return this.noInitialValue=!0,[]},init:function(){var t,e;this.checkboxName=!0,this.siblings=xd(this.root._guid,"checkboxes",this.keypath.str),this.siblings.push(this),this.noInitialValue&&(this.siblings.noInitialValue=!0),this.siblings.noInitialValue&&this.element.getAttribute("checked")&&(t=this.root.viewmodel.get(this.keypath),e=this.element.getAttribute("value"),t.push(e))},unbind:function(){I(this.siblings,this)},render:function(){var t,e,n=this.element.node;t=this.root.viewmodel.get(this.keypath),e=this.element.getAttribute("value"),this.isChecked=s(t)?j(t,e):t==e,n.name="{{"+this.keypath.str+"}}",n.checked=this.isChecked,n.addEventListener("change",yd,!1),n.attachEvent&&n.addEventListener("click",yd,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",yd,!1),t.removeEventListener("click",yd,!1)},changed:function(){var t=!!this.isChecked;return this.isChecked=this.element.node.checked,this.isChecked===t},handleChange:function(){this.isChecked=this.element.node.checked,gd.prototype.handleChange.call(this)},getValue:function(){return this.siblings.filter(ai).map(ui)}}),Sd=Td,Fd=gd.extend({name:"checked",render:function(){var t=this.element.node;t.addEventListener("change",yd,!1),t.attachEvent&&t.addEventListener("click",yd,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",yd,!1),t.removeEventListener("click",yd,!1)},getValue:function(){return this.element.node.checked}}),Rd=Fd,jd=gd.extend({getInitialValue:function(){var t,e,n,i,r=this.element.options;if(void 0===this.element.getAttribute("value")&&(e=t=r.length,t)){for(;e--;)if(r[e].getAttribute("selected")){n=r[e].getAttribute("value"),i=!0;break}if(!i)for(;++e<t;)if(!r[e].getAttribute("disabled")){n=r[e].getAttribute("value");break}return void 0!==n&&(this.element.attributes.value.value=n),n}},render:function(){this.element.node.addEventListener("change",yd,!1)},unrender:function(){this.element.node.removeEventListener("change",yd,!1)},setValue:function(t){this.root.viewmodel.set(this.keypath,t)},getValue:function(){var t,e,n,i,r;for(t=this.element.node.options,n=t.length,e=0;n>e;e+=1)if(i=t[e],t[e].selected)return r=i._ractive?i._ractive.value:i.value},forceUpdate:function(){var t=this,e=this.getValue();void 0!==e&&(this.attribute.locked=!0,ma.scheduleTask(function(){return t.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,e))}}),Pd=jd,Nd=Pd.extend({getInitialValue:function(){return this.element.options.filter(function(t){return t.getAttribute("selected")}).map(function(t){return t.getAttribute("value")})},render:function(){var t;this.element.node.addEventListener("change",yd,!1),t=this.root.viewmodel.get(this.keypath),void 0===t&&this.handleChange()},unrender:function(){this.element.node.removeEventListener("change",yd,!1)},setValue:function(){throw new Error("TODO not implemented yet")},getValue:function(){var t,e,n,i,r,s;for(t=[],e=this.element.node.options,i=e.length,n=0;i>n;n+=1)r=e[n],r.selected&&(s=r._ractive?r._ractive.value:r.value,t.push(s));return t},handleChange:function(){var t,e,n;return t=this.attribute,e=t.value,n=this.getValue(),void 0!==e&&P(n,e)||Pd.prototype.handleChange.call(this),this},forceUpdate:function(){var t=this,e=this.getValue();void 0!==e&&(this.attribute.locked=!0,ma.scheduleTask(function(){return t.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,e))},updateModel:function(){void 0!==this.attribute.value&&this.attribute.value.length||this.root.viewmodel.set(this.keypath,this.initialValue)}}),Vd=Nd,Id=gd.extend({render:function(){this.element.node.addEventListener("change",yd,!1)},unrender:function(){this.element.node.removeEventListener("change",yd,!1)},getValue:function(){return this.element.node.files}}),Ld=Id,Dd=bd.extend({getInitialValue:function(){return void 0},getValue:function(){var t=parseFloat(this.element.node.value);return isNaN(t)?void 0:t}}),Md=hi,Ud=li,Bd=di,qd=fi,Qd=pi,Wd=/^event(?:\.(.+))?/,Kd=yi,Hd=bi,zd={},Gd={touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0,touchleave:!0},$d=ki,Yd=xi,Jd=Ei,Zd=_i,Xd=Ai,tf=function(t,e,n){this.init(t,e,n)};tf.prototype={bubble:Ud,fire:Bd,getAction:qd,init:Qd,listen:Hd,rebind:$d,render:Yd,resolve:Jd,unbind:Zd,unrender:Xd};var ef=tf,nf=function(t,e){var n,i,r,s,o=[];for(i in e)if(e.hasOwnProperty(i))for(r=i.split("-"),n=r.length;n--;)s=new ef(t,r[n],e[i]),o.push(s);return o},rf=function(t,e){var n,i,r,s=this;this.element=t,this.root=n=t.root,i=e.n||e,("string"==typeof i||(r=new ev({template:i,root:n,owner:t}),i=r.toString(),r.unbind(),""!==i))&&(e.a?this.params=e.a:e.d&&(this.fragment=new ev({template:e.d,root:n,owner:t}),this.params=this.fragment.getArgsList(),this.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=!0,s.params=this.getArgsList(),s.ready&&s.update()}),this.fn=g("decorators",n,i),this.fn||l(Vo(i,"decorator")))};rf.prototype={init:function(){var t,e,n;if(t=this.element.node,this.params?(n=[t].concat(this.params),e=this.fn.apply(this.root,n)):e=this.fn.call(this.root,t),!e||!e.teardown)throw new Error("Decorator definition must return an object with a teardown method");this.actual=e,this.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},rebind:function(t,e){this.fragment&&this.fragment.rebind(t,e)},teardown:function(t){this.torndown=!0,this.ready&&this.actual.teardown(),!t&&this.fragment&&this.fragment.unbind()}};var sf,of,af,uf=rf,hf=ji,cf=Pi,lf=Mi,df=function(t){return t.replace(/-([a-zA-Z])/g,function(t,e){return e.toUpperCase()})};Zs?(of={},af=co("div").style,sf=function(t){var e,n,i;if(t=df(t),!of[t])if(void 0!==af[t])of[t]=t;else for(i=t.charAt(0).toUpperCase()+t.substring(1),e=ro.length;e--;)if(n=ro[e],void 0!==af[n+i]){of[t]=n+i;break}return of[t]}):sf=null;var ff,pf,mf=sf;Zs?(pf=window.getComputedStyle||Eo.getComputedStyle,ff=function(t){var e,n,i,r,o;if(e=pf(this.node),"string"==typeof t)return o=e[mf(t)],"0px"===o&&(o=0),o;if(!s(t))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(n={},i=t.length;i--;)r=t[i],o=e[mf(r)],"0px"===o&&(o=0),n[r]=o;return n}):ff=null;var vf=ff,gf=function(t,e){var n;if("string"==typeof t)this.node.style[mf(t)]=e;else for(n in t)t.hasOwnProperty(n)&&(this.node.style[mf(n)]=t[n]);return this},yf=function(t){var e;this.duration=t.duration,this.step=t.step,this.complete=t.complete,"string"==typeof t.easing?(e=t.root.easing[t.easing],e||(v(Vo(t.easing,"easing")),e=Ui)):e="function"==typeof t.easing?t.easing:Ui,this.easing=e,this.start=Xo(),this.end=this.start+this.duration,this.running=!0,ya.add(this)};yf.prototype={tick:function(t){var e,n;return this.running?t>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(e=t-this.start,n=this.easing(e/this.duration),this.step&&this.step(n),!0):!1},stop:function(){this.abort&&this.abort(),this.running=!1}};var bf,wf,kf,xf,Ef,_f,Af,Cf,Of=yf,Tf=new RegExp("^-(?:"+ro.join("|")+")-"),Sf=function(t){return t.replace(Tf,"")},Ff=new RegExp("^(?:"+ro.join("|")+")([A-Z])"),Rf=function(t){var e;return t?(Ff.test(t)&&(t="-"+t),e=t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})):""},jf={},Pf={};Zs?(wf=co("div").style,function(){void 0!==wf.transition?(kf="transition",xf="transitionend",Ef=!0):void 0!==wf.webkitTransition?(kf="webkitTransition",xf="webkitTransitionEnd",Ef=!0):Ef=!1}(),kf&&(_f=kf+"Duration",Af=kf+"Property",Cf=kf+"TimingFunction"),bf=function(t,e,n,i,r){setTimeout(function(){var s,o,a,u,h;u=function(){o&&a&&(t.root.fire(t.name+":end",t.node,t.isIntro),r())},s=(t.node.namespaceURI||"")+t.node.tagName,t.node.style[Af]=i.map(mf).map(Rf).join(","),t.node.style[Cf]=Rf(n.easing||"linear"),t.node.style[_f]=n.duration/1e3+"s",h=function(e){var n;n=i.indexOf(df(Sf(e.propertyName))),-1!==n&&i.splice(n,1),i.length||(t.node.removeEventListener(xf,h,!1),a=!0,u())},t.node.addEventListener(xf,h,!1),setTimeout(function(){for(var r,c,l,d,f,p=i.length,v=[];p--;)d=i[p],r=s+d,Ef&&!Pf[r]&&(t.node.style[mf(d)]=e[d],jf[r]||(c=t.getStyle(d),jf[r]=t.getStyle(d)!=e[d],Pf[r]=!jf[r],Pf[r]&&(t.node.style[mf(d)]=c))),(!Ef||Pf[r])&&(void 0===c&&(c=t.getStyle(d)),l=i.indexOf(d),-1===l?m("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!",{node:t.node}):i.splice(l,1),f=/[^\d]*$/.exec(e[d])[0],v.push({name:mf(d),interpolator:Lo(parseFloat(c),parseFloat(e[d])),suffix:f}));v.length?new Of({root:t.root,duration:n.duration,easing:df(n.easing||""),step:function(e){var n,i;for(i=v.length;i--;)n=v[i],t.node.style[n.name]=n.interpolator(e)+n.suffix},complete:function(){o=!0,u()}}):o=!0,i.length||(t.node.removeEventListener(xf,h,!1),a=!0,u())},0)},n.delay||0)}):bf=null;var Nf,Vf,If,Lf,Df,Mf=bf;if("undefined"!=typeof document){if(Nf="hidden",Df={},Nf in document)If="";else for(Lf=ro.length;Lf--;)Vf=ro[Lf],Nf=Vf+"Hidden",Nf in document&&(If=Vf);void 0!==If?(document.addEventListener(If+"visibilitychange",Bi),Bi()):("onfocusout"in document?(document.addEventListener("focusout",qi),document.addEventListener("focusin",Qi)):(window.addEventListener("pagehide",qi),window.addEventListener("blur",qi),window.addEventListener("pageshow",Qi),window.addEventListener("focus",Qi)),Df.hidden=!1)}var Uf,Bf,qf,Qf=Df;Zs?(Bf=window.getComputedStyle||Eo.getComputedStyle,Uf=function(t,e,n){var i,r=this;if(4===arguments.length)throw new Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");if(Qf.hidden)return this.setStyle(t,e),qf||(qf=oa.resolve());"string"==typeof t?(i={},i[t]=e):(i=t,n=e),n||(v('The "%s" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340',this.name),n=this);var s=new oa(function(t){var e,s,o,a,u,h,c;if(!n.duration)return r.setStyle(i),void t();for(e=Object.keys(i),s=[],o=Bf(r.node),u={},h=e.length;h--;)c=e[h],a=o[mf(c)],"0px"===a&&(a=0),a!=i[c]&&(s.push(c),r.node.style[mf(c)]=a);return s.length?void Mf(r,i,n,s,t):void t()});return s}):Uf=null;var Wf=Uf,Kf=function(t,e){return"number"==typeof t?t={duration:t}:"string"==typeof t?t="slow"===t?{duration:600}:"fast"===t?{duration:200}:{duration:400}:t||(t={}),r({},t,e)},Hf=Wi,zf=function(t,e,n){this.init(t,e,n)};zf.prototype={init:lf,start:Hf,getStyle:vf,setStyle:gf,animateStyle:Wf,processParams:Kf};var Gf,$f,Yf=zf,Jf=Hi;Gf=function(){var t=this.node,e=this.fragment.toString(!1);if(window&&window.appearsToBeIELessEqual8&&(t.type="text/css"),t.styleSheet)t.styleSheet.cssText=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}},$f=function(){this.node.type&&"text/javascript"!==this.node.type||m("Script tag was updated. This does not cause the code to be re-evaluated!",{ractive:this.root}),this.node.text=this.fragment.toString(!1)};var Zf=function(){var t,e;return this.template.y?"<!DOCTYPE"+this.template.dd+">":(t="<"+this.template.e,t+=this.attributes.map(Zi).join("")+this.conditionalAttributes.map(Zi).join(""),"option"===this.name&&Yi(this)&&(t+=" selected"),"input"===this.name&&Ji(this)&&(t+=" checked"),t+=">","textarea"===this.name&&void 0!==this.getAttribute("value")?t+=_e(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(t+=this.getAttribute("value")||""),this.fragment&&(e="script"!==this.name&&"style"!==this.name,t+=this.fragment.toString(e)),nc.test(this.template.e)||(t+="</"+this.template.e+">"),t)},Xf=Xi,tp=tr,ep=function(t){this.init(t)};ep.prototype={bubble:Ol,detach:Tl,find:Sl,findAll:Fl,findAllComponents:Rl,findComponent:jl,findNextNode:Pl,firstNode:Nl,getAttribute:Vl,init:hf,rebind:cf,render:Jf,toString:Zf,unbind:Xf,unrender:tp};var np=ep,ip=/^\s*$/,rp=/^\s*/,sp=function(t){var e,n,i,r;return e=t.split("\n"),n=e[0],void 0!==n&&ip.test(n)&&e.shift(),i=V(e),void 0!==i&&ip.test(i)&&e.pop(),r=e.reduce(nr,null),r&&(t=e.map(function(t){return t.replace(r,"")}).join("\n")),t},op=ir,ap=function(t,e){var n;return e?n=t.split("\n").map(function(t,n){return n?e+t:t}).join("\n"):t},up='Could not find template for partial "%s"',hp=function(t){var e,n;e=this.parentFragment=t.parentFragment,this.root=e.root,this.type=Ah,this.index=t.index,this.name=t.template.r,this.rendered=!1,this.fragment=this.fragmentToRender=this.fragmentToUnrender=null,Uc.init(this,t),this.keypath||((n=op(this.root,this.name,e))?(gc.call(this),this.isNamed=!0,this.setTemplate(n)):v(up,this.name))};hp.prototype={bubble:function(){this.parentFragment.bubble()},detach:function(){return this.fragment.detach()},find:function(t){return this.fragment.find(t)},findAll:function(t,e){return this.fragment.findAll(t,e)},findComponent:function(t){return this.fragment.findComponent(t)},findAllComponents:function(t,e){return this.fragment.findAllComponents(t,e)},firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},getPartialName:function(){return this.isNamed&&this.name?this.name:void 0===this.value?this.name:this.value},getValue:function(){return this.fragment.getValue()},rebind:function(t,e){this.isNamed||Mc.call(this,t,e),this.fragment&&this.fragment.rebind(t,e)},render:function(){return this.docFrag=document.createDocumentFragment(),this.update(),this.rendered=!0,this.docFrag},resolve:Uc.resolve,setValue:function(t){var e;(void 0===t||t!==this.value)&&(void 0!==t&&(e=op(this.root,""+t,this.parentFragment)),!e&&this.name&&(e=op(this.root,this.name,this.parentFragment))&&(gc.call(this),this.isNamed=!0),e||v(up,this.name,{ractive:this.root}),this.value=t,this.setTemplate(e||[]),this.bubble(),this.rendered&&ma.addView(this))},setTemplate:function(t){this.fragment&&(this.fragment.unbind(),this.rendered&&(this.fragmentToUnrender=this.fragment)),this.fragment=new ev({template:t,root:this.root,owner:this,pElement:this.parentFragment.pElement}),this.fragmentToRender=this.fragment},toString:function(t){var e,n,i,r;return e=this.fragment.toString(t),n=this.parentFragment.items[this.index-1],n&&n.type===wh?(i=n.text.split("\n").pop(),(r=/^\s+$/.exec(i))?ap(e,r[0]):e):e},unbind:function(){this.isNamed||gc.call(this),this.fragment&&this.fragment.unbind()},unrender:function(t){this.rendered&&(this.fragment&&this.fragment.unrender(t),this.rendered=!1)},update:function(){var t,e;this.fragmentToUnrender&&(this.fragmentToUnrender.unrender(!0),this.fragmentToUnrender=null),this.fragmentToRender&&(this.docFrag.appendChild(this.fragmentToRender.render()),this.fragmentToRender=null),this.rendered&&(t=this.parentFragment.getNode(),e=this.parentFragment.findNextNode(this),t.insertBefore(this.docFrag,e))}};var cp,lp,dp,fp=hp,pp=ur,mp=hr,vp=new na("detach"),gp=cr,yp=lr,bp=dr,wp=fr,kp=pr,xp=mr,Ep=function(t,e,n,i){var r=t.root,s=t.keypath;i?r.viewmodel.smartUpdate(s,e,i):r.viewmodel.mark(s)},_p=[],Ap=["pop","push","reverse","shift","sort","splice","unshift"];Ap.forEach(function(t){var e=function(){for(var e=arguments.length,n=Array(e),i=0;e>i;i++)n[i]=arguments[i];var r,s,o,a;for(r=mu(this,t,n),s=Array.prototype[t].apply(this,arguments),ma.start(),this._ractive.setting=!0,a=this._ractive.wrappers.length;a--;)o=this._ractive.wrappers[a],ma.addRactive(o.root),Ep(o,this,t,r);return ma.end(),this._ractive.setting=!1,s};ko(_p,t,{value:e})}),cp={},cp.__proto__?(lp=function(t){t.__proto__=_p},dp=function(t){t.__proto__=Array.prototype}):(lp=function(t){var e,n;for(e=Ap.length;e--;)n=Ap[e],ko(t,n,{value:_p[n],configurable:!0})},dp=function(t){var e;for(e=Ap.length;e--;)delete t[Ap[e]]}),lp.unpatch=dp;var Cp,Op,Tp,Sp=lp;Cp={filter:function(t){return s(t)&&(!t._ractive||!t._ractive.setting)},wrap:function(t,e,n){return new Op(t,e,n)}},Op=function(t,e,n){this.root=t,this.value=e,this.keypath=_(n),e._ractive||(ko(e,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),Sp(e)),e._ractive.instances[t._guid]||(e._ractive.instances[t._guid]=0,
e._ractive.instances.push(t)),e._ractive.instances[t._guid]+=1,e._ractive.wrappers.push(this)},Op.prototype={get:function(){return this.value},teardown:function(){var t,e,n,i,r;if(t=this.value,e=t._ractive,n=e.wrappers,i=e.instances,e.setting)return!1;if(r=n.indexOf(this),-1===r)throw new Error(Tp);if(n.splice(r,1),n.length){if(i[this.root._guid]-=1,!i[this.root._guid]){if(r=i.indexOf(this.root),-1===r)throw new Error(Tp);i.splice(r,1)}}else delete t._ractive,Sp.unpatch(this.value)}},Tp="Something went wrong in a rather interesting way";var Fp,Rp,jp=Cp,Pp=/^\s*[0-9]+\s*$/,Np=function(t){return Pp.test(t)?[]:{}};try{Object.defineProperty({},"test",{value:0}),Fp={filter:function(t,e,n){var i,r;return e?(e=_(e),(i=n.viewmodel.wrapped[e.parent.str])&&!i.magic?!1:(r=n.viewmodel.get(e.parent),s(r)&&/^[0-9]+$/.test(e.lastKey)?!1:r&&("object"==typeof r||"function"==typeof r))):!1},wrap:function(t,e,n){return new Rp(t,e,n)}},Rp=function(t,e,n){var i,r,s;return n=_(n),this.magic=!0,this.ractive=t,this.keypath=n,this.value=e,this.prop=n.lastKey,i=n.parent,this.obj=i.isRoot?t.viewmodel.data:t.viewmodel.get(i),r=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop),r&&r.set&&(s=r.set._ractiveWrappers)?void(-1===s.indexOf(this)&&s.push(this)):void vr(this,e,r)},Rp.prototype={get:function(){return this.value},reset:function(t){return this.updating?void 0:(this.updating=!0,this.obj[this.prop]=t,ma.addRactive(this.ractive),this.ractive.viewmodel.mark(this.keypath,{keepExistingWrapper:!0}),this.updating=!1,!0)},set:function(t,e){this.updating||(this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=Np(t),this.updating=!1),this.obj[this.prop][t]=e)},teardown:function(){var t,e,n,i,r;return this.updating?!1:(t=Object.getOwnPropertyDescriptor(this.obj,this.prop),e=t&&t.set,void(e&&(i=e._ractiveWrappers,r=i.indexOf(this),-1!==r&&i.splice(r,1),i.length||(n=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=n))))}}}catch(_o){Fp=!1}var Vp,Ip,Lp=Fp;Lp&&(Vp={filter:function(t,e,n){return Lp.filter(t,e,n)&&jp.filter(t)},wrap:function(t,e,n){return new Ip(t,e,n)}},Ip=function(t,e,n){this.value=e,this.magic=!0,this.magicWrapper=Lp.wrap(t,e,n),this.arrayWrapper=jp.wrap(t,e,n)},Ip.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(t){return this.magicWrapper.reset(t)}});var Dp=Vp,Mp=gr,Up={},Bp=wr,qp=kr,Qp=_r,Wp=Sr,Kp=Fr,Hp=function(t,e){this.computation=t,this.viewmodel=t.viewmodel,this.ref=e,this.root=this.viewmodel.ractive,this.parentFragment=this.root.component&&this.root.component.parentFragment};Hp.prototype={resolve:function(t){this.computation.softDeps.push(t),this.computation.unresolvedDeps[t.str]=null,this.viewmodel.register(t,this.computation,"computed")}};var zp=Hp,Gp=function(t,e){this.key=t,this.getter=e.getter,this.setter=e.setter,this.hardDeps=e.deps||[],this.softDeps=[],this.unresolvedDeps={},this.depValues={},this._dirty=this._firstRun=!0};Gp.prototype={constructor:Gp,init:function(t){var e,n=this;this.viewmodel=t,this.bypass=!0,e=t.get(this.key),t.clearCache(this.key.str),this.bypass=!1,this.setter&&void 0!==e&&this.set(e),this.hardDeps&&this.hardDeps.forEach(function(e){return t.register(e,n,"computed")})},invalidate:function(){this._dirty=!0},get:function(){var t,e,n=this,i=!1;if(this.getting){var r="The "+this.key.str+" computation indirectly called itself. This probably indicates a bug in the computation. It is commonly caused by `array.sort(...)` - if that's the case, clone the array first with `array.slice().sort(...)`";return p(r),this.value}if(this.getting=!0,this._dirty){if(this._firstRun||!this.hardDeps.length&&!this.softDeps.length?i=!0:[this.hardDeps,this.softDeps].forEach(function(t){var e,r,s;if(!i)for(s=t.length;s--;)if(e=t[s],r=n.viewmodel.get(e),!a(r,n.depValues[e.str]))return n.depValues[e.str]=r,void(i=!0)}),i){this.viewmodel.capture();try{this.value=this.getter()}catch(s){m('Failed to compute "%s"',this.key.str),d(s.stack||s),this.value=void 0}t=this.viewmodel.release(),e=this.updateDependencies(t),e&&[this.hardDeps,this.softDeps].forEach(function(t){t.forEach(function(t){n.depValues[t.str]=n.viewmodel.get(t)})})}this._dirty=!1}return this.getting=this._firstRun=!1,this.value},set:function(t){if(this.setting)return void(this.value=t);if(!this.setter)throw new Error("Computed properties without setters are read-only. (This may change in a future version of Ractive!)");this.setter(t)},updateDependencies:function(t){var e,n,i,r,s;for(n=this.softDeps,e=n.length;e--;)i=n[e],-1===t.indexOf(i)&&(r=!0,this.viewmodel.unregister(i,this,"computed"));for(e=t.length;e--;)i=t[e],-1!==n.indexOf(i)||this.hardDeps&&-1!==this.hardDeps.indexOf(i)||(r=!0,Rr(this.viewmodel,i)&&!this.unresolvedDeps[i.str]?(s=new zp(this,i.str),t.splice(e,1),this.unresolvedDeps[i.str]=s,ma.addUnresolved(s)):this.viewmodel.register(i,this,"computed"));return r&&(this.softDeps=t.slice()),r}};var $p=Gp,Yp=jr,Jp={FAILED_LOOKUP:!0},Zp=Pr,Xp={},tm=Vr,em=Ir,nm=function(t,e){this.localKey=t,this.keypath=e.keypath,this.origin=e.origin,this.deps=[],this.unresolved=[],this.resolved=!1};nm.prototype={forceResolution:function(){this.keypath=this.localKey,this.setup()},get:function(t,e){return this.resolved?this.origin.get(this.map(t),e):void 0},getValue:function(){return this.keypath?this.origin.get(this.keypath):void 0},initViewmodel:function(t){this.local=t,this.setup()},map:function(t){return void 0===typeof this.keypath?this.localKey:t.replace(this.localKey,this.keypath)},register:function(t,e,n){this.deps.push({keypath:t,dep:e,group:n}),this.resolved&&this.origin.register(this.map(t),e,n)},resolve:function(t){void 0!==this.keypath&&this.unbind(!0),this.keypath=t,this.setup()},set:function(t,e){this.resolved||this.forceResolution(),this.origin.set(this.map(t),e)},setup:function(){var t=this;void 0!==this.keypath&&(this.resolved=!0,this.deps.length&&(this.deps.forEach(function(e){var n=t.map(e.keypath);if(t.origin.register(n,e.dep,e.group),e.dep.setValue)e.dep.setValue(t.origin.get(n));else{if(!e.dep.invalidate)throw new Error("An unexpected error occurred. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");e.dep.invalidate()}}),this.origin.mark(this.keypath)))},setValue:function(t){if(!this.keypath)throw new Error("Mapping does not have keypath, cannot set value. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");this.origin.set(this.keypath,t)},unbind:function(t){var e=this;t||delete this.local.mappings[this.localKey],this.resolved&&(this.deps.forEach(function(t){e.origin.unregister(e.map(t.keypath),t.dep,t.group)}),this.tracker&&this.origin.unregister(this.keypath,this.tracker))},unregister:function(t,e,n){var i,r;if(this.resolved){for(i=this.deps,r=i.length;r--;)if(i[r].dep===e){i.splice(r,1);break}this.origin.unregister(this.map(t),e,n)}}};var im=Lr,rm=function(t,e){var n,i,r,s;return n={},i=0,r=t.map(function(t,r){var o,a,u;a=i,u=e.length;do{if(o=e.indexOf(t,a),-1===o)return s=!0,-1;a=o+1}while(n[o]&&u>a);return o===i&&(i+=1),o!==r&&(s=!0),n[o]=!0,o})},sm=Dr,om={},am=Br,um=Qr,hm=Wr,cm=Kr,lm=zr,dm={implicit:!0},fm={noCascade:!0},pm=$r,mm=Yr,vm=function(t){var e,n,i=t.adapt,r=t.data,s=t.ractive,o=t.computed,a=t.mappings;this.ractive=s,this.adaptors=i,this.onchange=t.onchange,this.cache={},this.cacheMap=wo(null),this.deps={computed:wo(null),"default":wo(null)},this.depsMap={computed:wo(null),"default":wo(null)},this.patternObservers=[],this.specials=wo(null),this.wrapped=wo(null),this.computations=wo(null),this.captureGroups=[],this.unresolvedImplicitDependencies=[],this.changes=[],this.implicitChanges={},this.noCascade={},this.data=r,this.mappings=wo(null);for(e in a)this.map(_(e),a[e]);if(r)for(e in r)(n=this.mappings[e])&&void 0===n.getValue()&&n.setValue(r[e]);for(e in o)a&&e in a&&l("Cannot map to a computed property ('%s')",e),this.compute(_(e),o[e]);this.ready=!0};vm.prototype={adapt:Mp,applyChanges:Qp,capture:Wp,clearCache:Kp,compute:Yp,get:Zp,init:tm,map:em,mark:im,merge:sm,register:am,release:um,reset:hm,set:cm,smartUpdate:lm,teardown:pm,unregister:mm};var gm=vm;Zr.prototype={constructor:Zr,begin:function(t){this.inProcess[t._guid]=!0},end:function(t){var e=t.parent;e&&this.inProcess[e._guid]?Xr(this.queue,e).push(t):ts(this,t),delete this.inProcess[t._guid]}};var ym=Zr,bm=es,wm=/\$\{([^\}]+)\}/g,km=new na("construct"),xm=new na("config"),Em=new ym("init"),_m=0,Am=["adaptors","components","decorators","easing","events","interpolators","partials","transitions"],Cm=ss,Om=cs;cs.prototype={bubble:function(){this.dirty||(this.dirty=!0,ma.addView(this))},update:function(){this.callback(this.fragment.getValue()),this.dirty=!1},rebind:function(t,e){this.fragment.rebind(t,e)},unbind:function(){this.fragment.unbind()}};var Tm=function(t,e,n,r,o){var a,u,h,c,l,d,f={},p={},v={},g=[];for(u=t.parentFragment,h=t.root,o=o||{},i(f,o),o.content=r||[],f[""]=o.content,e.defaults.el&&m("The <%s/> component has a default `el` property; it has been disregarded",t.name),c=u;c;){if(c.owner.type===Sh){l=c.owner.container;break}c=c.parent}return n&&Object.keys(n).forEach(function(e){var i,r,o=n[e];if("string"==typeof o)i=hc(o),p[e]=i?i.value:o;else if(0===o)p[e]=!0;else{if(!s(o))throw new Error("erm wut");ds(o)?(v[e]={origin:t.root.viewmodel,keypath:void 0},r=ls(t,o[0],function(t){t.isSpecial?d?a.set(e,t.value):(p[e]=t.value,delete v[e]):d?a.viewmodel.mappings[e].resolve(t):v[e].keypath=t})):r=new Om(t,o,function(t){d?a.set(e,t):p[e]=t}),g.push(r)}}),a=wo(e.prototype),Cm(a,{el:null,append:!0,data:p,partials:o,magic:h.magic||e.defaults.magic,modifyArrays:h.modifyArrays,adapt:h.adapt},{parent:h,component:t,container:l,mappings:v,inlinePartials:f,cssIds:u.cssIds}),d=!0,t.resolvers=g,a},Sm=fs,Fm=function(t){var e,n;for(e=t.root;e;)(n=e._liveComponentQueries["_"+t.name])&&n.push(t.instance),e=e.parent},Rm=ms,jm=vs,Pm=gs,Nm=ys,Vm=bs,Im=new na("teardown"),Lm=ks,Dm=function(t,e){this.init(t,e)};Dm.prototype={detach:mp,find:gp,findAll:yp,findAllComponents:bp,findComponent:wp,findNextNode:kp,firstNode:xp,init:Rm,rebind:jm,render:Pm,toString:Nm,unbind:Vm,unrender:Lm};var Mm=Dm,Um=function(t){this.type=Ch,this.value=t.template.c};Um.prototype={detach:pc,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createComment(this.value)),this.node},toString:function(){return"<!--"+this.value+"-->"},unrender:function(t){t&&this.node.parentNode.removeChild(this.node)}};var Bm=Um,qm=function(t){var e,n;this.type=Sh,this.container=e=t.parentFragment.root,this.component=n=e.component,this.container=e,this.containerFragment=t.parentFragment,this.parentFragment=n.parentFragment;var i=this.name=t.template.n||"",r=e._inlinePartials[i];r||(m('Could not find template for partial "'+i+'"',{ractive:t.root}),r=[]),this.fragment=new ev({owner:this,root:e.parent,template:r,pElement:this.containerFragment.pElement}),s(n.yielders[i])?n.yielders[i].push(this):n.yielders[i]=[this],ma.scheduleTask(function(){if(n.yielders[i].length>1)throw new Error("A component template can only have one {{yield"+(i?" "+i:"")+"}} declaration at a time")})};qm.prototype={detach:function(){return this.fragment.detach()},find:function(t){return this.fragment.find(t)},findAll:function(t,e){return this.fragment.findAll(t,e)},findComponent:function(t){return this.fragment.findComponent(t)},findAllComponents:function(t,e){return this.fragment.findAllComponents(t,e)},findNextNode:function(){return this.containerFragment.findNextNode(this)},firstNode:function(){return this.fragment.firstNode()},getValue:function(t){return this.fragment.getValue(t)},render:function(){return this.fragment.render()},unbind:function(){this.fragment.unbind()},unrender:function(t){this.fragment.unrender(t),I(this.component.yielders[this.name],this)},rebind:function(t,e){this.fragment.rebind(t,e)},toString:function(){return this.fragment.toString()}};var Qm=qm,Wm=function(t){this.declaration=t.template.a};Wm.prototype={init:Ro,render:Ro,unrender:Ro,teardown:Ro,toString:function(){return"<!DOCTYPE"+this.declaration+">"}};var Km=Wm,Hm=xs,zm=_s,Gm=As,$m=Cs,Ym=Ss,Jm=Rs,Zm=function(t){this.init(t)};Zm.prototype={bubble:ah,detach:uh,find:hh,findAll:ch,findAllComponents:lh,findComponent:dh,findNextNode:fh,firstNode:ph,getArgsList:lc,getNode:dc,getValue:fc,init:Hm,rebind:zm,registerIndexRef:function(t){var e=this.registeredIndexRefs;-1===e.indexOf(t)&&e.push(t)},render:Gm,toString:$m,unbind:Ym,unregisterIndexRef:function(t){var e=this.registeredIndexRefs;e.splice(e.indexOf(t),1)},unrender:Jm};var Xm,tv,ev=Zm,nv=js,iv=["template","partials","components","decorators","events"],rv=new na("reset"),sv=function(t,e){function n(e,i,r){r&&r.partials[t]||e.forEach(function(e){e.type===Ah&&e.getPartialName()===t&&i.push(e),e.fragment&&n(e.fragment.items,i,r),s(e.fragments)?n(e.fragments,i,r):s(e.items)?n(e.items,i,r):e.type===Th&&e.instance&&n(e.instance.fragment.items,i,e.instance),e.type===_h&&(s(e.attributes)&&n(e.attributes,i,r),s(e.conditionalAttributes)&&n(e.conditionalAttributes,i,r))})}var i,r=[];return n(this.fragment.items,r),this.partials[t]=e,i=ma.start(this,!0),r.forEach(function(e){e.value=void 0,e.setValue(t)}),ma.end(),i},ov=Ps,av=gu("reverse"),uv=Ns,hv=gu("shift"),cv=gu("sort"),lv=gu("splice"),dv=Is,fv=Ls,pv=new na("teardown"),mv=Ms,vv=Us,gv=Bs,yv=new na("unrender"),bv=gu("unshift"),wv=qs,kv=new na("update"),xv=Qs,Ev={add:Yo,animate:ka,detach:Ea,find:Aa,findAll:Na,findAllComponents:Va,findComponent:Ia,findContainer:La,findParent:Da,fire:qa,get:Qa,insert:Ka,merge:za,observe:uu,observeOnce:hu,off:du,on:fu,once:pu,pop:yu,push:bu,render:Ou,reset:nv,resetPartial:sv,resetTemplate:ov,reverse:av,set:uv,shift:hv,sort:cv,splice:lv,subtract:dv,teardown:fv,toggle:mv,toHTML:vv,toHtml:vv,unrender:gv,unshift:bv,update:wv,updateModel:xv},_v=function(t,e,n){return n||Ks(t,e)?function(){var n,i="_super"in this,r=this._super;return this._super=e,n=t.apply(this,arguments),i&&(this._super=r),n}:t},Av=Hs,Cv=Ys,Ov=function(t){var e,n,i={};return t&&(e=t._ractive)?(i.ractive=e.root,i.keypath=e.keypath.str,i.index={},(n=Cc(e.proxy.parentFragment))&&(i.index=Cc.resolve(n)),i):i};Xm=function(t){return this instanceof Xm?void Cm(this,t):new Xm(t)},tv={DEBUG:{writable:!0,value:!0},DEBUG_PROMISES:{writable:!0,value:!0},extend:{value:Cv},getNodeInfo:{value:Ov},parse:{value:Qu},Promise:{value:oa},svg:{value:io},magic:{value:eo},VERSION:{value:"0.7.3"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:uo},events:{writable:!0,value:{}},interpolators:{writable:!0,value:Mo},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}},xo(Xm,tv),Xm.prototype=i(Ev,ao),Xm.prototype.constructor=Xm,Xm.defaults=Xm.prototype;var Tv="function";if(typeof Date.now!==Tv||typeof String.prototype.trim!==Tv||typeof Object.keys!==Tv||typeof Array.prototype.indexOf!==Tv||typeof Array.prototype.forEach!==Tv||typeof Array.prototype.map!==Tv||typeof Array.prototype.filter!==Tv||"undefined"!=typeof window&&typeof window.addEventListener!==Tv)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");var Sv=Xm;return Sv});
//# sourceMappingURL=ractive.runtime.min.js.map

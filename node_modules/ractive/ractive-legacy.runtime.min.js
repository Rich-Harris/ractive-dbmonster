!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Ractive=e()}(this,function(){"use strict";function t(t){var e;if(t&&"boolean"!=typeof t)return"undefined"!=typeof window&&document&&t?t.nodeType?t:"string"==typeof t&&(e=document.getElementById(t),!e&&document.querySelector&&(e=document.querySelector(t)),e&&e.nodeType)?e:t[0]&&t[0].nodeType?t[0]:null:null}function e(t){return t&&"unknown"!=typeof t.parentNode&&t.parentNode&&t.parentNode.removeChild(t),t}function n(t){return null!=t&&t.toString?t:""}function i(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];for(var r,o;o=n.shift();)for(r in o)Ps.call(o,r)&&(t[r]=o[r]);return t}function r(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];return n.forEach(function(e){for(var n in e)!e.hasOwnProperty(n)||n in t||(t[n]=e[n])}),t}function o(t){return"[object Array]"===Rs.call(t)}function s(t){return Ns.test(Rs.call(t))}function a(t,e){return null===t&&null===e?!0:"object"==typeof t||"object"==typeof e?!1:t===e}function u(t){return!isNaN(parseFloat(t))&&isFinite(t)}function h(t){return t&&"[object Object]"===Rs.call(t)}function c(t,e){return t.replace(/%s/g,function(){return e.shift()})}function l(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];throw t=c(t,n),new Error(t)}function f(){Pv.DEBUG&&Ts.apply(null,arguments)}function d(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];t=c(t,n),Fs(t,n)}function p(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];t=c(t,n),Ls[t]||(Ls[t]=!0,Fs(t,n))}function m(){Pv.DEBUG&&d.apply(null,arguments)}function v(){Pv.DEBUG&&p.apply(null,arguments)}function g(t,e,n){var i=y(t,e,n);return i?i[t][n]:null}function y(t,e,n){for(;e;){if(n in e[t])return e;if(e.isolated)return null;e=e.parent}}function b(t){return function(){return t}}function w(t){var e,n,i,r,o,s;for(e=t.split("."),(n=Qs[e.length])||(n=k(e.length)),o=[],i=function(t,n){return t?"*":e[n]},r=n.length;r--;)s=n[r].map(i).join("."),o.hasOwnProperty(s)||(o.push(s),o[s]=!0);return o}function k(t){var e,n,i,r,o,s,a,u,h="";if(!Qs[t]){for(i=[];h.length<t;)h+=1;for(e=parseInt(h,2),r=function(t){return"1"===t},o=0;e>=o;o+=1){for(n=o.toString(2);n.length<t;)n="0"+n;for(u=[],a=n.length,s=0;a>s;s++)u.push(r(n[s]));i[o]=u}Qs[t]=i}return Qs[t]}function E(t,e,n,i){var r=t[e];if(!r||!r.equalsOrStartsWith(i)&&r.equalsOrStartsWith(n))return t[e]=r?r.replace(n,i):i,!0}function x(t){var e=t.slice(2);return"i"===t[1]&&u(e)?+e:e}function _(t){return null==t?t:(Ks.hasOwnProperty(t)||(Ks[t]=new Gs(t)),Ks[t])}function A(t,e){function n(e,n){var i,r,s;return n.isRoot?s=[].concat(Object.keys(t.viewmodel.data),Object.keys(t.viewmodel.mappings),Object.keys(t.viewmodel.computations)):(i=t.viewmodel.wrapped[n.str],r=i?i.get():t.viewmodel.get(n),s=r?Object.keys(r):null),s&&s.forEach(function(t){"_ractive"===t&&o(r)||e.push(n.join(t))}),e}var i,r,s;for(i=e.str.split("."),s=[Ys];r=i.shift();)"*"===r?s=s.reduce(n,[]):s[0]===Ys?s[0]=_(r):s=s.map(C(r));return s}function C(t){return function(e){return e.join(t)}}function O(t){return t?t.replace(zs,".$1"):""}function S(t,e,n){if("string"!=typeof e||!u(n))throw new Error("Bad arguments");var i=void 0,r=void 0;if(/\*/.test(e))return r={},A(t,_(O(e))).forEach(function(e){var i=t.viewmodel.get(e);if(!u(i))throw new Error(Zs);r[e.str]=i+n}),t.set(r);if(i=t.get(e),!u(i))throw new Error(Zs);return t.set(e,+i+n)}function T(t,e){return Js(this,t,void 0===e?1:+e)}function F(t){this.event=t,this.method="on"+t,this.deprecate=ia[t]}function j(t,e){var n=t.indexOf(e);-1===n&&t.push(e)}function P(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]==e)return!0;return!1}function R(t,e){var n;if(!o(t)||!o(e))return!1;if(t.length!==e.length)return!1;for(n=t.length;n--;)if(t[n]!==e[n])return!1;return!0}function N(t){return"string"==typeof t?[t]:void 0===t?[]:t}function L(t){return t[t.length-1]}function V(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}function I(t){for(var e=[],n=t.length;n--;)e[n]=t[n];return e}function D(t){setTimeout(t,0)}function M(t,e){return function(){for(var n;n=t.shift();)n(e)}}function U(t,e,n,i){var r;if(e===t)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(e instanceof ra)e.then(n,i);else if(!e||"object"!=typeof e&&"function"!=typeof e)n(e);else{try{r=e.then}catch(o){return void i(o)}if("function"==typeof r){var s,a,u;a=function(e){s||(s=!0,U(t,e,n,i))},u=function(t){s||(s=!0,i(t))};try{r.call(e,a,u)}catch(o){if(!s)return i(o),void(s=!0)}}else n(e)}}function B(t,e,n){var i;return e=O(e),"~/"===e.substr(0,2)?(i=_(e.substring(2)),Q(t,i.firstKey,n)):"."===e[0]?(i=q(ca(n),e),i&&Q(t,i.firstKey,n)):i=W(t,_(e),n),i}function q(t,e){var n;if(void 0!=t&&"string"!=typeof t&&(t=t.str),"."===e)return _(t);if(n=t?t.split("."):[],"../"===e.substr(0,3)){for(;"../"===e.substr(0,3);){if(!n.length)throw new Error('Could not resolve reference - too many "../" prefixes');n.pop(),e=e.substring(3)}return n.push(e),_(n.join("."))}return _(t?t+e.replace(/^\.\//,"."):e.replace(/^\.\/?/,""))}function W(t,e,n,i){var r,o,s,a,u;if(e.isRoot)return e;for(o=e.firstKey;n;)if(r=n.context,n=n.parent,r&&(a=!0,s=t.viewmodel.get(r),s&&("object"==typeof s||"function"==typeof s)&&o in s))return r.join(e.str);return z(t.viewmodel,o)?e:t.parent&&!t.isolated&&(a=!0,n=t.component.parentFragment,o=_(o),u=W(t.parent,o,n,!0))?(t.viewmodel.map(o,{origin:t.parent.viewmodel,keypath:u}),e):i||a?void 0:(t.viewmodel.set(e,void 0),e)}function Q(t,e){var n;!t.parent||t.isolated||z(t.viewmodel,e)||(e=_(e),(n=W(t.parent,e,t.component.parentFragment,!0))&&t.viewmodel.map(e,{origin:t.parent.viewmodel,keypath:n}))}function z(t,e){return""===e||e in t.data||e in t.computations||e in t.mappings}function H(t){t.teardown()}function K(t){t.unbind()}function G(t){t.unrender()}function $(t){t.cancel()}function Y(t){t.detach()}function J(t){t.detachNodes()}function Z(t){!t.ready||t.outros.length||t.outroChildren||(t.outrosComplete||(t.parent?t.parent.decrementOutros(t):t.detachNodes(),t.outrosComplete=!0),t.intros.length||t.totalChildren||("function"==typeof t.callback&&t.callback(),t.parent&&t.parent.decrementTotal()))}function X(){for(var t,e,n;da.ractives.length;)e=da.ractives.pop(),n=e.viewmodel.applyChanges(),n&&ga.fire(e,n);for(tt(),t=0;t<da.views.length;t+=1)da.views[t].update();for(da.views.length=0,t=0;t<da.tasks.length;t+=1)da.tasks[t]();return da.tasks.length=0,da.ractives.length?X():void 0}function tt(){var t,e,n,i;for(t=va.length;t--;)e=va[t],e.keypath?va.splice(t,1):(n=la(e.root,e.ref,e.parentFragment))&&((i||(i=[])).push({item:e,keypath:n}),va.splice(t,1));i&&i.forEach(et)}function et(t){t.item.resolve(t.keypath)}function nt(t,e,n){var i,r,o,s,a,u,h,c,l,f,d,p,m,v;if(i=new ha(function(t){return r=t}),"object"==typeof t){n=e||{},u=n.easing,h=n.duration,a=[],c=n.step,l=n.complete,(c||l)&&(d={},n.step=null,n.complete=null,f=function(t){return function(e,n){d[t]=n}});for(o in t)t.hasOwnProperty(o)&&((c||l)&&(p=f(o),n={easing:u,duration:h},c&&(n.step=p)),n.complete=l?p:xs,a.push(it(this,o,t[o],n)));return v={easing:u,duration:h},c&&(v.step=function(t){return c(t,d)}),l&&i.then(function(t){return l(t,d)}),v.complete=r,m=it(this,null,null,v),a.push(m),i.stop=function(){for(var t;t=a.pop();)t.stop();m&&m.stop()},i}return n=n||{},n.complete&&i.then(n.complete),n.complete=r,s=it(this,t,e,n),i.stop=function(){return s.stop()},i}function it(t,e,n,i){var r,o,s,u;return e&&(e=_(O(e))),null!==e&&(u=t.viewmodel.get(e)),ka.abort(e,t),a(u,n)?(i.complete&&i.complete(i.to),Aa):(i.easing&&(r="function"==typeof i.easing?i.easing:t.easing[i.easing],"function"!=typeof r&&(r=null)),o=void 0===i.duration?400:i.duration,s=new xa({keypath:e,from:u,to:n,root:t,duration:o,easing:r,interpolator:i.interpolator,step:i.step,complete:i.complete}),ka.add(s),t._animations.push(s),s)}function rt(){return this.detached?this.detached:(this.el&&V(this.el.__ractive_instances__,this),this.detached=this.fragment.detach(),Oa.fire(this),this.detached)}function ot(t){return this.el?this.fragment.find(t):null}function st(t,e){var n;return n=this._isComponentQuery?!this.selector||t.name===this.selector:t.node?fs(t.node,this.selector):null,n?(this.push(t.node||t.instance),e||this._makeDirty(),!0):void 0}function at(t){var e;return(e=t.parentFragment)?e.owner:t.component&&(e=t.component.parentFragment)?e.owner:void 0}function ut(t){var e,n;for(e=[t],n=at(t);n;)e.push(n),n=at(n);return e}function ht(t,e,n,i){var r=[];return Cs(r,{selector:{value:e},live:{value:n},_isComponentQuery:{value:i},_test:{value:Ta}}),n?(Cs(r,{cancel:{value:Fa},_root:{value:t},_sort:{value:Ra},_makeDirty:{value:Na},_remove:{value:La},_dirty:{value:!1,writable:!0}}),r):r}function ct(t,e){var n,i;return this.el?(e=e||{},n=this._liveQueries,(i=n[t])?e&&e.live?i:i.slice():(i=Va(this,t,!!e.live,!1),i.live&&(n.push(t),n["_"+t]=i),this.fragment.findAll(t,i),i)):[]}function lt(t,e){var n,i;return e=e||{},n=this._liveComponentQueries,(i=n[t])?e&&e.live?i:i.slice():(i=Va(this,t,!!e.live,!0),i.live&&(n.push(t),n["_"+t]=i),this.fragment.findAllComponents(t,i),i)}function ft(t){return this.fragment.findComponent(t)}function dt(t){return this.container?this.container.component&&this.container.component.name===t?this.container:this.container.findContainer(t):null}function pt(t){return this.parent?this.parent.component&&this.parent.component.name===t?this.parent:this.parent.findParent(t):null}function mt(t,e){var n=void 0===arguments[2]?{}:arguments[2];if(e){n.event?n.event.name=e:n.event={name:e,_noArg:!0};var i=_(e).wildcardMatches();vt(t,i,n.event,n.args,!0)}}function vt(t,e,n,i){var r,o,s=void 0===arguments[4]?!1:arguments[4],a=!0;for(Wa.enqueue(t,n),o=e.length;o>=0;o--)r=t._subs[e[o]],r&&(a=gt(t,r,n,i)&&a);if(Wa.dequeue(t),t.parent&&a){if(s&&t.component){var u=t.component.name+"."+e[e.length-1];e=_(u).wildcardMatches(),n&&(n.component=t)}vt(t.parent,e,n,i)}}function gt(t,e,n,i){var r=null,o=!1;n&&!n._noArg&&(i=[n].concat(i)),e=e.slice();for(var s=0,a=e.length;a>s;s+=1)e[s].apply(t,i)===!1&&(o=!0);return n&&!n._noArg&&o&&(r=n.original)&&(r.preventDefault&&r.preventDefault(),r.stopPropagation&&r.stopPropagation()),!o}function yt(t){var e={args:Array.prototype.slice.call(arguments,1)};Qa(this,t,e)}function bt(t){var e;return t=_(O(t)),e=this.viewmodel.get(t,Ka),void 0===e&&this.parent&&!this.isolated&&la(this,t.str,this.component.parentFragment)&&(e=this.viewmodel.get(t)),e}function wt(e,n){if(!this.fragment.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(e=t(e),n=t(n)||null,!e)throw new Error("You must specify a valid target to insert into");e.insertBefore(this.detach(),n),this.el=e,(e.__ractive_instances__||(e.__ractive_instances__=[])).push(this),this.detached=null,kt(this)}function kt(t){$a.fire(t),t.findAllComponents("*").forEach(function(t){kt(t.instance)})}function Et(t,e,n){var i,r;return t=_(O(t)),i=this.viewmodel.get(t),o(i)&&o(e)?(r=ya.start(this,!0),this.viewmodel.merge(t,i,e,n),ya.end(),r):this.set(t,e,n&&n.complete)}function xt(t,e){var n,i;return n=A(t,e),i={},n.forEach(function(e){i[e.str]=t.get(e.str)}),i}function _t(t,e,n,i){var r,o,s;e=_(O(e)),i=i||cu,e.isPattern?(r=new uu(t,e,n,i),t.viewmodel.patternObservers.push(r),o=!0):r=new Xa(t,e,n,i),r.init(i.init),t.viewmodel.register(e,r,o?"patternObservers":"observers"),r.ready=!0;var a={cancel:function(){var n;s||(o?(n=t.viewmodel.patternObservers.indexOf(r),t.viewmodel.patternObservers.splice(n,1),t.viewmodel.unregister(e,r,"patternObservers")):t.viewmodel.unregister(e,r,"observers"),s=!0)}};return t._observers.push(a),a}function At(t,e,n){var i,r,o,s;if(h(t)){n=e,r=t,i=[];for(t in r)r.hasOwnProperty(t)&&(e=r[t],i.push(this.observe(t,e,n)));return{cancel:function(){for(;i.length;)i.pop().cancel()}}}if("function"==typeof t)return n=e,e=t,t="",hu(this,t,e,n);if(o=t.split(" "),1===o.length)return hu(this,t,e,n);for(i=[],s=o.length;s--;)t=o[s],t&&i.push(hu(this,t,e,n));return{cancel:function(){for(;i.length;)i.pop().cancel()}}}function Ct(t,e,n){var i=this.observe(t,function(){e.apply(this,arguments),i.cancel()},{init:!1,defer:n&&n.defer});return i}function Ot(t,e){var n,i=this;if(t)n=t.split(" ").map(du).filter(pu),n.forEach(function(t){var n,r;(n=i._subs[t])&&(e?(r=n.indexOf(e),-1!==r&&n.splice(r,1)):i._subs[t]=[])});else for(t in this._subs)delete this._subs[t];return this}function St(t,e){var n,i,r,o=this;if("object"==typeof t){n=[];for(i in t)t.hasOwnProperty(i)&&n.push(this.on(i,t[i]));return{cancel:function(){for(var t;t=n.pop();)t.cancel()}}}return r=t.split(" ").map(du).filter(pu),r.forEach(function(t){(o._subs[t]||(o._subs[t]=[])).push(e)}),{cancel:function(){return o.off(t,e)}}}function Tt(t,e){var n=this.on(t,function(){e.apply(this,arguments),n.cancel()});return n}function Ft(t,e,n){var i,r,o,s,a,u,h=[];if(i=jt(t,e,n),!i)return null;for(r=t.length,a=i.length-2-i[1],o=Math.min(r,i[0]),s=o+i[1],u=0;o>u;u+=1)h.push(u);for(;s>u;u+=1)h.push(-1);for(;r>u;u+=1)h.push(u+a);return h.touchedFrom=0!==a?i[0]:t.length,h}function jt(t,e,n){switch(e){case"splice":for(void 0!==n[0]&&n[0]<0&&(n[0]=t.length+Math.max(n[0],-t.length));n.length<2;)n.push(0);return n[1]=Math.min(n[1],t.length-n[0]),n;case"sort":case"reverse":return null;case"pop":return t.length?[t.length-1,1]:[0,0];case"push":return[t.length,0].concat(n);case"shift":return[0,t.length?1:0];case"unshift":return[0,0].concat(n)}}function Pt(e,n){var i,r,o,s=this;if(o=this.transitionsEnabled,this.noIntro&&(this.transitionsEnabled=!1),i=ya.start(this,!0),ya.scheduleTask(function(){return ju.fire(s)},!0),this.fragment.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");if(e=t(e)||this.el,n=t(n)||this.anchor,this.el=e,this.anchor=n,!this.append&&e){var a=e.__ractive_instances__;a&&a.length&&Rt(a),e.innerHTML=""}return this.cssId&&Tu.apply(),e&&((r=e.__ractive_instances__)?r.push(this):e.__ractive_instances__=[this],n?e.insertBefore(this.fragment.render(),n):e.appendChild(this.fragment.render())),ya.end(),this.transitionsEnabled=o,i.then(function(){return Pu.fire(s)})}function Rt(t){t.splice(0,t.length).forEach(H)}function Nt(t,e){for(var n=t.slice(),i=e.length;i--;)~n.indexOf(e[i])||n.push(e[i]);return n}function Lt(t,e){var n,i,r;return i='[data-ractive-css~="{'+e+'}"]',r=function(t){var e,n,r,o,s,a,u,h=[];for(e=[];n=Du.exec(t);)e.push({str:n[0],base:n[1],modifiers:n[2]});for(o=e.map(It),u=e.length;u--;)a=o.slice(),r=e[u],a[u]=r.base+i+r.modifiers||"",s=o.slice(),s[u]=i+" "+s[u],h.push(a.join(" "),s.join(" "));return h.join(", ")},n=Uu.test(t)?t.replace(Uu,i):t.replace(Iu,"").replace(Vu,function(t,e){var n,i;return Mu.test(e)?t:(n=e.split(",").map(Vt),i=n.map(r).join(", ")+" ",t.replace(e,i))})}function Vt(t){return t.trim?t.trim():t.replace(/^\s+/,"").replace(/\s+$/,"")}function It(t){return t.str}function Dt(t){t&&t.constructor!==Object&&("function"==typeof t||("object"!=typeof t?l("data option must be an object or a function, `"+t+"` is not valid"):m("If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged")))}function Mt(t,e){Dt(e);var n="function"==typeof t,i="function"==typeof e;return e||n||(e={}),n||i?function(){var r=i?Ut(e,this):e,o=n?Ut(t,this):t;return Bt(r,o)}:Bt(e,t)}function Ut(t,e){var n=t.call(e);if(n)return"object"!=typeof n&&l("Data function must return an object"),n.constructor!==Object&&v("Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged"),n}function Bt(t,e){if(t&&e){for(var n in e)n in t||(t[n]=e[n]);return t}return t||e}function qt(t){var e=_s(Gu);return e.parse=function(e,n){return Wt(e,n||t)},e}function Wt(t,e){if(!Hu)throw new Error("Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser");return Hu(t,e||this.options)}function Qt(t,e){var n;if(!Xo){if(e&&e.noThrow)return;throw new Error("Cannot retrieve template #"+t+" as Ractive is not running in a browser.")}if(zt(t)&&(t=t.substring(1)),!(n=document.getElementById(t))){if(e&&e.noThrow)return;throw new Error("Could not find template element with id #"+t)}if("SCRIPT"!==n.tagName.toUpperCase()){if(e&&e.noThrow)return;throw new Error("Template element with id #"+t+", must be a <script> element")}return"textContent"in n?n.textContent:n.innerHTML}function zt(t){return t&&"#"===t[0]}function Ht(t){return!("string"==typeof t)}function Kt(t){return t.defaults&&(t=t.defaults),Ku.reduce(function(e,n){return e[n]=t[n],e},{})}function Gt(t){var e,n=t._config.template;if(n&&n.fn)return e=$t(t,n.fn),e!==n.result?(n.result=e,e=Jt(e,t)):void 0}function $t(t,e){var n=Yt($u.getParseOptions(t));return e.call(t,n)}function Yt(t){var e=_s($u);return e.parse=function(e,n){return $u.parse(e,n||t)},e}function Jt(t,e){if("string"==typeof t)"#"===t[0]&&(t=$u.fromId(t)),t=Hu(t,$u.getParseOptions(e));else{if(void 0==t)throw new Error("The template cannot be "+t+".");if("number"!=typeof t.v)throw new Error("The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.");if(t.v!==ss)throw new Error("Mismatched template version (expected "+ss+", got "+t.v+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app")}return t}function Zt(t,e,n){if(e)for(var i in e)(n||!t.hasOwnProperty(i))&&(t[i]=e[i])}function Xt(t,e,n){if(!/_super/.test(n))return n;var i=function(){var t,r=te(i._parent,e),o="_super"in this,s=this._super;return this._super=r,t=n.apply(this,arguments),o?this._super=s:delete this._super,t};return i._parent=t,i._method=n,i}function te(t,e){var n,i;return e in t?(n=t[e],i="function"==typeof n?n:function(){return n}):i=xs,i}function ee(t,e,n){return"options."+t+" has been deprecated in favour of options."+e+"."+(n?" You cannot specify both options, please use options."+e+".":"")}function ne(t,e,n){if(e in t){if(n in t)throw new Error(ee(e,n,!0));m(ee(e,n)),t[n]=t[e]}}function ie(t){ne(t,"beforeInit","onconstruct"),ne(t,"init","onrender"),ne(t,"complete","oncomplete"),ne(t,"eventDefinitions","events"),o(t.adaptors)&&ne(t,"adaptors","adapt")}function re(t,e,n,i){sh(i);for(var r in i)if(ih.hasOwnProperty(r)){var o=i[r];"el"!==r&&"function"==typeof o?m(""+r+" is a Ractive option that does not expect a function and will be ignored","init"===t?n:null):n[r]=o}rh.forEach(function(r){r[t](e,n,i)}),Nu[t](e,n,i),Ju[t](e,n,i),Wu[t](e,n,i),oe(e.prototype,n,i)}function oe(t,e,n){for(var i in n)if(!nh[i]&&n.hasOwnProperty(i)){var r=n[i];"function"==typeof r&&(r=oh(t,i,r)),e[i]=r}}function se(t){var e={};return t.forEach(function(t){return e[t]=!0}),e}function ae(){this.dirtyValue=this.dirtyArgs=!0,this.bound&&"function"==typeof this.owner.bubble&&this.owner.bubble()}function ue(){var t;return 1===this.items.length?this.items[0].detach():(t=document.createDocumentFragment(),this.items.forEach(function(e){var n=e.detach();n&&t.appendChild(n)}),t)}function he(t){var e,n,i,r;if(this.items){for(n=this.items.length,e=0;n>e;e+=1)if(i=this.items[e],i.find&&(r=i.find(t)))return r;return null}}function ce(t,e){var n,i,r;if(this.items)for(i=this.items.length,n=0;i>n;n+=1)r=this.items[n],r.findAll&&r.findAll(t,e);return e}function le(t,e){var n,i,r;if(this.items)for(i=this.items.length,n=0;i>n;n+=1)r=this.items[n],r.findAllComponents&&r.findAllComponents(t,e);return e}function fe(t){var e,n,i,r;if(this.items){for(e=this.items.length,n=0;e>n;n+=1)if(i=this.items[n],i.findComponent&&(r=i.findComponent(t)))return r;return null}}function de(t){var e,n=t.index;return e=this.items[n+1]?this.items[n+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)}function pe(){return this.items&&this.items[0]?this.items[0].firstNode():null}function me(t){var e;return(e=t.matchPattern(tc))?{t:Nh,v:e}:null}function ve(t){var e;return(e=Zh(t))?ic.test(e.v)?e.v:'"'+e.v.replace(/"/g,'\\"')+'"':(e=Xh(t))?e.v:(e=t.matchPattern(ec))?e:void 0}function ge(t){var e,n,i;return t.allowWhitespace(),(e=nc(t))?(i={key:e},t.allowWhitespace(),t.matchString(":")?(t.allowWhitespace(),(n=t.read())?(i.value=n.v,i):null):null):null}function ye(t,e,n,i){return i=i||0,t.map(function(t){var r,o,s;return t.text?t.text:t.fragments?t.fragments.map(function(t){return ye(t.items,e,n,i)}).join(""):(r=n+"-"+i++,s=t.keypath&&(o=t.root.viewmodel.wrapped[t.keypath.str])?o.value:t.getValue(),e[r]=s,"${"+r+"}")}).join("")}function be(){var t,e,n,i;return this.dirtyArgs&&(e=dc(this.items,t={},this.root._guid),n=fc("["+e+"]",t),i=n?n.value:[this.toString()],this.argsList=i,this.dirtyArgs=!1),this.argsList}function we(){var t=this;do if(t.pElement)return t.pElement.node;while(t=t.parent);return this.root.detached||this.root.el}function ke(){var t,e,n,i;return this.dirtyValue&&(e=dc(this.items,t={},this.root._guid),n=fc(e,t),i=n?n.value:this.toString(),this.value=i,this.dirtyValue=!1),this.value}function Ee(t){return t.replace(uc,function(t,e){var n;return n="#"!==e[0]?sc[e]:"x"===e[1]?parseInt(e.substring(2),16):parseInt(e.substring(1),10),n?String.fromCharCode(xe(n)):t})}function xe(t){return t?10===t?32:128>t?t:159>=t?ac[t-128]:55296>t?t:57343>=t?65533:65535>=t?t:65533:65533}function _e(t){return t.replace(lc,"&amp;").replace(hc,"&lt;").replace(cc,"&gt;")}function Ae(){this.registered&&this.root.viewmodel.unregister(this.keypath,this),this.resolver&&this.resolver.unbind()}function Ce(){return this.value}function Oe(t,e){for(var n,i=0;i<e.prop.length;i++)if(void 0!==(n=t[e.prop[i]]))return n}function Se(t,e){var n,i,r,o,s,a={},u=!1;for(e||(a.refs=n={});t;){if((s=t.owner)&&(i=s.indexRefs)){if(e&&(r=s.getIndexRef(e)))return a.ref={fragment:t,ref:r},a;if(!e)for(o in i)r=i[o],n[r.n]||(u=!0,n[r.n]={fragment:t,ref:r})}!t.parent&&t.owner&&t.owner.component&&t.owner.component.parentFragment&&!t.owner.component.instance.isolated?(a.componentBoundary=!0,t=t.owner.component.parentFragment):t=t.parent}return u?a:void 0}function Te(t,e,n){var i;return"@"===e.charAt(0)?new Cc(t,e,n):(i=Tc(t.parentFragment,e))?new Sc(t,i,n):new xc(t,e,n)}function Fe(t,e){var n,i;if(Rc[t])return Rc[t];for(i=[];e--;)i[e]="_"+e;return n=new Function(i.join(","),"return("+t+")"),Rc[t]=n,n}function je(t){return t.call()}function Pe(t,e){return t.replace(/_([0-9]+)/g,function(t,n){var i,r;return+n>=e.length?"_"+n:(i=e[n],void 0===i?"undefined":i.isSpecial?(r=i.value,"number"==typeof r?r:'"'+r+'"'):i.str)})}function Re(t){return _("${"+t.replace(/[\.\[\]]/g,"-").replace(/\*/,"#MUL#")+"}")}function Ne(t){return void 0!==t&&"@"!==t[0]}function Le(t,e){var n,i,r;if(t.__ractive_nowrap)return t;if(i="__ractive_"+e._guid,n=t[i])return n;if(/this/.test(t.toString())){As(t,i,{value:Nc.call(t,e),configurable:!0});for(r in t)t.hasOwnProperty(r)&&(t[i][r]=t[r]);return e._boundFunctions.push({fn:t,prop:i}),t[i]}return As(t,"__ractive_nowrap",{value:t}),t.__ractive_nowrap}function Ve(t){return t.value}function Ie(t){return void 0!=t}function De(t){t.forceResolution()}function Me(t,e){function n(e){t.resolve(e)}function i(e){var n=t.keypath;e!=n&&(t.resolve(e),void 0!==n&&t.fragments&&t.fragments.forEach(function(t){t.rebind(n,e)}))}var r,o,s;o=e.parentFragment,s=e.template,t.root=o.root,t.parentFragment=o,t.pElement=o.pElement,t.template=e.template,t.index=e.index||0,t.isStatic=e.template.s,t.type=e.template.t,t.registered=!1,(r=s.r)&&(t.resolver=jc(t,r,n)),e.template.x&&(t.resolver=new Lc(t,o,e.template.x,i)),e.template.rx&&(t.resolver=new Mc(t,e.template.rx,i)),t.template.n!==Dh||t.hasOwnProperty("value")||t.setValue(void 0)}function Ue(t){var e,n,i;return t&&t.isSpecial?(this.keypath=t,void this.setValue(t.value)):(this.registered&&(this.root.viewmodel.unregister(this.keypath,this),this.registered=!1,e=!0),this.keypath=t,void 0!=t&&(n=this.root.viewmodel.get(t),this.root.viewmodel.register(t,this),this.registered=!0),this.setValue(n),void(e&&(i=this.twowayBinding)&&i.rebound()))}function Be(t,e){this.fragments&&this.fragments.forEach(function(n){return n.rebind(t,e)}),this.resolver&&this.resolver.rebind(t,e)}function qe(){this.parentFragment.bubble()}function We(){var t;return 1===this.fragments.length?this.fragments[0].detach():(t=document.createDocumentFragment(),this.fragments.forEach(function(e){t.appendChild(e.detach())}),t)}function Qe(t){var e,n,i;for(n=this.fragments.length,e=0;n>e;e+=1)if(i=this.fragments[e].find(t))return i;return null}function ze(t,e){var n,i;for(i=this.fragments.length,n=0;i>n;n+=1)this.fragments[n].findAll(t,e)}function He(t,e){var n,i;for(i=this.fragments.length,n=0;i>n;n+=1)this.fragments[n].findAllComponents(t,e)}function Ke(t){var e,n,i;for(n=this.fragments.length,e=0;n>e;e+=1)if(i=this.fragments[e].findComponent(t))return i;return null}function Ge(t){return this.fragments[t.index+1]?this.fragments[t.index+1].firstNode():this.parentFragment.findNextNode(this)}function $e(){var t,e,n;if(t=this.fragments.length)for(e=0;t>e;e+=1)if(n=this.fragments[e].firstNode())return n;return this.parentFragment.findNextNode(this)}function Ye(t){var e,n,i,r,o,s,a,u=this;if(!this.shuffling&&!this.unbound&&this.currentSubtype===Mh){if(this.shuffling=!0,ya.scheduleTask(function(){return u.shuffling=!1}),e=this.parentFragment,o=[],t.forEach(function(t,e){var i,r,s,a,h;return t===e?void(o[t]=u.fragments[e]):(i=u.fragments[e],void 0===n&&(n=e),-1===t?(u.fragmentsToUnrender.push(i),void i.unbind()):(r=t-e,s=u.keypath.join(e),a=u.keypath.join(t),i.index=t,(h=i.registeredIndexRefs)&&h.forEach(Je),i.rebind(s,a),void(o[t]=i)))}),r=this.root.viewmodel.get(this.keypath).length,void 0===n){if(this.length===r)return;n=this.length}for(this.length=this.fragments.length=r,this.rendered&&ya.addView(this),s={template:this.template.f,root:this.root,owner:this},i=n;r>i;i+=1)a=o[i],a||this.fragmentsToCreate.push(i),this.fragments[i]=a}}function Je(t){t.rebind("","")}function Ze(){var t=this;return this.docFrag=document.createDocumentFragment(),this.fragments.forEach(function(e){return t.docFrag.appendChild(e.render())}),this.renderedFragments=this.fragments.slice(),this.fragmentsToRender=[],this.rendered=!0,this.docFrag}function Xe(t){var e,n,i=this;this.updating||(this.updating=!0,this.keypath&&(e=this.root.viewmodel.wrapped[this.keypath.str])&&(t=e.get()),this.fragmentsToCreate.length?(n={template:this.template.f||[],root:this.root,pElement:this.pElement,owner:this},this.fragmentsToCreate.forEach(function(t){var e;n.context=i.keypath.join(t),n.index=t,e=new rv(n),i.fragmentsToRender.push(i.fragments[t]=e)}),this.fragmentsToCreate.length=0):en(this,t)&&(this.bubble(),this.rendered&&ya.addView(this)),this.value=t,this.updating=!1)}function tn(t,e,n){if(e===Mh&&t.indexRefs&&t.indexRefs[0]){var i=t.indexRefs[0];(n&&"i"===i.t||!n&&"k"===i.t)&&(n||(t.length=0,t.fragmentsToUnrender=t.fragments.slice(0),t.fragmentsToUnrender.forEach(function(t){return t.unbind()}))),i.t=n?"k":"i"}t.currentSubtype=e}function en(t,e){var n={template:t.template.f||[],root:t.root,pElement:t.parentFragment.pElement,owner:t};if(t.hasContext=!0,t.subtype)switch(t.subtype){case Ih:return t.hasContext=!1,an(t,e,!1,n);case Dh:return t.hasContext=!1,an(t,e,!0,n);case Uh:return sn(t,n);case Bh:return on(t,e,n);case Mh:if(h(e))return tn(t,t.subtype,!0),rn(t,e,n)}return t.ordered=!!s(e),t.ordered?(tn(t,Mh,!1),nn(t,e,n)):h(e)||"function"==typeof e?t.template.i?(tn(t,Mh,!0),rn(t,e,n)):(tn(t,Uh,!1),sn(t,n)):(tn(t,Ih,!1),t.hasContext=!1,an(t,e,!1,n))}function nn(t,e,n){var i,r,o;if(r=e.length,r===t.length)return!1;if(r<t.length)t.fragmentsToUnrender=t.fragments.splice(r,t.length-r),t.fragmentsToUnrender.forEach(K);else if(r>t.length)for(i=t.length;r>i;i+=1)n.context=t.keypath.join(i),n.index=i,o=new rv(n),t.fragmentsToRender.push(t.fragments[i]=o);return t.length=r,!0}function rn(t,e,n){var i,r,o,s,a,u;for(o=t.hasKey||(t.hasKey={}),r=t.fragments.length;r--;)s=t.fragments[r],s.key in e||(a=!0,s.unbind(),t.fragmentsToUnrender.push(s),t.fragments.splice(r,1),o[s.key]=!1);for(r=t.fragments.length;r--;)s=t.fragments[r],s.index!==r&&(s.index=r,(u=s.registeredIndexRefs)&&u.forEach(cn));r=t.fragments.length;for(i in e)o[i]||(a=!0,n.context=t.keypath.join(i),n.key=i,n.index=r++,s=new rv(n),t.fragmentsToRender.push(s),t.fragments.push(s),o[i]=!0);return t.length=t.fragments.length,a}function on(t,e,n){return e?sn(t,n):un(t)}function sn(t,e){var n;return t.length?void 0:(e.context=t.keypath,e.index=0,n=new rv(e),t.fragmentsToRender.push(t.fragments[0]=n),t.length=1,!0)}function an(t,e,n,i){var r,o,a,u,c;if(o=s(e)&&0===e.length,a=!1,!s(e)&&h(e)){a=!0;for(c in e){a=!1;break}}return r=n?o||a||!e:e&&!o&&!a,r?t.length?t.length>1?(t.fragmentsToUnrender=t.fragments.splice(1),t.fragmentsToUnrender.forEach(K),!0):void 0:(i.index=0,u=new rv(i),t.fragmentsToRender.push(t.fragments[0]=u),t.length=1,!0):un(t)}function un(t){return t.length?(t.fragmentsToUnrender=t.fragments.splice(0,t.fragments.length).filter(hn),t.fragmentsToUnrender.forEach(K),t.length=t.fragmentsToRender.length=0,!0):void 0}function hn(t){return t.rendered}function cn(t){t.rebind("","")}function ln(t){var e,n,i;for(e="",n=0,i=this.length,n=0;i>n;n+=1)e+=this.fragments[n].toString(t);return e}function fn(){var t=this;this.fragments.forEach(K),this.fragmentsToRender.forEach(function(e){return V(t.fragments,e)}),this.fragmentsToRender=[],wc.call(this),this.length=0,this.unbound=!0}function dn(t){this.fragments.forEach(t?pn:mn),this.renderedFragments=[],this.rendered=!1}function pn(t){t.unrender(!0)}function mn(t){t.unrender(!1)}function vn(){var t,e,n,i,r,o,s;for(n=this.renderedFragments;t=this.fragmentsToUnrender.pop();)t.unrender(!0),n.splice(n.indexOf(t),1);for(;t=this.fragmentsToRender.shift();)t.render();for(this.rendered&&(r=this.parentFragment.getNode()),s=this.fragments.length,o=0;s>o;o+=1)t=this.fragments[o],e=n.indexOf(t,o),e!==o?(this.docFrag.appendChild(t.detach()),-1!==e&&n.splice(e,1),n.splice(o,0,t)):this.docFrag.childNodes.length&&(i=t.firstNode(),r.insertBefore(this.docFrag,i));this.rendered&&this.docFrag.childNodes.length&&(i=this.parentFragment.findNextNode(this),r.insertBefore(this.docFrag,i)),this.renderedFragments=this.fragments.slice()}function gn(){var t,e;if(this.docFrag){for(t=this.nodes.length,e=0;t>e;e+=1)this.docFrag.appendChild(this.nodes[e]);return this.docFrag}}function yn(t){var e,n,i,r;for(n=this.nodes.length,e=0;n>e;e+=1)if(i=this.nodes[e],1===i.nodeType){if(fs(i,t))return i;if(r=i.querySelector(t))return r}return null}function bn(t,e){var n,i,r,o,s,a;for(i=this.nodes.length,n=0;i>n;n+=1)if(r=this.nodes[n],1===r.nodeType&&(fs(r,t)&&e.push(r),o=r.querySelectorAll(t)))for(s=o.length,a=0;s>a;a+=1)e.push(o[a])}function wn(){return this.rendered&&this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)}function kn(t){return vl[t]||(vl[t]=ls(t))}function En(t){var e,n,i;t&&"select"===t.name&&t.binding&&(e=I(t.node.options).filter(xn),t.getAttribute("multiple")?i=e.map(function(t){return t.value}):(n=e[0])&&(i=n.value),void 0!==i&&t.binding.setValue(i),t.bubble())}function xn(t){return t.selected}function _n(){if(this.rendered)throw new Error("Attempted to render an item that was already rendered");return this.docFrag=document.createDocumentFragment(),this.nodes=gl(this.value,this.parentFragment.getNode(),this.docFrag),yl(this.pElement),this.rendered=!0,this.docFrag}function An(t){var e;(e=this.root.viewmodel.wrapped[this.keypath.str])&&(t=e.get()),t!==this.value&&(this.value=t,this.parentFragment.bubble(),this.rendered&&ya.addView(this))}function Cn(){return void 0!=this.value?Ee(""+this.value):""}function On(t){this.rendered&&t&&(this.nodes.forEach(e),this.rendered=!1)}function Sn(){var t,e;if(this.rendered){for(;this.nodes&&this.nodes.length;)t=this.nodes.pop(),
t.parentNode.removeChild(t);e=this.parentFragment.getNode(),this.nodes=gl(this.value,e,this.docFrag),e.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),yl(this.pElement)}}function Tn(){var t,e=this.node;return e?((t=e.parentNode)&&t.removeChild(e),e):void 0}function Fn(){return null}function jn(){return this.node}function Pn(t){return this.attributes&&this.attributes[t]?this.attributes[t].value:void 0}function Rn(){var t=this.useProperty||!this.rendered?this.fragment.getValue():this.fragment.toString();a(t,this.value)||("id"===this.name&&this.value&&delete this.root.nodes[this.value],this.value=t,"value"===this.name&&this.node&&(this.node._ractive.value=t),this.rendered&&ya.addView(this))}function Nn(t){var e=t.fragment.items;if(1===e.length)return e[0].type===_h?e[0]:void 0}function Ln(t){return this.type=Fh,this.element=t.element,this.root=t.root,Ql(this,t.name),this.isBoolean=rc.test(this.name),t.value&&"string"!=typeof t.value?(this.parentFragment=this.element.parentFragment,this.fragment=new rv({template:t.value,root:this.root,owner:this}),this.value=this.fragment.getValue(),this.interpolator=zl(this),this.isBindable=!!this.interpolator&&!this.interpolator.isStatic,void(this.ready=!0)):void(this.value=this.isBoolean?!0:t.value||"")}function Vn(t,e){this.fragment&&this.fragment.rebind(t,e)}function In(t){var e;this.node=t,t.namespaceURI&&t.namespaceURI!==is.html||(e=$l[this.name]||this.name,void 0!==t[e]&&(this.propertyName=e),(this.isBoolean||this.isTwoway)&&(this.useProperty=!0),"value"===e&&(t._ractive.value=this.value)),this.rendered=!0,this.update()}function Dn(){var t=this,e=t.name,n=t.namespacePrefix,i=t.value,r=t.interpolator,o=t.fragment;if(("value"!==e||"select"!==this.element.name&&"textarea"!==this.element.name)&&("value"!==e||void 0===this.element.getAttribute("contenteditable"))){if("name"===e&&"input"===this.element.name&&r)return"name={{"+(r.keypath.str||r.ref)+"}}";if(this.isBoolean)return i?e:"";if(o){if(1===o.items.length&&null==o.items[0].value)return"";i=o.toString()}return n&&(e=n+":"+e),i?e+'="'+Mn(i)+'"':e}}function Mn(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function Un(){this.fragment&&this.fragment.unbind(),"id"===this.name&&delete this.root.nodes[this.value]}function Bn(){var t,e,n,i,r=this.value;if(!this.locked)for(this.node._ractive.value=r,t=this.node.options,i=t.length;i--;)if(e=t[i],n=e._ractive?e._ractive.value:e.value,n==r){e.selected=!0;break}}function qn(){var t,e,n,i,r=this.value;for(o(r)||(r=[r]),t=this.node.options,e=t.length;e--;)n=t[e],i=n._ractive?n._ractive.value:n.value,n.selected=P(r,i)}function Wn(){var t=this,e=t.node,n=t.value;e.checked=n==e._ractive.value}function Qn(){var t,e,n,i,r=this.node;if(t=r.checked,r.value=this.element.getAttribute("value"),r.checked=this.element.getAttribute("value")===this.element.getAttribute("name"),t&&!r.checked&&this.element.binding&&(n=this.element.binding.siblings,i=n.length)){for(;i--;){if(e=n[i],!e.element.node)return;if(e.element.node.checked)return ya.addRactive(e.root),e.handleChange()}this.root.viewmodel.set(e.keypath,void 0)}}function zn(){var t,e,n=this,i=n.element,r=n.node,s=n.value,a=i.binding;if(t=i.getAttribute("value"),o(s)){for(e=s.length;e--;)if(t==s[e])return void(a.isChecked=r.checked=!0);a.isChecked=r.checked=!1}else a.isChecked=r.checked=s==t}function Hn(){this.node.className=n(this.value)}function Kn(){var t=this,e=t.node,n=t.value;this.root.nodes[n]=e,e.id=n}function Gn(){var t,e;t=this.node,e=this.value,void 0===e&&(e=""),t.style.setAttribute("cssText",e)}function $n(){var t=this.value;void 0===t&&(t=""),this.locked||(this.node.innerHTML=t)}function Yn(){var t=this,e=t.node,n=t.value;e._ractive.value=n,this.locked||(e.value=void 0==n?"":n)}function Jn(){this.locked||(this.node[this.propertyName]=this.value)}function Zn(){var t=this,e=t.node,n=t.namespace,i=t.name,r=t.value,o=t.fragment;n?e.setAttributeNS(n,i,(o||r).toString()):this.isBoolean?r?e.setAttribute(i,""):e.removeAttribute(i):null==r?e.removeAttribute(i):e.setAttribute(i,(o||r).toString())}function Xn(){var t,e,n=this,i=n.name,r=n.element,o=n.node;"id"===i?e=of:"value"===i?"select"===r.name&&"value"===i?e=r.getAttribute("multiple")?Xl:Zl:"textarea"===r.name?e=uf:null!=r.getAttribute("contenteditable")?e=af:"input"===r.name&&(t=r.getAttribute("type"),e="file"===t?xs:"radio"===t&&r.binding&&"name"===r.binding.name?ef:uf):this.isTwoway&&"name"===i?"radio"===o.type?e=tf:"checkbox"===o.type&&(e=nf):"style"===i&&o.style.setAttribute?e=sf:"class"!==i||o.namespaceURI&&o.namespaceURI!==is.html?this.useProperty&&(e=hf):e=rf,e||(e=cf),this.update=e,this.update()}function ti(t,e){var n=e?"svg":"div";return df.innerHTML="<"+n+" "+t+"></"+n+">",I(df.childNodes[0].attributes)}function ei(t,e){for(var n=t.length;n--;)if(t[n].name===e.name)return!1;return!0}function ni(t){for(;t=t.parent;)if("form"===t.name)return t}function ii(){this._ractive.binding.handleChange()}function ri(){var t;Ef.call(this),t=this._ractive.root.viewmodel.get(this._ractive.binding.keypath),this.value=void 0==t?"":t}function oi(){var t=this._ractive.binding,e=this;t._timeout&&clearTimeout(t._timeout),t._timeout=setTimeout(function(){t.rendered&&Ef.call(e),t._timeout=void 0},t.element.lazy)}function si(t,e,n){var i=t+e+n;return Of[i]||(Of[i]=[])}function ai(t){return t.isChecked}function ui(t){return t.element.getAttribute("value")}function hi(t){var e,n,i,r,o,s=t.attributes;return t.binding&&(t.binding.teardown(),t.binding=null),(t.getAttribute("contenteditable")||s.contenteditable&&ci(s.contenteditable))&&ci(s.value)?n=Af:"input"===t.name?(e=t.getAttribute("type"),"radio"===e||"checkbox"===e?(i=ci(s.name),r=ci(s.checked),i&&r&&m("A radio input can have two-way binding on its name attribute, or its checked attribute - not both",{ractive:t.root}),i?n="radio"===e?jf:Rf:r&&(n="radio"===e?Tf:Lf)):"file"===e&&ci(s.value)?n=Bf:ci(s.value)&&(n="number"===e||"range"===e?qf:xf)):"select"===t.name&&ci(s.value)?n=t.getAttribute("multiple")?Mf:If:"textarea"===t.name&&ci(s.value)&&(n=xf),n&&(o=new n(t))&&o.keypath?o:void 0}function ci(t){return t&&t.isBindable}function li(){var t=this.getAction();t&&!this.hasListener?this.listen():!t&&this.hasListener&&this.unrender()}function fi(t){Qa(this.root,this.getAction(),{event:t})}function di(){return this.action.toString().trim()}function pi(t,e,n){var i,r,o,s=this;this.element=t,this.root=t.root,this.parentFragment=t.parentFragment,this.name=e,-1!==e.indexOf("*")&&(l('Only component proxy-events may contain "*" wildcards, <%s on-%s="..."/> is not valid',t.name,e),this.invalid=!0),n.m?(r=n.a.r,this.method=n.m,this.keypaths=[],this.fn=Pc(n.a.s,r.length),this.parentFragment=t.parentFragment,o=this.root,this.refResolvers=[],r.forEach(function(t,e){var n=void 0;(n=Gf.exec(t))?s.keypaths[e]={eventObject:!0,refinements:n[1]?n[1].split("."):[]}:s.refResolvers.push(jc(s,t,function(t){return s.resolve(e,t)}))}),this.fire=mi):(i=n.n||n,"string"!=typeof i&&(i=new rv({template:i,root:this.root,owner:this})),this.action=i,n.d?(this.dynamicParams=new rv({template:n.d,root:this.root,owner:this.element}),this.fire=gi):n.a&&(this.params=n.a,this.fire=vi))}function mi(t){var e,n,i;if(e=this.root,"function"!=typeof e[this.method])throw new Error('Attempted to call a non-existent method ("'+this.method+'")');n=this.keypaths.map(function(n){var i,r,o;if(void 0===n)return void 0;if(n.eventObject){if(i=t,r=n.refinements.length)for(o=0;r>o;o+=1)i=i[n.refinements[o]]}else i=e.viewmodel.get(n);return i}),Wa.enqueue(e,t),i=this.fn.apply(null,n),e[this.method].apply(e,i),Wa.dequeue(e)}function vi(t){Qa(this.root,this.getAction(),{event:t,args:this.params})}function gi(t){var e=this.dynamicParams.getArgsList();"string"==typeof e&&(e=e.substr(1,e.length-2)),Qa(this.root,this.getAction(),{event:t,args:e})}function yi(t){var e,n,i,r={};e=this._ractive,n=e.events[t.type],(i=Tc(n.element.parentFragment))&&(r=Tc.resolve(i)),n.fire({node:this,original:t,index:r,keypath:e.keypath.str,context:e.root.viewmodel.get(e.keypath)})}function bi(){var t,e=this.name;if(!this.invalid){if(t=g("events",this.root,e))this.custom=t(this.node,wi(e));else{if(!("on"+e in this.node||window&&"on"+e in window||ts))return void(Zf[e]||v(Ds(e,"event"),{node:this.node}));this.node.addEventListener(e,$f,!1)}this.hasListener=!0}}function wi(t){return Jf[t]||(Jf[t]=function(e){var n=e.node._ractive;e.index=n.index,e.keypath=n.keypath.str,e.context=n.root.viewmodel.get(n.keypath),n.events[t].fire(e)}),Jf[t]}function ki(t,e){function n(n){n&&n.rebind(t,e)}var i;return this.method?(i=this.element.parentFragment,void this.refResolvers.forEach(n)):("string"!=typeof this.action&&n(this.action),void(this.dynamicParams&&n(this.dynamicParams)))}function Ei(){this.node=this.element.node,this.node._ractive.events[this.name]=this,(this.method||this.getAction())&&this.listen()}function xi(t,e){this.keypaths[t]=e}function _i(){return this.method?void this.refResolvers.forEach(K):("string"!=typeof this.action&&this.action.unbind(),void(this.dynamicParams&&this.dynamicParams.unbind()))}function Ai(){this.custom?this.custom.teardown():this.node.removeEventListener(this.name,$f,!1),this.hasListener=!1}function Ci(){var t=this;this.dirty||(this.dirty=!0,ya.scheduleTask(function(){Oi(t),t.dirty=!1})),this.parentFragment.bubble()}function Oi(t){var e,n,i,r,o;e=t.node,e&&(r=I(e.options),n=t.getAttribute("value"),i=t.getAttribute("multiple"),void 0!==n?(r.forEach(function(t){var e,r;e=t._ractive?t._ractive.value:t.value,r=i?Si(n,e):n==e,r&&(o=!0),t.selected=r}),o||(r[0]&&(r[0].selected=!0),t.binding&&t.binding.forceUpdate())):t.binding&&t.binding.forceUpdate())}function Si(t,e){for(var n=t.length;n--;)if(t[n]==e)return!0}function Ti(t,e){t.select=ji(t.parent),t.select&&(t.select.options.push(t),e.a||(e.a={}),void 0!==e.a.value||e.a.hasOwnProperty("disabled")||(e.a.value=e.f),"selected"in e.a&&void 0!==t.select.getAttribute("value")&&delete e.a.selected)}function Fi(t){t.select&&V(t.select.options,t)}function ji(t){if(t)do if("select"===t.name)return t;while(t=t.parent)}function Pi(t){var e,n,i,r,o,s,a;this.type=Oh,e=this.parentFragment=t.parentFragment,n=this.template=t.template,this.parent=t.pElement||e.pElement,this.root=i=e.root,this.index=t.index,this.key=t.key,this.name=Wl(n.e),"option"===this.name&&Ti(this,n),"select"===this.name&&(this.options=[],this.bubble=Ci),"form"===this.name&&(this.formBindings=[]),a=Bl(this,n),this.attributes=mf(this,n.a),this.conditionalAttributes=yf(this,n.m),n.f&&(this.fragment=new rv({template:n.f,root:i,owner:this,pElement:this,cssIds:null})),s=i.twoway,a.twoway===!1?s=!1:a.twoway===!0&&(s=!0),this.twoway=s,this.lazy=a.lazy,s&&(r=Wf(this,n.a))&&(this.binding=r,o=this.root._twowayBindings[r.keypath.str]||(this.root._twowayBindings[r.keypath.str]=[]),o.push(r)),n.v&&(this.eventHandlers=sd(this,n.v)),n.o&&(this.decorator=new ld(this,n.o)),this.intro=n.t0||n.t1,this.outro=n.t0||n.t2}function Ri(t,e){function n(n){n.rebind(t,e)}var i,r,o,s;if(this.attributes&&this.attributes.forEach(n),this.conditionalAttributes&&this.conditionalAttributes.forEach(n),this.eventHandlers&&this.eventHandlers.forEach(n),this.decorator&&n(this.decorator),this.fragment&&n(this.fragment),o=this.liveQueries)for(s=this.root,i=o.length;i--;)o[i]._makeDirty();this.node&&(r=this.node._ractive)&&E(r,"keypath",t,e)}function Ni(t){var e;(t.attributes.width||t.attributes.height)&&t.node.addEventListener("load",e=function(){var n=t.getAttribute("width"),i=t.getAttribute("height");void 0!==n&&t.node.setAttribute("width",n),void 0!==i&&t.node.setAttribute("height",i),t.node.removeEventListener("load",e,!1)},!1)}function Li(t){t.node.addEventListener("reset",Ii,!1)}function Vi(t){t.node.removeEventListener("reset",Ii,!1)}function Ii(){var t=this._ractive.proxy;ya.start(),t.formBindings.forEach(Di),ya.end()}function Di(t){t.root.viewmodel.set(t.keypath,t.resetValue)}function Mi(t,e,n){var i,r,o;this.element=t,this.root=i=t.root,this.isIntro=n,r=e.n||e,("string"==typeof r||(o=new rv({template:r,root:i,owner:t}),r=o.toString(),o.unbind(),""!==r))&&(this.name=r,e.a?this.params=e.a:e.d&&(o=new rv({template:e.d,root:i,owner:t}),this.params=o.getArgsList(),o.unbind()),this._fn=g("transitions",i,r),this._fn||v(Ds(r,"transition"),{ractive:this.root}))}function Ui(t){return t}function Bi(){Bd.hidden=document[Id]}function qi(){Bd.hidden=!0}function Wi(){Bd.hidden=!1}function Qi(){var t,e,n,i=this;return t=this.node=this.element.node,e=t.getAttribute("style"),this.complete=function(r){n||(!r&&i.isIntro&&zi(t,e),t._ractive.transition=null,i._manager.remove(i),n=!0)},this._fn?void this._fn.apply(this.root,[this].concat(this.params)):void this.complete()}function zi(t,e){e?t.setAttribute("style",e):(t.getAttribute("style"),t.removeAttribute("style"))}function Hi(){var t,e,n,i=this,r=this.root;return t=Ki(this),e=this.node=ls(this.name,t),this.parentFragment.cssIds&&this.node.setAttribute("data-ractive-css",this.parentFragment.cssIds.map(function(t){return"{"+t+"}"}).join(" ")),As(this.node,"_ractive",{value:{proxy:this,keypath:ca(this.parentFragment),events:_s(null),root:r}}),this.attributes.forEach(function(t){return t.render(e)}),this.conditionalAttributes.forEach(function(t){return t.render(e)}),this.fragment&&("script"===this.name?(this.bubble=Zd,this.node.text=this.fragment.toString(!1),this.fragment.unrender=xs):"style"===this.name?(this.bubble=Jd,this.bubble(),this.fragment.unrender=xs):this.binding&&this.getAttribute("contenteditable")?this.fragment.unrender=xs:this.node.appendChild(this.fragment.render())),this.binding&&(this.binding.render(),this.node._ractive.binding=this.binding),this.eventHandlers&&this.eventHandlers.forEach(function(t){return t.render()}),"option"===this.name&&Gi(this),"img"===this.name?Ni(this):"form"===this.name?Li(this):"input"===this.name||"textarea"===this.name?this.node.defaultValue=this.node.value:"option"===this.name&&(this.node.defaultSelected=this.node.selected),this.decorator&&this.decorator.fn&&ya.scheduleTask(function(){i.decorator.torndown||i.decorator.init()},!0),r.transitionsEnabled&&this.intro&&(n=new Xd(this,this.intro,!0),ya.registerTransition(n),ya.scheduleTask(function(){return n.start()},!0),this.transition=n),this.node.autofocus&&ya.scheduleTask(function(){return i.node.focus()},!0),$i(this),this.node}function Ki(t){var e,n,i;return e=(n=t.getAttribute("xmlns"))?n:"svg"===t.name?is.svg:(i=t.parent)?"foreignObject"===i.name?is.html:i.node.namespaceURI:t.root.el.namespaceURI}function Gi(t){var e,n,i;if(t.select&&(n=t.select.getAttribute("value"),void 0!==n))if(e=t.getAttribute("value"),t.select.node.multiple&&o(n)){for(i=n.length;i--;)if(e==n[i]){t.node.selected=!0;break}}else t.node.selected=e==n}function $i(t){var e,n,i,r,o;e=t.root;do for(n=e._liveQueries,i=n.length;i--;)r=n[i],o=n["_"+r],o._test(t)&&(t.liveQueries||(t.liveQueries=[])).push(o);while(e=e.parent)}function Yi(t){var e,n,i;if(e=t.getAttribute("value"),void 0===e||!t.select)return!1;if(n=t.select.getAttribute("value"),n==e)return!0;if(t.select.getAttribute("multiple")&&o(n))for(i=n.length;i--;)if(n[i]==e)return!0}function Ji(t){var e,n,i,r;return e=t.attributes,n=e.type,i=e.value,r=e.name,n&&"radio"===n.value&&i&&r.interpolator&&i.value===r.interpolator.value?!0:void 0}function Zi(t){var e=t.toString();return e?" "+e:""}function Xi(){this.fragment&&this.fragment.unbind(),this.binding&&this.binding.unbind(),this.eventHandlers&&this.eventHandlers.forEach(K),"option"===this.name&&Fi(this),this.attributes.forEach(K),this.conditionalAttributes.forEach(K)}function tr(t){var e,n,i;(i=this.transition)&&i.complete(),"option"===this.name?this.detach():t&&ya.detachWhenReady(this),this.fragment&&this.fragment.unrender(!1),(e=this.binding)&&(this.binding.unrender(),this.node._ractive.binding=null,n=this.root._twowayBindings[e.keypath.str],n.splice(n.indexOf(e),1)),this.eventHandlers&&this.eventHandlers.forEach(G),this.decorator&&ya.registerDecorator(this.decorator),this.root.transitionsEnabled&&this.outro&&(i=new Xd(this,this.outro,!1),ya.registerTransition(i),ya.scheduleTask(function(){return i.start()})),this.liveQueries&&er(this),"form"===this.name&&Vi(this)}function er(t){var e,n,i;for(i=t.liveQueries.length;i--;)e=t.liveQueries[i],n=e.selector,e._remove(t.node)}function nr(t,e){var n=ap.exec(e)[0];return null===t||n.length<t.length?n:t}function ir(t,e,n){var i;if(i=rr(t,e,n||{}))return i;if(i=$u.fromId(e,{noThrow:!0})){i=up(i);var r=$u.parse(i,$u.getParseOptions(t));return t.partials[e]=r.t}}function rr(t,e,n){var i=void 0,r=ar(e,n.owner);if(r)return r;var o=y("partials",t,e);if(o){if(r=o.partials[e],"function"==typeof r&&(i=r.bind(o),i.isOwner=o.partials.hasOwnProperty(e),r=i.call(t,$u)),!r&&""!==r)return void m(Is,e,"partial","partial",{ractive:t});if(!$u.isParsed(r)){var s=$u.parse(r,$u.getParseOptions(o));s.p&&m("Partials ({{>%s}}) cannot contain nested inline partials",e,{ractive:t});var a=i?o:or(o,e);a.partials[e]=r=s.t}return i&&(r._fn=i),r.v?r.t:r}}function or(t,e){return t.partials.hasOwnProperty(e)?t:sr(t.constructor,e)}function sr(t,e){return t?t.partials.hasOwnProperty(e)?t:sr(t._Parent,e):void 0}function ar(t,e){if(e){if(e.template&&e.template.p&&e.template.p[t])return e.template.p[t];if(e.parentFragment&&e.parentFragment.owner)return ar(t,e.parentFragment.owner)}}function ur(t,e){var n,i=y("components",t,e);if(i&&(n=i.components[e],!n._Parent)){var r=n.bind(i);if(r.isOwner=i.components.hasOwnProperty(e),n=r(),!n)return void m(Is,e,"component","component",{ractive:t});"string"==typeof n&&(n=ur(t,n)),n._fn=r,i.components[e]=n}return n}function hr(){var t=this.instance.fragment.detach();return bp.fire(this.instance),t}function cr(t){return this.instance.fragment.find(t)}function lr(t,e){return this.instance.fragment.findAll(t,e)}function fr(t,e){e._test(this,!0),this.instance.fragment&&this.instance.fragment.findAllComponents(t,e)}function dr(t){return t&&t!==this.name?this.instance.fragment?this.instance.fragment.findComponent(t):null:this.instance}function pr(){return this.parentFragment.findNextNode(this)}function mr(){return this.rendered?this.instance.fragment.firstNode():null}function vr(t,e,n){function i(t){var n,i;t.value=e,t.updating||(i=t.ractive,n=t.keypath,t.updating=!0,ya.start(i),i.viewmodel.mark(n),ya.end(),t.updating=!1)}var r,o,s,a,u,h;if(r=t.obj,o=t.prop,n&&!n.configurable){if("length"===o)return;throw new Error('Cannot use magic mode with property "'+o+'" - object is not configurable')}n&&(s=n.get,a=n.set),u=s||function(){return e},h=function(t){a&&a(t),e=s?s():t,h._ractiveWrappers.forEach(i)},h._ractiveWrappers=[t],Object.defineProperty(r,o,{get:u,set:h,enumerable:!0,configurable:!0})}function gr(t,e){var n,i,r,o;if(this.adaptors)for(n=this.adaptors.length,i=0;n>i;i+=1)if(r=this.adaptors[i],r.filter(e,t,this.ractive))return o=this.wrapped[t]=r.wrap(this.ractive,e,t,br(t)),void(o.value=e)}function yr(t,e){var n,i={};if(!e)return t;e+=".";for(n in t)t.hasOwnProperty(n)&&(i[e+n]=t[n]);return i}function br(t){var e;return Wp[t]||(e=t?t+".":"",Wp[t]=function(n,i){var r;return"string"==typeof n?(r={},r[e+n]=i,r):"object"==typeof n?e?yr(n,t):n:void 0}),Wp[t]}function wr(t){var e,n,i=[Ys];for(e=t.length;e--;)for(n=t[e].parent;n&&!n.isRoot;)-1===t.indexOf(n)&&j(i,n),n=n.parent;return i}function kr(t,e,n){var i;xr(t,e),n||(i=e.wildcardMatches(),i.forEach(function(n){Er(t,n,e)}))}function Er(t,e,n){var i,r,o;e=e.str||e,i=t.depsMap.patternObservers,r=i&&i[e],r&&r.forEach(function(e){o=n.join(e.lastKey),xr(t,o),Er(t,e,o)})}function xr(t,e){t.patternObservers.forEach(function(t){t.regex.test(e.str)&&t.update(e)})}function _r(){function t(t){var i=t.key;t.viewmodel===s?(s.clearCache(i.str),t.invalidate(),n.push(i),e(i)):t.viewmodel.mark(i)}function e(n){var i,r;s.noCascade.hasOwnProperty(n.str)||((r=s.deps.computed[n.str])&&r.forEach(t),(i=s.depsMap.computed[n.str])&&i.forEach(e))}var n,i,r,o=this,s=this,a={};return n=this.changes,n.length?(n.slice().forEach(e),i=Qp(n),i.forEach(function(e){var i;-1===n.indexOf(e)&&(i=s.deps.computed[e.str])&&i.forEach(t)}),this.changes=[],this.patternObservers.length&&(i.forEach(function(t){return zp(o,t,!0)}),n.forEach(function(t){return zp(o,t)})),this.deps.observers&&(i.forEach(function(t){return Ar(o,null,t,"observers")}),Or(this,n,"observers")),this.deps["default"]&&(r=[],i.forEach(function(t){return Ar(o,r,t,"default")}),r.length&&Cr(this,r,n),Or(this,n,"default")),n.forEach(function(t){a[t.str]=o.get(t)}),this.implicitChanges={},this.noCascade={},a):void 0}function Ar(t,e,n,i){var r,o;(r=Sr(t,n,i))&&(o=t.get(n),r.forEach(function(t){e&&t.refineValue?e.push(t):t.setValue(o)}))}function Cr(t,e,n){e.forEach(function(e){for(var i=!1,r=0,o=n.length,s=[];o>r;){var a=n[r];if(a===e.keypath){i=!0;break}a.slice(0,e.keypath.length)===e.keypath&&s.push(a),r++}i&&e.setValue(t.get(e.keypath)),s.length&&e.refineValue(s)})}function Or(t,e,n){function i(t){t.forEach(r),t.forEach(o)}function r(e){var i=Sr(t,e,n);i&&a.push({keypath:e,deps:i})}function o(e){var r;(r=t.depsMap[n][e.str])&&i(r)}function s(e){var n=t.get(e.keypath);e.deps.forEach(function(t){return t.setValue(n)})}var a=[];i(e),a.forEach(s)}function Sr(t,e,n){var i=t.deps[n];return i?i[e.str]:null}function Tr(){this.captureGroups.push([])}function Fr(t,e){var n,i;if(e||(i=this.wrapped[t])&&i.teardown()!==!1&&(this.wrapped[t]=null),this.cache[t]=void 0,n=this.cacheMap[t])for(;n.length;)this.clearCache(n.pop())}function jr(t,e){var n=e.firstKey;return!(n in t.data||n in t.computations||n in t.mappings)}function Pr(t,e){var n=new Zp(t,e);return this.ready&&n.init(this),this.computations[t.str]=n}function Rr(t,e){var n,i,r,o,s,a=this.cache,u=t.str;if(e=e||nm,e.capture&&(o=L(this.captureGroups))&&(~o.indexOf(t)||o.push(t)),Ps.call(this.mappings,t.firstKey))return this.mappings[t.firstKey].get(t,e);if(t.isSpecial)return t.value;if(void 0===a[u]?((i=this.computations[u])&&!i.bypass?(n=i.get(),this.adapt(u,n)):(r=this.wrapped[u])?n=r.value:t.isRoot?(this.adapt("",this.data),n=this.data):n=Nr(this,t),a[u]=n):n=a[u],!e.noUnwrap&&(r=this.wrapped[u])&&(n=r.get()),t.isRoot&&e.fullRootGet)for(s in this.mappings)n[s]=this.mappings[s].getValue();return n===tm?void 0:n}function Nr(t,e){var n,i,r,o;return n=t.get(e.parent),(o=t.wrapped[e.parent.str])&&(n=o.get()),null!==n&&void 0!==n?((i=t.cacheMap[e.parent.str])?-1===i.indexOf(e.str)&&i.push(e.str):t.cacheMap[e.parent.str]=[e.str],"object"!=typeof n||e.lastKey in n?(r=n[e.lastKey],t.adapt(e.str,r,!1),t.cache[e.str]=r,r):t.cache[e.str]=tm):void 0}function Lr(){var t;for(t in this.computations)this.computations[t].init(this)}function Vr(t,e){var n=this.mappings[t.str]=new om(t,e);return n.initViewmodel(this),n}function Ir(t,e){var n,i=t.str;e&&(e.implicit&&(this.implicitChanges[i]=!0),e.noCascade&&(this.noCascade[i]=!0)),(n=this.computations[i])&&n.invalidate(),-1===this.changes.indexOf(t)&&this.changes.push(t);var r=e?e.keepExistingWrapper:!1;this.clearCache(i,r),this.ready&&this.onchange()}function Dr(t,e,n,i){var r,o,s,a;if(this.mark(t),i&&i.compare){s=Ur(i.compare);try{r=e.map(s),o=n.map(s)}catch(u){m('merge(): "%s" comparison failed. Falling back to identity checking',t),r=e,o=n}}else r=e,o=n;a=am(r,o),this.smartUpdate(t,n,a,e.length!==n.length)}function Mr(t){return JSON.stringify(t)}function Ur(t){if(t===!0)return Mr;if("string"==typeof t)return hm[t]||(hm[t]=function(e){return e[t]}),hm[t];if("function"==typeof t)return t;throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}function Br(t,e){var n,i,r,o=void 0===arguments[2]?"default":arguments[2];e.isStatic||((n=this.mappings[t.firstKey])?n.register(t,e,o):(i=this.deps[o]||(this.deps[o]={}),r=i[t.str]||(i[t.str]=[]),r.push(e),this.depsMap[o]||(this.depsMap[o]={}),t.isRoot||qr(this,t,o)))}function qr(t,e,n){for(var i,r,o;!e.isRoot;)i=t.depsMap[n],r=i[e.parent.str]||(i[e.parent.str]=[]),o=e.str,void 0===r["_"+o]&&(r["_"+o]=0,r.push(e)),r["_"+o]+=1,e=e.parent}function Wr(){return this.captureGroups.pop()}function Qr(t){this.data=t,this.clearCache("")}function zr(t,e){var n,i,r,o,s=void 0===arguments[2]?{}:arguments[2];if(!s.noMapping&&(n=this.mappings[t.firstKey]))return n.set(t,e);if(i=this.computations[t.str]){if(i.setting)return;i.set(e),e=i.get()}a(this.cache[t.str],e)||(r=this.wrapped[t.str],r&&r.reset&&(o=r.reset(e)!==!1,o&&(e=r.get())),i||o||Hr(this,t,e),s.silent?this.clearCache(t.str):this.mark(t))}function Hr(t,e,n){var i,r,o,s;o=function(){i.set?i.set(e.lastKey,n):(r=i.get(),s())},s=function(){r||(r=Ip(e.lastKey),t.set(e.parent,r,{silent:!0})),r[e.lastKey]=n},i=t.wrapped[e.parent.str],i?o():(r=t.get(e.parent),(i=t.wrapped[e.parent.str])?o():s())}function Kr(t,e,n){var i,r,o,s=this;if(r=n.length,n.forEach(function(e,n){-1===e&&s.mark(t.join(n),vm)}),this.set(t,e,{silent:!0}),(i=this.deps["default"][t.str])&&i.filter(Gr).forEach(function(t){return t.shuffle(n,e)}),r!==e.length){for(this.mark(t.join("length"),mm),o=n.touchedFrom;o<e.length;o+=1)this.mark(t.join(o));for(o=e.length;r>o;o+=1)this.mark(t.join(o),vm)}}function Gr(t){return"function"==typeof t.shuffle}function $r(){var t,e=this;for(Object.keys(this.cache).forEach(function(t){return e.clearCache(t)});t=this.unresolvedImplicitDependencies.pop();)t.teardown()}function Yr(t,e){var n,i,r,o=void 0===arguments[2]?"default":arguments[2];if(!e.isStatic){if(n=this.mappings[t.firstKey])return n.unregister(t,e,o);if(i=this.deps[o][t.str],r=i.indexOf(e),-1===r)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");i.splice(r,1),t.isRoot||Jr(this,t,o)}}function Jr(t,e,n){for(var i,r;!e.isRoot;)i=t.depsMap[n],r=i[e.parent.str],r["_"+e.str]-=1,r["_"+e.str]||(V(r,e),r["_"+e.str]=void 0),e=e.parent}function Zr(t){this.hook=new oa(t),this.inProcess={},this.queue={}}function Xr(t,e){return t[e._guid]||(t[e._guid]=[])}function to(t,e){var n=Xr(t.queue,e);for(t.hook.fire(e);n.length;)to(t,n.shift());delete t.queue[e._guid]}function eo(t,e){var n,i={};for(n in e)i[n]=no(t,n,e[n]);return i}function no(t,e,n){var i,r;return"function"==typeof n&&(i=ro(n,t)),"string"==typeof n&&(i=io(t,n)),"object"==typeof n&&("string"==typeof n.get?i=io(t,n.get):"function"==typeof n.get?i=ro(n.get,t):l("`%s` computation must have a `get()` method",e),"function"==typeof n.set&&(r=ro(n.set,t))),{getter:i,setter:r}}function io(t,e){var n,i,r;return n="return ("+e.replace(xm,function(t,e){return i=!0,'__ractive.get("'+e+'")'})+");",i&&(n="var __ractive = this; "+n),r=new Function(n),i?r.bind(t):r}function ro(t,e){return/this/.test(t.toString())?t.bind(e):t}function oo(e){var n,r,o=void 0===arguments[1]?{}:arguments[1],s=void 0===arguments[2]?{}:arguments[2];if(Pv.DEBUG&&js(),uo(e,s),As(e,"data",{get:ho}),_m.fire(e,o),Sm.forEach(function(t){e[t]=i(_s(e.constructor[t]||null),o[t])}),r=new wm({adapt:so(e,e.adapt,o),data:zu.init(e.constructor,e,o),computed:Em(e,i(_s(e.constructor.prototype.computed),o.computed)),mappings:s.mappings,ractive:e,onchange:function(){return ya.addRactive(e)}}),e.viewmodel=r,r.init(),hh.init(e.constructor,e,o),Am.fire(e),Cm.begin(e),e.template){var a=void 0;(s.cssIds||e.cssId)&&(a=s.cssIds?s.cssIds.slice():[],e.cssId&&a.push(e.cssId)),e.fragment=new rv({template:e.template,root:e,owner:e,cssIds:a})}if(Cm.end(e),n=t(e.el)){var u=e.render(n,e.append);Pv.DEBUG_PROMISES&&u["catch"](function(t){throw v("Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;"),m("An error happened during rendering",{ractive:e}),t.stack&&f(t.stack),t})}}function so(t,e,n){function i(e){return"string"==typeof e&&(e=g("adaptors",t,e),e||l(Ds(e,"adaptor"))),e}var r,o,s;if(e=e.map(i),r=N(n.adapt).map(i),r=ao(e,r),o="magic"in n?n.magic:t.magic,s="modifyArrays"in n?n.modifyArrays:t.modifyArrays,o){if(!ns)throw new Error("Getters and setters (magic mode) are not supported in this browser");s&&r.push(Bp),r.push(Up)}return s&&r.push(Lp),r}function ao(t,e){for(var n=t.slice(),i=e.length;i--;)~n.indexOf(e[i])||n.push(e[i]);return n}function uo(t,e){t._guid="r-"+Om++,t._subs=_s(null),t._config={},t._twowayBindings=_s(null),t._animations=[],t.nodes={},t._liveQueries=[],t._liveComponentQueries=[],t._boundFunctions=[],t._observers=[],e.component?(t.parent=e.parent,t.container=e.container||null,t.root=t.parent.root,t.component=e.component,e.component.instance=t,t._inlinePartials=e.inlinePartials):(t.root=t,t.parent=t.container=null)}function ho(){throw new Error("Using `ractive.data` is no longer supported - you must use the `ractive.get()` API instead")}function co(t,e,n){this.parentFragment=t.parentFragment,this.callback=n,this.fragment=new rv({template:e,root:t.root,owner:this}),this.update()}function lo(t,e,n){var i;return e.r?i=jc(t,e.r,n):e.x?i=new Lc(t,t.parentFragment,e.x,n):e.rx&&(i=new Mc(t,e.rx,n)),i}function fo(t){return 1===t.length&&t[0].t===_h}function po(t,e){var n;for(n in e)e.hasOwnProperty(n)&&mo(t.instance,t.root,n,e[n])}function mo(t,e,n,i){"string"!=typeof i&&l("Components currently only support simple events - you cannot include arguments. Sorry!"),t.on(n,function(){var t,n;return arguments.length&&arguments[0]&&arguments[0].node&&(t=Array.prototype.shift.call(arguments)),n=Array.prototype.slice.call(arguments),Qa(e,i,{event:t,args:n}),!1})}function vo(t,e){var n,i;if(!e)throw new Error('Component "'+this.name+'" not found');n=this.parentFragment=t.parentFragment,i=n.root,this.root=i,this.type=jh,this.name=t.template.e,this.index=t.index,this.indexRefBindings={},this.yielders={},this.resolvers=[],jm(this,e,t.template.a,t.template.f,t.template.p),Pm(this,t.template.v),(t.template.t0||t.template.t1||t.template.t2||t.template.o)&&m('The "intro", "outro" and "decorator" directives have no effect on components',{ractive:this.instance}),Rm(this)}function go(t,e){function n(n){n.rebind(t,e)}var i;this.resolvers.forEach(n);for(var r in this.yielders)this.yielders[r][0]&&n(this.yielders[r][0]);(i=this.root._liveComponentQueries["_"+this.name])&&i._makeDirty()}function yo(){var t=this.instance;return t.render(this.parentFragment.getNode()),this.rendered=!0,t.fragment.detach()}function bo(){return this.instance.fragment.toString()}function wo(){var t=this.instance;this.resolvers.forEach(K),ko(this),t._observers.forEach($),t.fragment.unbind(),t.viewmodel.teardown(),t.fragment.rendered&&t.el.__ractive_instances__&&V(t.el.__ractive_instances__,t),Mm.fire(t)}function ko(t){var e,n;e=t.root;do(n=e._liveComponentQueries["_"+t.name])&&n._remove(t);while(e=e.parent)}function Eo(t){this.shouldDestroy=t,this.instance.unrender()}function xo(t){var e=this;this.owner=t.owner,this.parent=this.owner.parentFragment,this.root=t.root,this.pElement=t.pElement,this.context=t.context,this.index=t.index,this.key=t.key,this.registeredIndexRefs=[],this.cssIds="cssIds"in t?t.cssIds:this.parent?this.parent.cssIds:null,this.items=t.template.map(function(n,i){return _o({parentFragment:e,pElement:t.pElement,template:n,index:i})}),this.value=this.argsList=null,this.dirtyArgs=this.dirtyValue=!0,this.bound=!0}function _o(t){if("string"==typeof t.template)return new bc(t);switch(t.template.t){case Ph:return new Hm(t);case _h:return new zc(t);case Ch:return new ll(t);case Ah:return new Tl(t);case Oh:var e=void 0;return(e=gp(t.parentFragment.root,t.template.e))?new qm(t,e):new op(t);case Sh:return new vp(t);case Th:return new Qm(t);case Rh:return new Gm(t);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!")}}function Ao(t,e){(!this.owner||this.owner.hasContext)&&E(this,"context",t,e),this.items.forEach(function(n){n.rebind&&n.rebind(t,e)})}function Co(){var t;return 1===this.items.length?t=this.items[0].render():(t=document.createDocumentFragment(),
this.items.forEach(function(e){t.appendChild(e.render())})),this.rendered=!0,t}function Oo(t){return this.items?this.items.map(t?To:So).join(""):""}function So(t){return t.toString()}function To(t){return t.toString(!0)}function Fo(){this.bound&&(this.items.forEach(jo),this.bound=!1)}function jo(t){t.unbind&&t.unbind()}function Po(t){if(!this.rendered)throw new Error("Attempted to unrender a fragment that was not rendered");this.items.forEach(function(e){return e.unrender(t)}),this.rendered=!1}function Ro(t){var e,n,i,r,o;if(t=t||{},"object"!=typeof t)throw new Error("The reset method takes either no arguments, or an object containing new data");for((n=this.viewmodel.wrapped[""])&&n.reset?n.reset(t)===!1&&this.viewmodel.reset(t):this.viewmodel.reset(t),i=hh.reset(this),r=i.length;r--;)if(sv.indexOf(i[r])>-1){o=!0;break}if(o){var s=void 0;this.viewmodel.mark(Ys),(s=this.component)&&(s.shouldDestroy=!0),this.unrender(),s&&(s.shouldDestroy=!1),this.fragment.template!==this.template&&(this.fragment.unbind(),this.fragment=new rv({template:this.template,root:this,owner:this})),e=this.render(this.el,this.anchor)}else e=ya.start(this,!0),this.viewmodel.mark(Ys),ya.end();return av.fire(this,t),e}function No(t){var e,n;Ju.init(null,this,{template:t}),e=this.transitionsEnabled,this.transitionsEnabled=!1,(n=this.component)&&(n.shouldDestroy=!0),this.unrender(),n&&(n.shouldDestroy=!1),this.fragment.unbind(),this.fragment=new rv({template:this.template,root:this,owner:this}),this.render(this.el,this.anchor),this.transitionsEnabled=e}function Lo(t,e){var n,i;if(i=ya.start(this,!0),h(t)){n=t;for(t in n)n.hasOwnProperty(t)&&(e=n[t],Vo(this,t,e))}else Vo(this,t,e);return ya.end(),i}function Vo(t,e,n){e=_(O(e)),e.isPattern?A(t,e).forEach(function(e){t.viewmodel.set(e,n)}):t.viewmodel.set(e,n)}function Io(t,e){return Js(this,t,void 0===e?-1:-e)}function Do(){var t;return this.fragment.unbind(),this.viewmodel.teardown(),this._observers.forEach($),this.fragment.rendered&&this.el.__ractive_instances__&&V(this.el.__ractive_instances__,this),this.shouldDestroy=!0,t=this.fragment.rendered?this.unrender():ha.resolve(),gv.fire(this),this._boundFunctions.forEach(Mo),t}function Mo(t){delete t.fn[t.prop]}function Uo(t){var e=this;if("string"!=typeof t)throw new TypeError(Vs);var n=void 0;return/\*/.test(t)?(n={},A(this,_(O(t))).forEach(function(t){n[t.str]=!e.viewmodel.get(t)}),this.set(n)):this.set(t,!this.get(t))}function Bo(){return this.fragment.toString(!0)}function qo(){var t,e;if(!this.fragment.rendered)return m("ractive.unrender() was called on a Ractive instance that was not rendered"),ha.resolve();for(t=ya.start(this,!0),e=!this.component||this.component.shouldDestroy||this.shouldDestroy;this._animations[0];)this._animations[0].stop();return this.fragment.unrender(e),V(this.el.__ractive_instances__,this),kv.fire(this),ya.end(),t}function Wo(t){var e;return t=_(t)||Ys,e=ya.start(this,!0),this.viewmodel.mark(t),ya.end(),_v.fire(this,t),e}function Qo(t,e){var n,i,r;if("string"!=typeof t||e){r=[];for(i in this._twowayBindings)(!t||_(i).equalsOrStartsWith(t))&&r.push.apply(r,this._twowayBindings[i])}else r=this._twowayBindings[t];return n=zo(this,r),this.set(n)}function zo(t,e){var n={},i=[];return e.forEach(function(t){var e,r;if(!t.radioName||t.element.node.checked){if(t.checkboxName)return void(i[t.keypath.str]||t.changed()||(i.push(t.keypath),i[t.keypath.str]=t));e=t.attribute.value,r=t.getValue(),R(e,r)||a(e,r)||(n[t.keypath.str]=r)}}),i.length&&i.forEach(function(t){var e,r,o;e=i[t.str],r=e.attribute.value,o=e.getValue(),R(r,o)||(n[t.str]=o)}),n}function Ho(t,e){return"function"==typeof e&&/_super/.test(t)}function Ko(t){for(var e={};t;)Go(t,e),Yo(t,e),t=t._Parent!==Pv?t._Parent:!1;return e}function Go(t,e){rh.forEach(function(n){$o(n.useDefaults?t.prototype:t,e,n.name)})}function $o(t,e,n){var i,r=Object.keys(t[n]);r.length&&((i=e[n])||(i=e[n]={}),r.filter(function(t){return!(t in i)}).forEach(function(e){return i[e]=t[n][e]}))}function Yo(t,e){Object.keys(t.prototype).forEach(function(n){if("computed"!==n){var i=t.prototype[n];if(n in e){if("function"==typeof e[n]&&"function"==typeof i&&e[n]._method){var r=void 0,o=i._method;o&&(i=i._method),r=Ov(e[n]._method,i),o&&(r._method=r),e[n]=r}}else e[n]=i._method?i._method:i}})}function Jo(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return e.length?e.reduce(Zo,this):Zo(this)}function Zo(t){var e,n,r=void 0===arguments[1]?{}:arguments[1];return r.prototype instanceof Pv&&(r=Sv(r)),e=function(t){return this instanceof e?void Tm(this,t):new e(t)},n=_s(t.prototype),n.constructor=e,Cs(e,{defaults:{value:n},extend:{value:Jo,writable:!0,configurable:!0},_Parent:{value:t}}),hh.extend(t,n,r),zu.extend(t,n,r),r.computed&&(n.computed=i(_s(t.prototype.computed),r.computed)),e.prototype=n,e}var Xo,ts,es,ns,is,rs,os,ss=3,as={el:void 0,append:!1,template:{v:ss,t:[]},preserveWhitespace:!1,sanitize:!1,stripComments:!0,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],interpolate:!1,data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,css:null,noCssTransform:!1},us=as,hs={linear:function(t){return t},easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return Math.pow(t-1,3)+1},easeInOut:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)}};Xo="object"==typeof document,ts="undefined"!=typeof navigator&&/jsDom/.test(navigator.appName),es="undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply;try{Object.defineProperty({},"test",{value:0}),ns=!0}catch(cs){ns=!1}is={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},rs="undefined"==typeof document?!1:document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),os=["o","ms","moz","webkit"];var ls,fs,ds,ps,ms,vs,gs,ys,bs;if(ls=rs?function(t,e){return e&&e!==is.html?document.createElementNS(e,t):document.createElement(t)}:function(t,e){if(e&&e!==is.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return document.createElement(t)},Xo){for(ds=ls("div"),ps=["matches","matchesSelector"],bs=function(t){return function(e,n){return e[t](n)}},gs=ps.length;gs--&&!fs;)if(ms=ps[gs],ds[ms])fs=bs(ms);else for(ys=os.length;ys--;)if(vs=os[gs]+ms.substr(0,1).toUpperCase()+ms.substring(1),ds[vs]){fs=bs(vs);break}fs||(fs=function(t,e){var n,i,r;for(i=t.parentNode,i||(ds.innerHTML="",i=ds,t=t.cloneNode(),ds.appendChild(t)),n=i.querySelectorAll(e),r=n.length;r--;)if(n[r]===t)return!0;return!1})}else fs=null;var ws,ks,Es,xs=function(){};"undefined"==typeof window?Es=null:(ws=window,ks=ws.document,Es={},ks||(Es=null),Date.now||(Date.now=function(){return+new Date}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=n.length;return function(r){if("object"!=typeof r&&"function"!=typeof r||null===r)throw new TypeError("Object.keys called on non-object");var o=[];for(var s in r)t.call(r,s)&&o.push(s);if(e)for(var a=0;i>a;a++)t.call(r,n[a])&&o.push(n[a]);return o}}()),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var n;for(void 0===e&&(e=0),0>e&&(e+=this.length),0>e&&(e=0),n=this.length;n>e;e++)if(this.hasOwnProperty(e)&&this[e]===t)return e;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,i;for(n=0,i=this.length;i>n;n+=1)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)}),Array.prototype.map||(Array.prototype.map=function(t,e){var n,i,r,o=this,s=[];for(o instanceof String&&(o=o.toString(),r=!0),n=0,i=o.length;i>n;n+=1)(o.hasOwnProperty(n)||r)&&(s[n]=t.call(e,o[n],n,o));return s}),"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(t,e){var n,i,r,o;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(r=this.length,o=!1,arguments.length>1&&(i=e,o=!0),n=0;r>n;n+=1)this.hasOwnProperty(n)?o&&(i=t(i,this[n],n,this)):(i=this[n],o=!0);if(!o)throw new TypeError("Reduce of empty array with no initial value");return i}),Array.prototype.filter||(Array.prototype.filter=function(t,e){var n,i,r=[];for(n=0,i=this.length;i>n;n+=1)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)&&(r[r.length]=this[n]);return r}),Array.prototype.every||(Array.prototype.every=function(t,e){var n,i,r;if(null==this)throw new TypeError;if(n=Object(this),i=n.length>>>0,"function"!=typeof t)throw new TypeError;for(r=0;i>r;r+=1)if(r in n&&!t.call(e,n[r],r,n))return!1;return!0}),"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(t){var e,n,i,r,o=[].slice;if("function"!=typeof this)throw new TypeError("Function.prototype.bind called on non-function");return e=o.call(arguments,1),n=this,i=function(){},r=function(){var r=this instanceof i&&t?this:t;return n.apply(r,e.concat(o.call(arguments)))},i.prototype=this.prototype,r.prototype=new i,r}),ws.addEventListener||!function(t,e){var n,i,r,o,s,a;t.appearsToBeIELessEqual8=!0,n=function(t,e){var n,i=this;for(n in t)i[n]=t[n];i.currentTarget=e,i.target=t.srcElement||e,i.timeStamp=+new Date,i.preventDefault=function(){t.returnValue=!1},i.stopPropagation=function(){t.cancelBubble=!0}},i=function(t,e){var i,r,o=this;i=o.listeners||(o.listeners=[]),r=i.length,i[r]=[e,function(t){e.call(o,new n(t,o))}],o.attachEvent("on"+t,i[r][1])},r=function(t,e){var n,i,r=this;if(r.listeners)for(n=r.listeners,i=n.length;i--;)n[i][0]===e&&r.detachEvent("on"+t,n[i][1])},t.addEventListener=e.addEventListener=i,t.removeEventListener=e.removeEventListener=r,"Element"in t?(t.Element.prototype.addEventListener=i,t.Element.prototype.removeEventListener=r):(a=e.createElement,e.createElement=function(t){var e=a(t);return e.addEventListener=i,e.removeEventListener=r,e},o=e.getElementsByTagName("head")[0],s=e.createElement("style"),o.insertBefore(s,o.firstChild))}(ws,ks),ws.getComputedStyle||(Es.getComputedStyle=function(){function t(n,i,r,o){var s,a=i[r],u=parseFloat(a),h=a.split(/\d/)[0];return isNaN(u)&&/^thin|medium|thick$/.test(a)&&(u=e(a),h=""),o=null!=o?o:/%|em/.test(h)&&n.parentElement?t(n.parentElement,n.parentElement.currentStyle,"fontSize",null):16,s="fontSize"==r?o:/width/i.test(r)?n.clientWidth:n.clientHeight,"em"==h?u*o:"in"==h?96*u:"pt"==h?96*u/72:"%"==h?u/100*s:u}function e(t){var e,n;return o[t]||(e=document.createElement("div"),e.style.display="block",e.style.position="fixed",e.style.width=e.style.height="0",e.style.borderRight=t+" solid black",document.getElementsByTagName("body")[0].appendChild(e),n=e.getBoundingClientRect(),o[t]=n.right-n.left),o[t]}function n(t,e){var n="border"==e?"Width":"",i=e+"Top"+n,r=e+"Right"+n,o=e+"Bottom"+n,s=e+"Left"+n;t[e]=(t[i]==t[r]==t[o]==t[s]?[t[i]]:t[i]==t[o]&&t[s]==t[r]?[t[i],t[r]]:t[s]==t[r]?[t[i],t[r],t[o]]:[t[i],t[r],t[o],t[s]]).join(" ")}function i(e){var i,r,o,a;i=e.currentStyle,r=this,o=t(e,i,"fontSize",null);for(a in i)"normal"===i[a]&&s.hasOwnProperty(a)?r[a]=s[a]:/width|height|margin.|padding.|border.+W/.test(a)?"auto"===i[a]?/^width|height/.test(a)?r[a]=("width"===a?e.clientWidth:e.clientHeight)+"px":/(?:padding)?Top|Bottom$/.test(a)&&(r[a]="0px"):r[a]=t(e,i,a,o)+"px":"styleFloat"===a?r["float"]=i[a]:r[a]=i[a];return n(r,"margin"),n(r,"padding"),n(r,"border"),r.fontSize=o+"px",r}function r(t){return new i(t)}var o={},s={fontWeight:400,lineHeight:1.2,letterSpacing:0};return i.prototype={constructor:i,getPropertyPriority:xs,getPropertyValue:function(t){return this[t]||""},item:xs,removeProperty:xs,setProperty:xs,getPropertyCSSValue:xs},r}()));var _s,As,Cs,Os=Es;try{Object.defineProperty({},"test",{value:0}),Xo&&Object.defineProperty(document.createElement("div"),"test",{value:0}),As=Object.defineProperty}catch(Ss){As=function(t,e,n){t[e]=n.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(Ss){throw Ss}Xo&&Object.defineProperties(ls("div"),{test:{value:0}}),Cs=Object.defineProperties}catch(Ss){Cs=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&As(t,n,e[n])}}try{Object.create(null),_s=Object.create}catch(Ss){_s=function(){var t=function(){};return function(e,n){var i;return null===e?{}:(t.prototype=e,i=new t,n&&Object.defineProperties(i,n),i)}}()}var Ts,Fs,js,Ps=Object.prototype.hasOwnProperty,Rs=Object.prototype.toString,Ns=/^\[object (?:Array|FileList)\]$/,Ls={};es?!function(){var t=["%cRactive.js %c0.7.3 %cin debug mode, %cmore...","color: rgb(114, 157, 52); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"],e="You're running Ractive 0.7.3 in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://docs.ractivejs.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n";js=function(){var n=!!console.groupCollapsed;console[n?"groupCollapsed":"log"].apply(console,t),console.log(e),n&&console.groupEnd(t),js=xs},Fs=function(t,e){if(js(),"object"==typeof e[e.length-1]){var n=e.pop(),i=n?n.ractive:null;if(i){var r=void 0;i.component&&(r=i.component.name)&&(t="<"+r+"> "+t);var o=void 0;(o=n.node||i.fragment&&i.fragment.rendered&&i.find("*"))&&e.push(o)}}console.warn.apply(console,["%cRactive.js: %c"+t,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(e))},Ts=function(){console.log.apply(console,arguments)}}():Fs=Ts=js=xs;var Vs="Bad arguments",Is='A function was specified for "%s" %s, but no %s was returned',Ds=function(t,e){return'Missing "'+t+'" '+e+" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#"+e+"s"},Ms=function(t,e,n,i){if(t===e)return b(e);if(i){var r=g("interpolators",n,i);if(r)return r(t,e)||b(e);l(Ds(i,"interpolator"))}return qs.number(t,e)||qs.array(t,e)||qs.object(t,e)||b(e)},Us=Ms,Bs={number:function(t,e){var n;return u(t)&&u(e)?(t=+t,e=+e,n=e-t,n?function(e){return t+e*n}:function(){return t}):null},array:function(t,e){var n,i,r,s;if(!o(t)||!o(e))return null;for(n=[],i=[],s=r=Math.min(t.length,e.length);s--;)i[s]=Us(t[s],e[s]);for(s=r;s<t.length;s+=1)n[s]=t[s];for(s=r;s<e.length;s+=1)n[s]=e[s];return function(t){for(var e=r;e--;)n[e]=i[e](t);return n}},object:function(t,e){var n,i,r,o,s;if(!h(t)||!h(e))return null;n=[],o={},r={};for(s in t)Ps.call(t,s)&&(Ps.call(e,s)?(n.push(s),r[s]=Us(t[s],e[s])):o[s]=t[s]);for(s in e)Ps.call(e,s)&&!Ps.call(t,s)&&(o[s]=e[s]);return i=n.length,function(t){for(var e,s=i;s--;)e=n[s],o[e]=r[e](t);return o}}},qs=Bs,Ws=w,Qs={},zs=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,Hs=/\*/,Ks={},Gs=function(t){var e=t.split(".");this.str=t,"@"===t[0]&&(this.isSpecial=!0,this.value=x(t)),this.firstKey=e[0],this.lastKey=e.pop(),this.isPattern=Hs.test(t),this.parent=""===t?null:_(e.join(".")),this.isRoot=!t};Gs.prototype={equalsOrStartsWith:function(t){return t===this||this.startsWith(t)},join:function(t){return _(this.isRoot?String(t):this.str+"."+t)},replace:function(t,e){return this===t?e:this.startsWith(t)?null===e?e:_(this.str.replace(t.str+".",e.str+".")):void 0},startsWith:function(t){return t?t&&this.str.substr(0,t.str.length+1)===t.str+".":!1},toString:function(){throw new Error("Bad coercion")},valueOf:function(){throw new Error("Bad coercion")},wildcardMatches:function(){return this._wildcardMatches||(this._wildcardMatches=Ws(this.str))}};var $s,Ys=_(""),Js=S,Zs="Cannot add to a non-numeric value",Xs=T;"undefined"==typeof window?$s=null:(!function(t,e,n){var i,r;if(!n.requestAnimationFrame){for(i=0;i<t.length&&!n.requestAnimationFrame;++i)n.requestAnimationFrame=n[t[i]+"RequestAnimationFrame"];n.requestAnimationFrame||(r=n.setTimeout,n.requestAnimationFrame=function(t){var n,i,o;return n=Date.now(),i=Math.max(0,16-(n-e)),o=r(function(){t(n+i)},i),e=n+i,o})}}(os,0,window),$s=window.requestAnimationFrame);var ta,ea=$s;ta="undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?function(){return window.performance.now()}:function(){return Date.now()};var na=ta,ia={construct:{deprecated:"beforeInit",replacement:"onconstruct"},render:{deprecated:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},complete:{deprecated:"complete",replacement:"oncomplete"}};F.prototype.fire=function(t,e){function n(n){return t[n]?(e?t[n](e):t[n](),!0):void 0}n(this.method),!t[this.method]&&this.deprecate&&n(this.deprecate.deprecated)&&(this.deprecate.message?m(this.deprecate.message):m('The method "%s" has been deprecated in favor of "%s" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',this.deprecate.deprecated,this.deprecate.replacement)),e?t.fire(this.event,e):t.fire(this.event)};var ra,oa=F,sa={},aa={},ua={};"function"==typeof Promise?ra=Promise:(ra=function(t){var e,n,i,r,o,s,a=[],u=[],h=sa;i=function(t){return function(i){h===sa&&(e=i,h=t,n=M(h===aa?a:u,e),D(n))}},r=i(aa),o=i(ua);try{t(r,o)}catch(c){o(c)}return s={then:function(t,e){var i=new ra(function(r,o){var s=function(t,e,n){e.push("function"==typeof t?function(e){var n;try{n=t(e),U(i,n,r,o)}catch(s){o(s)}}:n)};s(t,a,r),s(e,u,o),h!==sa&&D(n)});return i}},s["catch"]=function(t){return this.then(null,t)},s},ra.all=function(t){return new ra(function(e,n){var i,r,o,s=[];if(!t.length)return void e(s);for(o=function(t,r){t&&"function"==typeof t.then?t.then(function(t){s[r]=t,--i||e(s)},n):(s[r]=t,--i||e(s))},i=r=t.length;r--;)o(t[r],r)})},ra.resolve=function(t){return new ra(function(e){e(t)})},ra.reject=function(t){return new ra(function(e,n){n(t)})});var ha=ra,ca=function(t){do if(void 0!==t.context)return t.context;while(t=t.parent);return Ys},la=B,fa=function(t,e){this.callback=t,this.parent=e,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.decoratorQueue=[],this.outrosComplete=!1,e&&e.addChild(this)};fa.prototype={addChild:function(t){this.children.push(t),this.totalChildren+=1,this.outroChildren+=1},decrementOutros:function(){this.outroChildren-=1,Z(this)},decrementTotal:function(){this.totalChildren-=1,Z(this)},add:function(t){var e=t.isIntro?this.intros:this.outros;e.push(t)},addDecorator:function(t){this.decoratorQueue.push(t)},remove:function(t){var e=t.isIntro?this.intros:this.outros;V(e,t),Z(this)},init:function(){this.ready=!0,Z(this)},detachNodes:function(){this.decoratorQueue.forEach(H),this.detachQueue.forEach(Y),this.children.forEach(J)}};var da,pa,ma=fa,va=[],ga=new oa("change");pa={start:function(t,e){var n,i;return e&&(n=new ha(function(t){return i=t})),da={previousBatch:da,transitionManager:new ma(i,da&&da.transitionManager),views:[],tasks:[],ractives:[],instance:t},t&&da.ractives.push(t),n},end:function(){X(),da.transitionManager.init(),!da.previousBatch&&da.instance&&(da.instance.viewmodel.changes=[]),da=da.previousBatch},addRactive:function(t){da&&j(da.ractives,t)},registerTransition:function(t){t._manager=da.transitionManager,da.transitionManager.add(t)},registerDecorator:function(t){da.transitionManager.addDecorator(t)},addView:function(t){da.views.push(t)},addUnresolved:function(t){va.push(t)},removeUnresolved:function(t){V(va,t)},detachWhenReady:function(t){da.transitionManager.detachQueue.push(t)},scheduleTask:function(t,e){var n;if(da){for(n=da;e&&n.previousBatch;)n=n.previousBatch;n.tasks.push(t)}else t()}};var ya=pa,ba=[],wa={tick:function(){var t,e,n;for(n=na(),ya.start(),t=0;t<ba.length;t+=1)e=ba[t],e.tick(n)||ba.splice(t--,1);ya.end(),ba.length?ea(wa.tick):wa.running=!1},add:function(t){ba.push(t),wa.running||(wa.running=!0,ea(wa.tick))},abort:function(t,e){for(var n,i=ba.length;i--;)n=ba[i],n.root===e&&n.keypath===t&&n.stop()}},ka=wa,Ea=function(t){var e;this.startTime=Date.now();for(e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);this.interpolator=Us(this.from,this.to,this.root,this.interpolator),this.running=!0,this.tick()};Ea.prototype={tick:function(){var t,e,n,i,r,o;return o=this.keypath,this.running?(i=Date.now(),t=i-this.startTime,t>=this.duration?(null!==o&&(ya.start(this.root),this.root.viewmodel.set(o,this.to),ya.end()),this.step&&this.step(1,this.to),this.complete(this.to),r=this.root._animations.indexOf(this),-1===r&&m("Animation was not found"),this.root._animations.splice(r,1),this.running=!1,!1):(e=this.easing?this.easing(t/this.duration):t/this.duration,null!==o&&(n=this.interpolator(e),ya.start(this.root),this.root.viewmodel.set(o,n),ya.end()),this.step&&this.step(e,n),!0)):!1},stop:function(){var t;this.running=!1,t=this.root._animations.indexOf(this),-1===t&&m("Animation was not found"),this.root._animations.splice(t,1)}};var xa=Ea,_a=nt,Aa={stop:xs},Ca=rt,Oa=new oa("detach"),Sa=ot,Ta=st,Fa=function(){var t,e,n;t=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],e=this.selector,n=t.indexOf(e),-1!==n&&(t.splice(n,1),t[e]=null)},ja=function(t,e){var n,i,r,o,s,a,u,h,c,l;for(n=ut(t.component||t._ractive.proxy),i=ut(e.component||e._ractive.proxy),r=L(n),o=L(i);r&&r===o;)n.pop(),i.pop(),s=r,r=L(n),o=L(i);if(r=r.component||r,o=o.component||o,c=r.parentFragment,l=o.parentFragment,c===l)return a=c.items.indexOf(r),u=l.items.indexOf(o),a-u||n.length-i.length;if(h=s.fragments)return a=h.indexOf(c),u=h.indexOf(l),a-u||n.length-i.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")},Pa=function(t,e){var n;return t.compareDocumentPosition?(n=t.compareDocumentPosition(e),2&n?1:-1):ja(t,e)},Ra=function(){this.sort(this._isComponentQuery?ja:Pa),this._dirty=!1},Na=function(){var t=this;this._dirty||(this._dirty=!0,ya.scheduleTask(function(){t._sort()}))},La=function(t){var e=this.indexOf(this._isComponentQuery?t.instance:t);-1!==e&&this.splice(e,1)},Va=ht,Ia=ct,Da=lt,Ma=ft,Ua=dt,Ba=pt,qa={enqueue:function(t,e){t.event&&(t._eventQueue=t._eventQueue||[],t._eventQueue.push(t.event)),t.event=e},dequeue:function(t){t._eventQueue&&t._eventQueue.length?t.event=t._eventQueue.pop():delete t.event}},Wa=qa,Qa=mt,za=yt,Ha=bt,Ka={capture:!0,noUnwrap:!0,fullRootGet:!0},Ga=wt,$a=new oa("insert"),Ya=Et,Ja=function(t,e,n,i){this.root=t,this.keypath=e,this.callback=n,this.defer=i.defer,this.context=i&&i.context?i.context:t};Ja.prototype={init:function(t){this.value=this.root.get(this.keypath.str),t!==!1?this.update():this.oldValue=this.value},setValue:function(t){var e=this;a(t,this.value)||(this.value=t,this.defer&&this.ready?ya.scheduleTask(function(){return e.update()}):this.update())},update:function(){this.updating||(this.updating=!0,this.callback.call(this.context,this.value,this.oldValue,this.keypath.str),this.oldValue=this.value,this.updating=!1)}};var Za,Xa=Ja,tu=xt,eu=Array.prototype.slice;Za=function(t,e,n,i){this.root=t,this.callback=n,this.defer=i.defer,this.keypath=e,this.regex=new RegExp("^"+e.str.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$"),this.values={},this.defer&&(this.proxies=[]),this.context=i&&i.context?i.context:t},Za.prototype={init:function(t){var e,n;if(e=tu(this.root,this.keypath),t!==!1)for(n in e)e.hasOwnProperty(n)&&this.update(_(n));else this.values=e},update:function(t){var e,n=this;if(t.isPattern){e=tu(this.root,t);for(t in e)e.hasOwnProperty(t)&&this.update(_(t))}else if(!this.root.viewmodel.implicitChanges[t.str])return this.defer&&this.ready?void ya.scheduleTask(function(){return n.getProxy(t).update()}):void this.reallyUpdate(t)},reallyUpdate:function(t){var e,n,i,r;return e=t.str,n=this.root.viewmodel.get(t),this.updating?void(this.values[e]=n):(this.updating=!0,a(n,this.values[e])&&this.ready||(i=eu.call(this.regex.exec(e),1),r=[n,this.values[e],e].concat(i),this.values[e]=n,this.callback.apply(this.context,r)),void(this.updating=!1))},getProxy:function(t){var e=this;return this.proxies[t.str]||(this.proxies[t.str]={update:function(){return e.reallyUpdate(t)}}),this.proxies[t.str]}};var nu,iu,ru,ou,su,au,uu=Za,hu=_t,cu={},lu=At,fu=Ct,du=function(t){return t.trim()},pu=function(t){return""!==t},mu=Ot,vu=St,gu=Tt,yu=Ft,bu=Array.prototype,wu=function(t){return function(e){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;n>r;r++)i[r-1]=arguments[r];var s,a,u,h,c=[];if(e=_(O(e)),s=this.viewmodel.get(e),a=s.length,!o(s))throw new Error("Called ractive."+t+"('"+e.str+"'), but '"+e.str+"' does not refer to an array");return c=yu(s,t,i),h=bu[t].apply(s,i),u=ya.start(this,!0).then(function(){return h}),c?this.viewmodel.smartUpdate(e,s,c):this.viewmodel.mark(e),ya.end(),u}},ku=wu("pop"),Eu=wu("push"),xu="/* Ractive.js component styles */\n",_u=[],Au=!1;Xo?(ru=document.createElement("style"),ru.type="text/css",ou=document.getElementsByTagName("head")[0],au=!1,su=ru.styleSheet,iu=function(){var t=xu+_u.map(function(t){return"\n/* {"+t.id+"} */\n"+t.styles}).join("\n");su?su.cssText=t:ru.innerHTML=t,au||(ou.appendChild(ru),au=!0)},nu={add:function(t){_u.push(t),Au=!0},apply:function(){Au&&(iu(),Au=!1)}}):nu={add:xs,apply:xs};var Cu,Ou,Su,Tu=nu,Fu=Pt,ju=new oa("render"),Pu=new oa("complete"),Ru={extend:function(t,e,n){e.adapt=Nt(e.adapt,N(n.adapt))},init:function(){}},Nu=Ru,Lu=Lt,Vu=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,Iu=/\/\*.*?\*\//g,Du=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~\(]+(?:\([^\)]+\))?)?\s*[\s\+\>\~]?)\s*/g,Mu=/^@media/,Uu=/\[data-ractive-css~="\{[a-z0-9-]+\}"]/g,Bu=1,qu={name:"css",extend:function(t,e,n){if(n.css){var i=Bu++,r=n.noCssTransform?n.css:Lu(n.css,i);e.cssId=i,Tu.add({id:i,styles:r})}},init:function(){}},Wu=qu,Qu={name:"data",extend:function(t,e,n){var i=void 0,r=void 0;if(n.data&&h(n.data))for(i in n.data)r=n.data[i],r&&"object"==typeof r&&(h(r)||o(r))&&m("Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }");e.data=Mt(e.data,n.data)},init:function(t,e,n){var i=Mt(t.prototype.data,n.data);return"function"==typeof i&&(i=i.call(e)),i||{}},reset:function(t){var e=this.init(t.constructor,t,t.viewmodel);return t.viewmodel.reset(e),!0}},zu=Qu,Hu=null,Ku=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters","interpolate"],Gu={fromId:Qt,isHashedId:zt,isParsed:Ht,getParseOptions:Kt,createHelper:qt,parse:Wt},$u=Gu,Yu={name:"template",extend:function(t,e,n){var i;"template"in n&&(i=n.template,e.template="function"==typeof i?i:Jt(i,e))},init:function(t,e,n){var i,r;i="template"in n?n.template:t.prototype.template,"function"==typeof i&&(r=i,i=$t(e,r),e._config.template={fn:r,result:i}),i=Jt(i,e),e.template=i.t,i.p&&Zt(e.partials,i.p)},reset:function(t){var e,n=Gt(t);return n?(e=Jt(n,t),t.template=e.t,Zt(t.partials,e.p,!0),!0):void 0}},Ju=Yu;Cu=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"],Ou=function(t,e){this.name=t,this.useDefaults=e},Ou.prototype={constructor:Ou,extend:function(t,e,n){this.configure(this.useDefaults?t.defaults:t,this.useDefaults?e:e.constructor,n)},init:function(){},configure:function(t,e,n){var i,r=this.name,o=n[r];i=_s(t[r]);for(var s in o)i[s]=o[s];e[r]=i},reset:function(t){var e=t[this.name],n=!1;return Object.keys(e).forEach(function(t){var i=e[t];i._fn&&(i._fn.isOwner?e[t]=i._fn:delete e[t],n=!0)}),n}},Su=Cu.map(function(t){return new Ou(t,"computed"===t)});var Zu,Xu,th,eh,nh,ih,rh=Su,oh=Xt,sh=ie;eh={adapt:Nu,css:Wu,data:zu,template:Ju},th=Object.keys(us),ih=se(th.filter(function(t){return!eh[t]})),nh=se(th.concat(rh.map(function(t){return t.name}))),Xu=[].concat(th.filter(function(t){return!rh[t]&&!eh[t]}),rh,eh.data,eh.template,eh.css),Zu={extend:function(t,e,n){return re("extend",t,e,n)},init:function(t,e,n){return re("init",t,e,n)},reset:function(t){return Xu.filter(function(e){return e.reset&&e.reset(t)}).map(function(t){return t.name})},order:Xu};var ah,uh,hh=Zu,ch=ae,lh=ue,fh=he,dh=ce,ph=le,mh=fe,vh=de,gh=pe,yh=/^\s+/;uh=function(t){this.name="ParseError",this.message=t;try{throw new Error(t)}catch(e){this.stack=e.stack}},uh.prototype=Error.prototype,ah=function(t,e){var n,i,r=0;for(this.str=t,this.options=e||{},this.pos=0,this.lines=this.str.split("\n"),this.lineEnds=this.lines.map(function(t){var e=r+t.length+1;return r=e,e},0),this.init&&this.init(t,e),n=[];this.pos<this.str.length&&(i=this.read());)n.push(i);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(n,e):n},ah.prototype={read:function(t){var e,n,i,r;for(t||(t=this.converters),e=this.pos,i=t.length,n=0;i>n;n+=1)if(this.pos=e,r=t[n](this))return r;return null},getLinePos:function(t){for(var e,n=0,i=0;t>=this.lineEnds[n];)i=this.lineEnds[n],n+=1;return e=t-i,[n+1,e+1,t]},error:function(t){var e=this.getLinePos(this.pos),n=e[0],i=e[1],r=this.lines[e[0]-1],o=0,s=r.replace(/\t/g,function(t,n){return n<e[1]&&(o+=1),"  "})+"\n"+new Array(e[1]+o).join(" ")+"^----",a=new uh(""+t+" at line "+n+" character "+i+":\n"+s);throw a.line=e[0],a.character=e[1],a.shortMessage=t,a},matchString:function(t){return this.str.substr(this.pos,t.length)===t?(this.pos+=t.length,t):void 0},matchPattern:function(t){var e;return(e=t.exec(this.remaining()))?(this.pos+=e[0].length,e[1]||e[0]):void 0},allowWhitespace:function(){this.matchPattern(yh)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},ah.extend=function(t){var e,n,i=this;e=function(t,e){ah.call(this,t,e)},e.prototype=_s(i.prototype);for(n in t)Ps.call(t,n)&&(e.prototype[n]=t[n]);return e.extend=ah.extend,e};var bh,wh,kh,Eh=ah,xh=1,_h=2,Ah=3,Ch=4,Oh=7,Sh=8,Th=9,Fh=13,jh=15,Ph=16,Rh=18,Nh=20,Lh=21,Vh=30,Ih=50,Dh=51,Mh=52,Uh=53,Bh=54;bh=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,wh=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,kh=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;var qh,Wh,Qh,zh,Hh,Kh,Gh,$h=function(t){return function(e){var n,i,r,o;for(n=e.pos,i='"',r=!1;!r;)o=e.matchPattern(bh)||e.matchPattern(wh)||e.matchString(t),o?i+='"'===o?'\\"':"\\'"===o?"'":o:(o=e.matchPattern(kh),o?i+="\\u"+("000"+o.charCodeAt(1).toString(16)).slice(-4):r=!0);return i+='"',JSON.parse(i)}},Yh=$h('"'),Jh=$h("'"),Zh=function(t){var e,n;return e=t.pos,t.matchString('"')?(n=Jh(t),t.matchString('"')?{t:Lh,v:n}:(t.pos=e,null)):t.matchString("'")?(n=Yh(t),t.matchString("'")?{t:Lh,v:n}:(t.pos=e,null)):null},Xh=me,tc=/^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,ec=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,nc=ve,ic=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;Wh={"true":!0,"false":!1,undefined:void 0,"null":null},Qh=new RegExp("^(?:"+Object.keys(Wh).join("|")+")"),zh=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,
Hh=/\$\{([^\}]+)\}/g,Kh=/^\$\{([^\}]+)\}/,Gh=/^\s*$/,qh=Eh.extend({init:function(t,e){this.values=e.values,this.allowWhitespace()},postProcess:function(t){return 1===t.length&&Gh.test(this.leftover)?{value:t[0].v}:null},converters:[function(t){var e;return t.values?(e=t.matchPattern(Kh),e&&t.values.hasOwnProperty(e)?{v:t.values[e]}:void 0):null},function(t){var e;return(e=t.matchPattern(Qh))?{v:Wh[e]}:void 0},function(t){var e;return(e=t.matchPattern(zh))?{v:+e}:void 0},function(t){var e,n=Zh(t);return n&&(e=t.values)?{v:n.v.replace(Hh,function(t,n){return n in e?e[n]:n})}:n},function(t){var e,n;if(!t.matchString("{"))return null;if(e={},t.allowWhitespace(),t.matchString("}"))return{v:e};for(;n=ge(t);){if(e[n.key]=n.value,t.allowWhitespace(),t.matchString("}"))return{v:e};if(!t.matchString(","))return null}return null},function(t){var e,n;if(!t.matchString("["))return null;if(e=[],t.allowWhitespace(),t.matchString("]"))return{v:e};for(;n=t.read();){if(e.push(n.v),t.allowWhitespace(),t.matchString("]"))return{v:e};if(!t.matchString(","))return null;t.allowWhitespace()}return null}]});var rc,oc,sc,ac,uc,hc,cc,lc,fc=function(t,e){var n=new qh(t,{values:e});return n.result},dc=ye,pc=be,mc=we,vc=ke;rc=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i,oc=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,sc={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},ac=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],uc=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(sc).join("|")+"));?","g"),hc=/</g,cc=/>/g,lc=/&/g;var gc=function(){return e(this.node)},yc=function(t){this.type=xh,this.text=t.template};yc.prototype={detach:gc,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createTextNode(this.text)),this.node},toString:function(t){return t?_e(this.text):this.text},unrender:function(t){return t?this.detach():void 0}};var bc=yc,wc=Ae,kc=Ce,Ec=function(t,e,n){var i;this.ref=e,this.resolved=!1,this.root=t.root,this.parentFragment=t.parentFragment,this.callback=n,i=la(t.root,e,t.parentFragment),void 0!=i?this.resolve(i):ya.addUnresolved(this)};Ec.prototype={resolve:function(t){this.keypath&&!t&&ya.addUnresolved(this),this.resolved=!0,this.keypath=t,this.callback(t)},forceResolution:function(){this.resolve(_(this.ref))},rebind:function(t,e){var n;void 0!=this.keypath&&(n=this.keypath.replace(t,e),void 0!==n&&this.resolve(n))},unbind:function(){this.resolved||ya.removeUnresolved(this)}};var xc=Ec,_c=function(t,e,n){this.parentFragment=t.parentFragment,this.ref=e,this.callback=n,this.rebind()},Ac={"@keypath":{prefix:"c",prop:["context"]},"@index":{prefix:"i",prop:["index"]},"@key":{prefix:"k",prop:["key","index"]}};_c.prototype={rebind:function(){var t,e=this.ref,n=this.parentFragment,i=Ac[e];if(!i)throw new Error('Unknown special reference "'+e+'" - valid references are @index, @key and @keypath');if(this.cached)return this.callback(_("@"+i.prefix+Oe(this.cached,i)));if(-1!==i.prop.indexOf("index")||-1!==i.prop.indexOf("key"))for(;n;){if(n.owner.currentSubtype===Mh&&void 0!==(t=Oe(n,i)))return this.cached=n,n.registerIndexRef(this),this.callback(_("@"+i.prefix+t));n=!n.parent&&n.owner&&n.owner.component&&n.owner.component.parentFragment&&!n.owner.component.instance.isolated?n.owner.component.parentFragment:n.parent}else for(;n;){if(void 0!==(t=Oe(n,i)))return this.callback(_("@"+i.prefix+t.str));n=n.parent}},unbind:function(){this.cached&&this.cached.unregisterIndexRef(this)}};var Cc=_c,Oc=function(t,e,n){this.parentFragment=t.parentFragment,this.ref=e,this.callback=n,e.ref.fragment.registerIndexRef(this),this.rebind()};Oc.prototype={rebind:function(){var t,e=this.ref.ref;t="k"===e.ref.t?"k"+e.fragment.key:"i"+e.fragment.index,void 0!==t&&this.callback(_("@"+t))},unbind:function(){this.ref.ref.fragment.unregisterIndexRef(this)}};var Sc=Oc,Tc=Se;Se.resolve=function(t){var e,n,i={};for(e in t.refs)n=t.refs[e],i[n.ref.n]="k"===n.ref.t?n.fragment.key:n.fragment.index;return i};var Fc,jc=Te,Pc=Fe,Rc={},Nc=Function.prototype.bind;Fc=function(t,e,n,i){var r,o=this;r=t.root,this.root=r,this.parentFragment=e,this.callback=i,this.owner=t,this.str=n.s,this.keypaths=[],this.pending=n.r.length,this.refResolvers=n.r.map(function(t,e){return jc(o,t,function(t){o.resolve(e,t)})}),this.ready=!0,this.bubble()},Fc.prototype={bubble:function(){this.ready&&(this.uniqueString=Pe(this.str,this.keypaths),this.keypath=Re(this.uniqueString),this.createEvaluator(),this.callback(this.keypath))},unbind:function(){for(var t;t=this.refResolvers.pop();)t.unbind()},resolve:function(t,e){this.keypaths[t]=e,this.bubble()},createEvaluator:function(){var t,e,n,i,r,o=this;i=this.keypath,t=this.root.viewmodel.computations[i.str],t?this.root.viewmodel.mark(i):(r=Pc(this.str,this.refResolvers.length),e=this.keypaths.map(function(t){var e;return"undefined"===t?function(){return void 0}:t.isSpecial?(e=t.value,function(){return e}):function(){var e=o.root.viewmodel.get(t,{noUnwrap:!0,fullRootGet:!0});return"function"==typeof e&&(e=Le(e,o.root)),e}}),n={deps:this.keypaths.filter(Ne),getter:function(){var t=e.map(je);return r.apply(null,t)}},t=this.root.viewmodel.compute(i,n))},rebind:function(t,e){this.refResolvers.forEach(function(n){return n.rebind(t,e)})}};var Lc=Fc,Vc=function(t,e,n){var i=this;this.resolver=e,this.root=e.root,this.parentFragment=n,this.viewmodel=e.root.viewmodel,"string"==typeof t?this.value=t:t.t===Vh?this.refResolver=jc(this,t.n,function(t){i.resolve(t)}):new Lc(e,n,t,function(t){i.resolve(t)})};Vc.prototype={resolve:function(t){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.keypath=t,this.value=this.viewmodel.get(t),this.bind(),this.resolver.bubble()},bind:function(){this.viewmodel.register(this.keypath,this)},rebind:function(t,e){this.refResolver&&this.refResolver.rebind(t,e)},setValue:function(t){this.value=t,this.resolver.bubble()},unbind:function(){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.refResolver&&this.refResolver.unbind()},forceResolution:function(){this.refResolver&&this.refResolver.forceResolution()}};var Ic=Vc,Dc=function(t,e,n){var i,r,o,s,a=this;this.parentFragment=s=t.parentFragment,this.root=i=t.root,this.mustache=t,this.ref=r=e.r,this.callback=n,this.unresolved=[],(o=la(i,r,s))?this.base=o:this.baseResolver=new xc(this,r,function(t){a.base=t,a.baseResolver=null,a.bubble()}),this.members=e.m.map(function(t){return new Ic(t,a,s)}),this.ready=!0,this.bubble()};Dc.prototype={getKeypath:function(){var t=this.members.map(Ve);return!t.every(Ie)||this.baseResolver?null:this.base.join(t.join("."))},bubble:function(){this.ready&&!this.baseResolver&&this.callback(this.getKeypath())},unbind:function(){this.members.forEach(K)},rebind:function(t,e){var n;if(this.base){var i=this.base.replace(t,e);i&&i!==this.base&&(this.base=i,n=!0)}this.members.forEach(function(i){i.rebind(t,e)&&(n=!0)}),n&&this.bubble()},forceResolution:function(){this.baseResolver&&(this.base=_(this.ref),this.baseResolver.unbind(),this.baseResolver=null),this.members.forEach(De),this.bubble()}};var Mc=Dc,Uc=Me,Bc=Ue,qc=Be,Wc={getValue:kc,init:Uc,resolve:Bc,rebind:qc},Qc=function(t){this.type=_h,Wc.init(this,t)};Qc.prototype={update:function(){this.node.data=void 0==this.value?"":this.value},resolve:Wc.resolve,rebind:Wc.rebind,detach:gc,unbind:wc,render:function(){return this.node||(this.node=document.createTextNode(n(this.value))),this.node},unrender:function(t){t&&e(this.node)},getValue:Wc.getValue,setValue:function(t){var e;this.keypath&&(e=this.root.viewmodel.wrapped[this.keypath.str])&&(t=e.get()),a(t,this.value)||(this.value=t,this.parentFragment.bubble(),this.node&&ya.addView(this))},firstNode:function(){return this.node},toString:function(t){var e=""+n(this.value);return t?_e(e):e}};var zc=Qc,Hc=qe,Kc=We,Gc=Qe,$c=ze,Yc=He,Jc=Ke,Zc=Ge,Xc=$e,tl=Ye,el=function(t,e){Wc.rebind.call(this,t,e)},nl=Ze,il=Xe,rl=ln,ol=fn,sl=dn,al=vn,ul=function(t){this.type=Ch,this.subtype=this.currentSubtype=t.template.n,this.inverted=this.subtype===Dh,this.pElement=t.pElement,this.fragments=[],this.fragmentsToCreate=[],this.fragmentsToRender=[],this.fragmentsToUnrender=[],t.template.i&&(this.indexRefs=t.template.i.split(",").map(function(t,e){return{n:t,t:0===e?"k":"i"}})),this.renderedFragments=[],this.length=0,Wc.init(this,t)};ul.prototype={bubble:Hc,detach:Kc,find:Gc,findAll:$c,findAllComponents:Yc,findComponent:Jc,findNextNode:Zc,firstNode:Xc,getIndexRef:function(t){if(this.indexRefs)for(var e=this.indexRefs.length;e--;){var n=this.indexRefs[e];if(n.n===t)return n}},getValue:Wc.getValue,shuffle:tl,rebind:el,render:nl,resolve:Wc.resolve,setValue:il,toString:rl,unbind:ol,unrender:sl,update:al};var hl,cl,ll=ul,fl=gn,dl=yn,pl=bn,ml=wn,vl={};try{ls("table").innerHTML="foo"}catch(Ss){hl=!0,cl={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var gl=function(t,e,n){var i,r,o,s,a,u=[];if(null!=t&&""!==t){for(hl&&(r=cl[e.tagName])?(i=kn("DIV"),i.innerHTML=r[0]+t+r[1],i=i.querySelector(".x"),"SELECT"===i.tagName&&(o=i.options[i.selectedIndex])):e.namespaceURI===is.svg?(i=kn("DIV"),i.innerHTML='<svg class="x">'+t+"</svg>",i=i.querySelector(".x")):(i=kn(e.tagName),i.innerHTML=t,"SELECT"===i.tagName&&(o=i.options[i.selectedIndex]));s=i.firstChild;)u.push(s),n.appendChild(s);if("SELECT"===e.tagName)for(a=u.length;a--;)u[a]!==o&&(u[a].selected=!1)}return u},yl=En,bl=_n,wl=An,kl=Cn,El=On,xl=Sn,_l=function(t){this.type=Ah,Wc.init(this,t)};_l.prototype={detach:fl,find:dl,findAll:pl,firstNode:ml,getValue:Wc.getValue,rebind:Wc.rebind,render:bl,resolve:Wc.resolve,setValue:wl,toString:kl,unbind:wc,unrender:El,update:xl};var Al,Cl,Ol,Sl,Tl=_l,Fl=function(){this.parentFragment.bubble()},jl=Tn,Pl=function(t){return this.node?fs(this.node,t)?this.node:this.fragment&&this.fragment.find?this.fragment.find(t):void 0:null},Rl=function(t,e){e._test(this,!0)&&e.live&&(this.liveQueries||(this.liveQueries=[])).push(e),this.fragment&&this.fragment.findAll(t,e)},Nl=function(t,e){this.fragment&&this.fragment.findAllComponents(t,e)},Ll=function(t){return this.fragment?this.fragment.findComponent(t):void 0},Vl=Fn,Il=jn,Dl=Pn,Ml=/^true|on|yes|1$/i,Ul=/^[0-9]+$/,Bl=function(t,e){var n,i,r;return r=e.a||{},i={},n=r.twoway,void 0!==n&&(i.twoway=0===n||Ml.test(n)),n=r.lazy,void 0!==n&&(i.lazy=0!==n&&Ul.test(n)?parseInt(n):0===n||Ml.test(n)),i},ql=Rn;Al="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),Cl="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),Ol=function(t){for(var e={},n=t.length;n--;)e[t[n].toLowerCase()]=t[n];return e},Sl=Ol(Al.concat(Cl));var Wl=function(t){var e=t.toLowerCase();return Sl[e]||e},Ql=function(t,e){var n,i;if(n=e.indexOf(":"),-1===n||(i=e.substr(0,n),"xmlns"===i))t.name=t.element.namespace!==is.html?Wl(e):e;else if(e=e.substring(n+1),t.name=Wl(e),t.namespace=is[i.toLowerCase()],t.namespacePrefix=i,!t.namespace)throw'Unknown namespace ("'+i+'")'},zl=Nn,Hl=Ln,Kl=Vn,Gl=In,$l={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},Yl=Dn,Jl=Un,Zl=Bn,Xl=qn,tf=Wn,ef=Qn,nf=zn,rf=Hn,of=Kn,sf=Gn,af=$n,uf=Yn,hf=Jn,cf=Zn,lf=Xn,ff=function(t){this.init(t)};ff.prototype={bubble:ql,init:Hl,rebind:Kl,render:Gl,toString:Yl,unbind:Jl,update:lf};var df,pf=ff,mf=function(t,e){var n,i,r=[];for(n in e)"twoway"!==n&&"lazy"!==n&&e.hasOwnProperty(n)&&(i=new pf({element:t,name:n,value:e[n],root:t.root}),r[n]=i,"value"!==n&&r.push(i));return(i=r.value)&&r.push(i),r};"undefined"!=typeof document&&(df=ls("div"));var vf=function(t,e){this.element=t,this.root=t.root,this.parentFragment=t.parentFragment,this.attributes=[],this.fragment=new rv({root:t.root,owner:this,template:[e]})};vf.prototype={bubble:function(){this.node&&this.update(),this.element.bubble()},rebind:function(t,e){this.fragment.rebind(t,e)},render:function(t){this.node=t,this.isSvg=t.namespaceURI===is.svg,this.update()},unbind:function(){this.fragment.unbind()},update:function(){var t,e,n=this;t=this.fragment.toString(),e=ti(t,this.isSvg),this.attributes.filter(function(t){return ei(e,t)}).forEach(function(t){n.node.removeAttribute(t.name)}),e.forEach(function(t){n.node.setAttribute(t.name,t.value)}),this.attributes=e},toString:function(){return this.fragment.toString()}};var gf=vf,yf=function(t,e){return e?e.map(function(e){return new gf(t,e)}):[]},bf=function(t){var e,n,i,r;if(this.element=t,this.root=t.root,this.attribute=t.attributes[this.name||"value"],e=this.attribute.interpolator,e.twowayBinding=this,n=e.keypath){if("}"===n.str.slice(-1))return v("Two-way binding does not work with expressions (`%s` on <%s>)",e.resolver.uniqueString,t.name,{ractive:this.root}),!1;if(n.isSpecial)return v("Two-way binding does not work with %s",e.resolver.ref,{ractive:this.root}),!1}else{var o=e.template.r?"'"+e.template.r+"' reference":"expression";m("The %s being used for two-way binding is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",o,{ractive:this.root}),e.resolver.forceResolution(),n=e.keypath}this.attribute.isTwoway=!0,this.keypath=n,i=this.root.viewmodel.get(n),void 0===i&&this.getInitialValue&&(i=this.getInitialValue(),void 0!==i&&this.root.viewmodel.set(n,i)),(r=ni(t))&&(this.resetValue=i,r.formBindings.push(this))};bf.prototype={handleChange:function(){var t=this;ya.start(this.root),this.attribute.locked=!0,this.root.viewmodel.set(this.keypath,this.getValue()),ya.scheduleTask(function(){return t.attribute.locked=!1}),ya.end()},rebound:function(){var t,e,n;e=this.keypath,n=this.attribute.interpolator.keypath,e!==n&&(V(this.root._twowayBindings[e.str],this),this.keypath=n,t=this.root._twowayBindings[n.str]||(this.root._twowayBindings[n.str]=[]),t.push(this))},unbind:function(){}},bf.extend=function(t){var e,n=this;return e=function(t){bf.call(this,t),this.init&&this.init()},e.prototype=_s(n.prototype),i(e.prototype,t),e.extend=bf.extend,e};var wf,kf=bf,Ef=ii;wf=kf.extend({getInitialValue:function(){return""},getValue:function(){return this.element.node.value},render:function(){var t,e=this.element.node,n=!1;this.rendered=!0,t=this.root.lazy,this.element.lazy===!0?t=!0:this.element.lazy===!1?t=!1:u(this.element.lazy)?(t=!1,n=+this.element.lazy):u(t||"")&&(n=+t,t=!1,this.element.lazy=n),this.handler=n?oi:Ef,e.addEventListener("change",Ef,!1),t||(e.addEventListener("input",this.handler,!1),e.attachEvent&&e.addEventListener("keyup",this.handler,!1)),e.addEventListener("blur",ri,!1)},unrender:function(){var t=this.element.node;this.rendered=!1,t.removeEventListener("change",Ef,!1),t.removeEventListener("input",this.handler,!1),t.removeEventListener("keyup",this.handler,!1),t.removeEventListener("blur",ri,!1)}});var xf=wf,_f=xf.extend({getInitialValue:function(){return this.element.fragment?this.element.fragment.toString():""},getValue:function(){return this.element.node.innerHTML}}),Af=_f,Cf=si,Of={},Sf=kf.extend({name:"checked",init:function(){this.siblings=Cf(this.root._guid,"radio",this.element.getAttribute("name")),this.siblings.push(this)},render:function(){var t=this.element.node;t.addEventListener("change",Ef,!1),t.attachEvent&&t.addEventListener("click",Ef,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",Ef,!1),t.removeEventListener("click",Ef,!1)},handleChange:function(){ya.start(this.root),this.siblings.forEach(function(t){t.root.viewmodel.set(t.keypath,t.getValue())}),ya.end()},getValue:function(){return this.element.node.checked},unbind:function(){V(this.siblings,this)}}),Tf=Sf,Ff=kf.extend({name:"name",init:function(){this.siblings=Cf(this.root._guid,"radioname",this.keypath.str),this.siblings.push(this),this.radioName=!0},getInitialValue:function(){return this.element.getAttribute("checked")?this.element.getAttribute("value"):void 0},render:function(){var t=this.element.node;t.name="{{"+this.keypath.str+"}}",t.checked=this.root.viewmodel.get(this.keypath)==this.element.getAttribute("value"),t.addEventListener("change",Ef,!1),t.attachEvent&&t.addEventListener("click",Ef,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",Ef,!1),t.removeEventListener("click",Ef,!1)},getValue:function(){var t=this.element.node;return t._ractive?t._ractive.value:t.value},handleChange:function(){this.element.node.checked&&kf.prototype.handleChange.call(this)},rebound:function(t,e){var n;kf.prototype.rebound.call(this,t,e),(n=this.element.node)&&(n.name="{{"+this.keypath.str+"}}")},unbind:function(){V(this.siblings,this)}}),jf=Ff,Pf=kf.extend({name:"name",getInitialValue:function(){return this.noInitialValue=!0,[]},init:function(){var t,e;this.checkboxName=!0,this.siblings=Cf(this.root._guid,"checkboxes",this.keypath.str),this.siblings.push(this),this.noInitialValue&&(this.siblings.noInitialValue=!0),this.siblings.noInitialValue&&this.element.getAttribute("checked")&&(t=this.root.viewmodel.get(this.keypath),e=this.element.getAttribute("value"),t.push(e))},unbind:function(){V(this.siblings,this)},render:function(){var t,e,n=this.element.node;t=this.root.viewmodel.get(this.keypath),e=this.element.getAttribute("value"),this.isChecked=o(t)?P(t,e):t==e,n.name="{{"+this.keypath.str+"}}",n.checked=this.isChecked,n.addEventListener("change",Ef,!1),n.attachEvent&&n.addEventListener("click",Ef,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",Ef,!1),t.removeEventListener("click",Ef,!1)},changed:function(){var t=!!this.isChecked;return this.isChecked=this.element.node.checked,this.isChecked===t},handleChange:function(){this.isChecked=this.element.node.checked,kf.prototype.handleChange.call(this)},getValue:function(){return this.siblings.filter(ai).map(ui)}}),Rf=Pf,Nf=kf.extend({name:"checked",render:function(){var t=this.element.node;t.addEventListener("change",Ef,!1),t.attachEvent&&t.addEventListener("click",Ef,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",Ef,!1),t.removeEventListener("click",Ef,!1)},getValue:function(){return this.element.node.checked}}),Lf=Nf,Vf=kf.extend({getInitialValue:function(){var t,e,n,i,r=this.element.options;if(void 0===this.element.getAttribute("value")&&(e=t=r.length,t)){for(;e--;)if(r[e].getAttribute("selected")){n=r[e].getAttribute("value"),i=!0;break}if(!i)for(;++e<t;)if(!r[e].getAttribute("disabled")){n=r[e].getAttribute("value");break}return void 0!==n&&(this.element.attributes.value.value=n),n}},render:function(){this.element.node.addEventListener("change",Ef,!1)},unrender:function(){this.element.node.removeEventListener("change",Ef,!1)},setValue:function(t){this.root.viewmodel.set(this.keypath,t)},getValue:function(){var t,e,n,i,r;for(t=this.element.node.options,n=t.length,e=0;n>e;e+=1)if(i=t[e],t[e].selected)return r=i._ractive?i._ractive.value:i.value},forceUpdate:function(){var t=this,e=this.getValue();void 0!==e&&(this.attribute.locked=!0,ya.scheduleTask(function(){return t.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,e))}}),If=Vf,Df=If.extend({getInitialValue:function(){return this.element.options.filter(function(t){return t.getAttribute("selected")}).map(function(t){return t.getAttribute("value")})},render:function(){var t;this.element.node.addEventListener("change",Ef,!1),t=this.root.viewmodel.get(this.keypath),void 0===t&&this.handleChange()},unrender:function(){this.element.node.removeEventListener("change",Ef,!1)},setValue:function(){throw new Error("TODO not implemented yet")},getValue:function(){var t,e,n,i,r,o;for(t=[],e=this.element.node.options,i=e.length,n=0;i>n;n+=1)r=e[n],r.selected&&(o=r._ractive?r._ractive.value:r.value,t.push(o));return t},handleChange:function(){var t,e,n;return t=this.attribute,e=t.value,n=this.getValue(),void 0!==e&&R(n,e)||If.prototype.handleChange.call(this),this},forceUpdate:function(){var t=this,e=this.getValue();void 0!==e&&(this.attribute.locked=!0,ya.scheduleTask(function(){return t.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,e))},updateModel:function(){void 0!==this.attribute.value&&this.attribute.value.length||this.root.viewmodel.set(this.keypath,this.initialValue)}}),Mf=Df,Uf=kf.extend({render:function(){this.element.node.addEventListener("change",Ef,!1)},unrender:function(){this.element.node.removeEventListener("change",Ef,!1)},getValue:function(){return this.element.node.files}}),Bf=Uf,qf=xf.extend({getInitialValue:function(){return void 0},getValue:function(){var t=parseFloat(this.element.node.value);return isNaN(t)?void 0:t}}),Wf=hi,Qf=li,zf=fi,Hf=di,Kf=pi,Gf=/^event(?:\.(.+))?/,$f=yi,Yf=bi,Jf={},Zf={touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0,touchleave:!0},Xf=ki,td=Ei,ed=xi,nd=_i,id=Ai,rd=function(t,e,n){this.init(t,e,n)};rd.prototype={bubble:Qf,fire:zf,getAction:Hf,init:Kf,listen:Yf,rebind:Xf,render:td,resolve:ed,unbind:nd,unrender:id};var od=rd,sd=function(t,e){var n,i,r,o,s=[];for(i in e)if(e.hasOwnProperty(i))for(r=i.split("-"),n=r.length;n--;)o=new od(t,r[n],e[i]),s.push(o);return s},ad=function(t,e){var n,i,r,o=this;this.element=t,this.root=n=t.root,i=e.n||e,("string"==typeof i||(r=new rv({template:i,root:n,owner:t}),i=r.toString(),r.unbind(),""!==i))&&(e.a?this.params=e.a:e.d&&(this.fragment=new rv({template:e.d,root:n,owner:t}),this.params=this.fragment.getArgsList(),this.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=!0,o.params=this.getArgsList(),o.ready&&o.update()}),this.fn=g("decorators",n,i),this.fn||l(Ds(i,"decorator")))};ad.prototype={init:function(){var t,e,n;if(t=this.element.node,this.params?(n=[t].concat(this.params),e=this.fn.apply(this.root,n)):e=this.fn.call(this.root,t),!e||!e.teardown)throw new Error("Decorator definition must return an object with a teardown method");this.actual=e,this.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},rebind:function(t,e){this.fragment&&this.fragment.rebind(t,e)},teardown:function(t){this.torndown=!0,this.ready&&this.actual.teardown(),!t&&this.fragment&&this.fragment.unbind()}};var ud,hd,cd,ld=ad,fd=Pi,dd=Ri,pd=Mi,md=function(t){return t.replace(/-([a-zA-Z])/g,function(t,e){return e.toUpperCase()})};Xo?(hd={},cd=ls("div").style,ud=function(t){var e,n,i;if(t=md(t),!hd[t])if(void 0!==cd[t])hd[t]=t;else for(i=t.charAt(0).toUpperCase()+t.substring(1),e=os.length;e--;)if(n=os[e],void 0!==cd[n+i]){hd[t]=n+i;break}return hd[t]}):ud=null;var vd,gd,yd=ud;Xo?(gd=window.getComputedStyle||Os.getComputedStyle,vd=function(t){var e,n,i,r,s;if(e=gd(this.node),"string"==typeof t)return s=e[yd(t)],"0px"===s&&(s=0),s;if(!o(t))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(n={},i=t.length;i--;)r=t[i],s=e[yd(r)],"0px"===s&&(s=0),n[r]=s;return n}):vd=null;var bd=vd,wd=function(t,e){var n;if("string"==typeof t)this.node.style[yd(t)]=e;else for(n in t)t.hasOwnProperty(n)&&(this.node.style[yd(n)]=t[n]);return this},kd=function(t){var e;this.duration=t.duration,this.step=t.step,this.complete=t.complete,"string"==typeof t.easing?(e=t.root.easing[t.easing],e||(v(Ds(t.easing,"easing")),e=Ui)):e="function"==typeof t.easing?t.easing:Ui,this.easing=e,this.start=na(),this.end=this.start+this.duration,this.running=!0,ka.add(this)};kd.prototype={tick:function(t){var e,n;return this.running?t>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(e=t-this.start,n=this.easing(e/this.duration),this.step&&this.step(n),!0):!1},stop:function(){this.abort&&this.abort(),this.running=!1}};var Ed,xd,_d,Ad,Cd,Od,Sd,Td,Fd=kd,jd=new RegExp("^-(?:"+os.join("|")+")-"),Pd=function(t){return t.replace(jd,"")},Rd=new RegExp("^(?:"+os.join("|")+")([A-Z])"),Nd=function(t){var e;return t?(Rd.test(t)&&(t="-"+t),e=t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})):""},Ld={},Vd={};Xo?(xd=ls("div").style,function(){void 0!==xd.transition?(_d="transition",Ad="transitionend",Cd=!0):void 0!==xd.webkitTransition?(_d="webkitTransition",Ad="webkitTransitionEnd",Cd=!0):Cd=!1}(),_d&&(Od=_d+"Duration",Sd=_d+"Property",Td=_d+"TimingFunction"),Ed=function(t,e,n,i,r){setTimeout(function(){var o,s,a,u,h;u=function(){s&&a&&(t.root.fire(t.name+":end",t.node,t.isIntro),r())},o=(t.node.namespaceURI||"")+t.node.tagName,t.node.style[Sd]=i.map(yd).map(Nd).join(","),t.node.style[Td]=Nd(n.easing||"linear"),t.node.style[Od]=n.duration/1e3+"s",h=function(e){var n;n=i.indexOf(md(Pd(e.propertyName))),-1!==n&&i.splice(n,1),i.length||(t.node.removeEventListener(Ad,h,!1),a=!0,u())},t.node.addEventListener(Ad,h,!1),setTimeout(function(){for(var r,c,l,f,d,p=i.length,v=[];p--;)f=i[p],r=o+f,Cd&&!Vd[r]&&(t.node.style[yd(f)]=e[f],Ld[r]||(c=t.getStyle(f),Ld[r]=t.getStyle(f)!=e[f],Vd[r]=!Ld[r],Vd[r]&&(t.node.style[yd(f)]=c))),(!Cd||Vd[r])&&(void 0===c&&(c=t.getStyle(f)),l=i.indexOf(f),-1===l?m("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!",{node:t.node}):i.splice(l,1),d=/[^\d]*$/.exec(e[f])[0],v.push({name:yd(f),interpolator:Us(parseFloat(c),parseFloat(e[f])),suffix:d}));v.length?new Fd({root:t.root,duration:n.duration,easing:md(n.easing||""),step:function(e){var n,i;for(i=v.length;i--;)n=v[i],t.node.style[n.name]=n.interpolator(e)+n.suffix},complete:function(){s=!0,u()}}):s=!0,i.length||(t.node.removeEventListener(Ad,h,!1),a=!0,u())},0)},n.delay||0)}):Ed=null;var Id,Dd,Md,Ud,Bd,qd=Ed;if("undefined"!=typeof document){if(Id="hidden",Bd={},Id in document)Md="";else for(Ud=os.length;Ud--;)Dd=os[Ud],Id=Dd+"Hidden",Id in document&&(Md=Dd);void 0!==Md?(document.addEventListener(Md+"visibilitychange",Bi),Bi()):("onfocusout"in document?(document.addEventListener("focusout",qi),document.addEventListener("focusin",Wi)):(window.addEventListener("pagehide",qi),window.addEventListener("blur",qi),window.addEventListener("pageshow",Wi),window.addEventListener("focus",Wi)),Bd.hidden=!1)}var Wd,Qd,zd,Hd=Bd;Xo?(Qd=window.getComputedStyle||Os.getComputedStyle,Wd=function(t,e,n){var i,r=this;if(4===arguments.length)throw new Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");if(Hd.hidden)return this.setStyle(t,e),zd||(zd=ha.resolve());"string"==typeof t?(i={},i[t]=e):(i=t,n=e),n||(v('The "%s" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340',this.name),n=this);var o=new ha(function(t){var e,o,s,a,u,h,c;if(!n.duration)return r.setStyle(i),void t();for(e=Object.keys(i),o=[],s=Qd(r.node),u={},h=e.length;h--;)c=e[h],a=s[yd(c)],"0px"===a&&(a=0),a!=i[c]&&(o.push(c),r.node.style[yd(c)]=a);return o.length?void qd(r,i,n,o,t):void t()});return o}):Wd=null;var Kd=Wd,Gd=function(t,e){return"number"==typeof t?t={duration:t}:"string"==typeof t?t="slow"===t?{duration:600}:"fast"===t?{duration:200}:{duration:400}:t||(t={}),r({},t,e)},$d=Qi,Yd=function(t,e,n){this.init(t,e,n)};Yd.prototype={init:pd,start:$d,getStyle:bd,setStyle:wd,animateStyle:Kd,processParams:Gd};var Jd,Zd,Xd=Yd,tp=Hi;Jd=function(){var t=this.node,e=this.fragment.toString(!1);if(window&&window.appearsToBeIELessEqual8&&(t.type="text/css"),t.styleSheet)t.styleSheet.cssText=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}},Zd=function(){this.node.type&&"text/javascript"!==this.node.type||m("Script tag was updated. This does not cause the code to be re-evaluated!",{ractive:this.root}),this.node.text=this.fragment.toString(!1);

};var ep=function(){var t,e;return this.template.y?"<!DOCTYPE"+this.template.dd+">":(t="<"+this.template.e,t+=this.attributes.map(Zi).join("")+this.conditionalAttributes.map(Zi).join(""),"option"===this.name&&Yi(this)&&(t+=" selected"),"input"===this.name&&Ji(this)&&(t+=" checked"),t+=">","textarea"===this.name&&void 0!==this.getAttribute("value")?t+=_e(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(t+=this.getAttribute("value")||""),this.fragment&&(e="script"!==this.name&&"style"!==this.name,t+=this.fragment.toString(e)),oc.test(this.template.e)||(t+="</"+this.template.e+">"),t)},np=Xi,ip=tr,rp=function(t){this.init(t)};rp.prototype={bubble:Fl,detach:jl,find:Pl,findAll:Rl,findAllComponents:Nl,findComponent:Ll,findNextNode:Vl,firstNode:Il,getAttribute:Dl,init:fd,rebind:dd,render:tp,toString:ep,unbind:np,unrender:ip};var op=rp,sp=/^\s*$/,ap=/^\s*/,up=function(t){var e,n,i,r;return e=t.split("\n"),n=e[0],void 0!==n&&sp.test(n)&&e.shift(),i=L(e),void 0!==i&&sp.test(i)&&e.pop(),r=e.reduce(nr,null),r&&(t=e.map(function(t){return t.replace(r,"")}).join("\n")),t},hp=ir,cp=function(t,e){var n;return e?n=t.split("\n").map(function(t,n){return n?e+t:t}).join("\n"):t},lp='Could not find template for partial "%s"',fp=function(t){var e,n;e=this.parentFragment=t.parentFragment,this.root=e.root,this.type=Sh,this.index=t.index,this.name=t.template.r,this.rendered=!1,this.fragment=this.fragmentToRender=this.fragmentToUnrender=null,Wc.init(this,t),this.keypath||((n=hp(this.root,this.name,e))?(wc.call(this),this.isNamed=!0,this.setTemplate(n)):v(lp,this.name))};fp.prototype={bubble:function(){this.parentFragment.bubble()},detach:function(){return this.fragment.detach()},find:function(t){return this.fragment.find(t)},findAll:function(t,e){return this.fragment.findAll(t,e)},findComponent:function(t){return this.fragment.findComponent(t)},findAllComponents:function(t,e){return this.fragment.findAllComponents(t,e)},firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},getPartialName:function(){return this.isNamed&&this.name?this.name:void 0===this.value?this.name:this.value},getValue:function(){return this.fragment.getValue()},rebind:function(t,e){this.isNamed||qc.call(this,t,e),this.fragment&&this.fragment.rebind(t,e)},render:function(){return this.docFrag=document.createDocumentFragment(),this.update(),this.rendered=!0,this.docFrag},resolve:Wc.resolve,setValue:function(t){var e;(void 0===t||t!==this.value)&&(void 0!==t&&(e=hp(this.root,""+t,this.parentFragment)),!e&&this.name&&(e=hp(this.root,this.name,this.parentFragment))&&(wc.call(this),this.isNamed=!0),e||v(lp,this.name,{ractive:this.root}),this.value=t,this.setTemplate(e||[]),this.bubble(),this.rendered&&ya.addView(this))},setTemplate:function(t){this.fragment&&(this.fragment.unbind(),this.rendered&&(this.fragmentToUnrender=this.fragment)),this.fragment=new rv({template:t,root:this.root,owner:this,pElement:this.parentFragment.pElement}),this.fragmentToRender=this.fragment},toString:function(t){var e,n,i,r;return e=this.fragment.toString(t),n=this.parentFragment.items[this.index-1],n&&n.type===xh?(i=n.text.split("\n").pop(),(r=/^\s+$/.exec(i))?cp(e,r[0]):e):e},unbind:function(){this.isNamed||wc.call(this),this.fragment&&this.fragment.unbind()},unrender:function(t){this.rendered&&(this.fragment&&this.fragment.unrender(t),this.rendered=!1)},update:function(){var t,e;this.fragmentToUnrender&&(this.fragmentToUnrender.unrender(!0),this.fragmentToUnrender=null),this.fragmentToRender&&(this.docFrag.appendChild(this.fragmentToRender.render()),this.fragmentToRender=null),this.rendered&&(t=this.parentFragment.getNode(),e=this.parentFragment.findNextNode(this),t.insertBefore(this.docFrag,e))}};var dp,pp,mp,vp=fp,gp=ur,yp=hr,bp=new oa("detach"),wp=cr,kp=lr,Ep=fr,xp=dr,_p=pr,Ap=mr,Cp=function(t,e,n,i){var r=t.root,o=t.keypath;i?r.viewmodel.smartUpdate(o,e,i):r.viewmodel.mark(o)},Op=[],Sp=["pop","push","reverse","shift","sort","splice","unshift"];Sp.forEach(function(t){var e=function(){for(var e=arguments.length,n=Array(e),i=0;e>i;i++)n[i]=arguments[i];var r,o,s,a;for(r=yu(this,t,n),o=Array.prototype[t].apply(this,arguments),ya.start(),this._ractive.setting=!0,a=this._ractive.wrappers.length;a--;)s=this._ractive.wrappers[a],ya.addRactive(s.root),Cp(s,this,t,r);return ya.end(),this._ractive.setting=!1,o};As(Op,t,{value:e})}),dp={},dp.__proto__?(pp=function(t){t.__proto__=Op},mp=function(t){t.__proto__=Array.prototype}):(pp=function(t){var e,n;for(e=Sp.length;e--;)n=Sp[e],As(t,n,{value:Op[n],configurable:!0})},mp=function(t){var e;for(e=Sp.length;e--;)delete t[Sp[e]]}),pp.unpatch=mp;var Tp,Fp,jp,Pp=pp;Tp={filter:function(t){return o(t)&&(!t._ractive||!t._ractive.setting)},wrap:function(t,e,n){return new Fp(t,e,n)}},Fp=function(t,e,n){this.root=t,this.value=e,this.keypath=_(n),e._ractive||(As(e,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),Pp(e)),e._ractive.instances[t._guid]||(e._ractive.instances[t._guid]=0,e._ractive.instances.push(t)),e._ractive.instances[t._guid]+=1,e._ractive.wrappers.push(this)},Fp.prototype={get:function(){return this.value},teardown:function(){var t,e,n,i,r;if(t=this.value,e=t._ractive,n=e.wrappers,i=e.instances,e.setting)return!1;if(r=n.indexOf(this),-1===r)throw new Error(jp);if(n.splice(r,1),n.length){if(i[this.root._guid]-=1,!i[this.root._guid]){if(r=i.indexOf(this.root),-1===r)throw new Error(jp);i.splice(r,1)}}else delete t._ractive,Pp.unpatch(this.value)}},jp="Something went wrong in a rather interesting way";var Rp,Np,Lp=Tp,Vp=/^\s*[0-9]+\s*$/,Ip=function(t){return Vp.test(t)?[]:{}};try{Object.defineProperty({},"test",{value:0}),Rp={filter:function(t,e,n){var i,r;return e?(e=_(e),(i=n.viewmodel.wrapped[e.parent.str])&&!i.magic?!1:(r=n.viewmodel.get(e.parent),o(r)&&/^[0-9]+$/.test(e.lastKey)?!1:r&&("object"==typeof r||"function"==typeof r))):!1},wrap:function(t,e,n){return new Np(t,e,n)}},Np=function(t,e,n){var i,r,o;return n=_(n),this.magic=!0,this.ractive=t,this.keypath=n,this.value=e,this.prop=n.lastKey,i=n.parent,this.obj=i.isRoot?t.viewmodel.data:t.viewmodel.get(i),r=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop),r&&r.set&&(o=r.set._ractiveWrappers)?void(-1===o.indexOf(this)&&o.push(this)):void vr(this,e,r)},Np.prototype={get:function(){return this.value},reset:function(t){return this.updating?void 0:(this.updating=!0,this.obj[this.prop]=t,ya.addRactive(this.ractive),this.ractive.viewmodel.mark(this.keypath,{keepExistingWrapper:!0}),this.updating=!1,!0)},set:function(t,e){this.updating||(this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=Ip(t),this.updating=!1),this.obj[this.prop][t]=e)},teardown:function(){var t,e,n,i,r;return this.updating?!1:(t=Object.getOwnPropertyDescriptor(this.obj,this.prop),e=t&&t.set,void(e&&(i=e._ractiveWrappers,r=i.indexOf(this),-1!==r&&i.splice(r,1),i.length||(n=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=n))))}}}catch(Ss){Rp=!1}var Dp,Mp,Up=Rp;Up&&(Dp={filter:function(t,e,n){return Up.filter(t,e,n)&&Lp.filter(t)},wrap:function(t,e,n){return new Mp(t,e,n)}},Mp=function(t,e,n){this.value=e,this.magic=!0,this.magicWrapper=Up.wrap(t,e,n),this.arrayWrapper=Lp.wrap(t,e,n)},Mp.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(t){return this.magicWrapper.reset(t)}});var Bp=Dp,qp=gr,Wp={},Qp=wr,zp=kr,Hp=_r,Kp=Tr,Gp=Fr,$p=function(t,e){this.computation=t,this.viewmodel=t.viewmodel,this.ref=e,this.root=this.viewmodel.ractive,this.parentFragment=this.root.component&&this.root.component.parentFragment};$p.prototype={resolve:function(t){this.computation.softDeps.push(t),this.computation.unresolvedDeps[t.str]=null,this.viewmodel.register(t,this.computation,"computed")}};var Yp=$p,Jp=function(t,e){this.key=t,this.getter=e.getter,this.setter=e.setter,this.hardDeps=e.deps||[],this.softDeps=[],this.unresolvedDeps={},this.depValues={},this._dirty=this._firstRun=!0};Jp.prototype={constructor:Jp,init:function(t){var e,n=this;this.viewmodel=t,this.bypass=!0,e=t.get(this.key),t.clearCache(this.key.str),this.bypass=!1,this.setter&&void 0!==e&&this.set(e),this.hardDeps&&this.hardDeps.forEach(function(e){return t.register(e,n,"computed")})},invalidate:function(){this._dirty=!0},get:function(){var t,e,n=this,i=!1;if(this.getting){var r="The "+this.key.str+" computation indirectly called itself. This probably indicates a bug in the computation. It is commonly caused by `array.sort(...)` - if that's the case, clone the array first with `array.slice().sort(...)`";return p(r),this.value}if(this.getting=!0,this._dirty){if(this._firstRun||!this.hardDeps.length&&!this.softDeps.length?i=!0:[this.hardDeps,this.softDeps].forEach(function(t){var e,r,o;if(!i)for(o=t.length;o--;)if(e=t[o],r=n.viewmodel.get(e),!a(r,n.depValues[e.str]))return n.depValues[e.str]=r,void(i=!0)}),i){this.viewmodel.capture();try{this.value=this.getter()}catch(o){m('Failed to compute "%s"',this.key.str),f(o.stack||o),this.value=void 0}t=this.viewmodel.release(),e=this.updateDependencies(t),e&&[this.hardDeps,this.softDeps].forEach(function(t){t.forEach(function(t){n.depValues[t.str]=n.viewmodel.get(t)})})}this._dirty=!1}return this.getting=this._firstRun=!1,this.value},set:function(t){if(this.setting)return void(this.value=t);if(!this.setter)throw new Error("Computed properties without setters are read-only. (This may change in a future version of Ractive!)");this.setter(t)},updateDependencies:function(t){var e,n,i,r,o;for(n=this.softDeps,e=n.length;e--;)i=n[e],-1===t.indexOf(i)&&(r=!0,this.viewmodel.unregister(i,this,"computed"));for(e=t.length;e--;)i=t[e],-1!==n.indexOf(i)||this.hardDeps&&-1!==this.hardDeps.indexOf(i)||(r=!0,jr(this.viewmodel,i)&&!this.unresolvedDeps[i.str]?(o=new Yp(this,i.str),t.splice(e,1),this.unresolvedDeps[i.str]=o,ya.addUnresolved(o)):this.viewmodel.register(i,this,"computed"));return r&&(this.softDeps=t.slice()),r}};var Zp=Jp,Xp=Pr,tm={FAILED_LOOKUP:!0},em=Rr,nm={},im=Lr,rm=Vr,om=function(t,e){this.localKey=t,this.keypath=e.keypath,this.origin=e.origin,this.deps=[],this.unresolved=[],this.resolved=!1};om.prototype={forceResolution:function(){this.keypath=this.localKey,this.setup()},get:function(t,e){return this.resolved?this.origin.get(this.map(t),e):void 0},getValue:function(){return this.keypath?this.origin.get(this.keypath):void 0},initViewmodel:function(t){this.local=t,this.setup()},map:function(t){return void 0===typeof this.keypath?this.localKey:t.replace(this.localKey,this.keypath)},register:function(t,e,n){this.deps.push({keypath:t,dep:e,group:n}),this.resolved&&this.origin.register(this.map(t),e,n)},resolve:function(t){void 0!==this.keypath&&this.unbind(!0),this.keypath=t,this.setup()},set:function(t,e){this.resolved||this.forceResolution(),this.origin.set(this.map(t),e)},setup:function(){var t=this;void 0!==this.keypath&&(this.resolved=!0,this.deps.length&&(this.deps.forEach(function(e){var n=t.map(e.keypath);if(t.origin.register(n,e.dep,e.group),e.dep.setValue)e.dep.setValue(t.origin.get(n));else{if(!e.dep.invalidate)throw new Error("An unexpected error occurred. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");e.dep.invalidate()}}),this.origin.mark(this.keypath)))},setValue:function(t){if(!this.keypath)throw new Error("Mapping does not have keypath, cannot set value. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");this.origin.set(this.keypath,t)},unbind:function(t){var e=this;t||delete this.local.mappings[this.localKey],this.resolved&&(this.deps.forEach(function(t){e.origin.unregister(e.map(t.keypath),t.dep,t.group)}),this.tracker&&this.origin.unregister(this.keypath,this.tracker))},unregister:function(t,e,n){var i,r;if(this.resolved){for(i=this.deps,r=i.length;r--;)if(i[r].dep===e){i.splice(r,1);break}this.origin.unregister(this.map(t),e,n)}}};var sm=Ir,am=function(t,e){var n,i,r,o;return n={},i=0,r=t.map(function(t,r){var s,a,u;a=i,u=e.length;do{if(s=e.indexOf(t,a),-1===s)return o=!0,-1;a=s+1}while(n[s]&&u>a);return s===i&&(i+=1),s!==r&&(o=!0),n[s]=!0,s})},um=Dr,hm={},cm=Br,lm=Wr,fm=Qr,dm=zr,pm=Kr,mm={implicit:!0},vm={noCascade:!0},gm=$r,ym=Yr,bm=function(t){var e,n,i=t.adapt,r=t.data,o=t.ractive,s=t.computed,a=t.mappings;this.ractive=o,this.adaptors=i,this.onchange=t.onchange,this.cache={},this.cacheMap=_s(null),this.deps={computed:_s(null),"default":_s(null)},this.depsMap={computed:_s(null),"default":_s(null)},this.patternObservers=[],this.specials=_s(null),this.wrapped=_s(null),this.computations=_s(null),this.captureGroups=[],this.unresolvedImplicitDependencies=[],this.changes=[],this.implicitChanges={},this.noCascade={},this.data=r,this.mappings=_s(null);for(e in a)this.map(_(e),a[e]);if(r)for(e in r)(n=this.mappings[e])&&void 0===n.getValue()&&n.setValue(r[e]);for(e in s)a&&e in a&&l("Cannot map to a computed property ('%s')",e),this.compute(_(e),s[e]);this.ready=!0};bm.prototype={adapt:qp,applyChanges:Hp,capture:Kp,clearCache:Gp,compute:Xp,get:em,init:im,map:rm,mark:sm,merge:um,register:cm,release:lm,reset:fm,set:dm,smartUpdate:pm,teardown:gm,unregister:ym};var wm=bm;Zr.prototype={constructor:Zr,begin:function(t){this.inProcess[t._guid]=!0},end:function(t){var e=t.parent;e&&this.inProcess[e._guid]?Xr(this.queue,e).push(t):to(this,t),delete this.inProcess[t._guid]}};var km=Zr,Em=eo,xm=/\$\{([^\}]+)\}/g,_m=new oa("construct"),Am=new oa("config"),Cm=new km("init"),Om=0,Sm=["adaptors","components","decorators","easing","events","interpolators","partials","transitions"],Tm=oo,Fm=co;co.prototype={bubble:function(){this.dirty||(this.dirty=!0,ya.addView(this))},update:function(){this.callback(this.fragment.getValue()),this.dirty=!1},rebind:function(t,e){this.fragment.rebind(t,e)},unbind:function(){this.fragment.unbind()}};var jm=function(t,e,n,r,s){var a,u,h,c,l,f,d={},p={},v={},g=[];for(u=t.parentFragment,h=t.root,s=s||{},i(d,s),s.content=r||[],d[""]=s.content,e.defaults.el&&m("The <%s/> component has a default `el` property; it has been disregarded",t.name),c=u;c;){if(c.owner.type===Ph){l=c.owner.container;break}c=c.parent}return n&&Object.keys(n).forEach(function(e){var i,r,s=n[e];if("string"==typeof s)i=fc(s),p[e]=i?i.value:s;else if(0===s)p[e]=!0;else{if(!o(s))throw new Error("erm wut");fo(s)?(v[e]={origin:t.root.viewmodel,keypath:void 0},r=lo(t,s[0],function(t){t.isSpecial?f?a.set(e,t.value):(p[e]=t.value,delete v[e]):f?a.viewmodel.mappings[e].resolve(t):v[e].keypath=t})):r=new Fm(t,s,function(t){f?a.set(e,t):p[e]=t}),g.push(r)}}),a=_s(e.prototype),Tm(a,{el:null,append:!0,data:p,partials:s,magic:h.magic||e.defaults.magic,modifyArrays:h.modifyArrays,adapt:h.adapt},{parent:h,component:t,container:l,mappings:v,inlinePartials:d,cssIds:u.cssIds}),f=!0,t.resolvers=g,a},Pm=po,Rm=function(t){var e,n;for(e=t.root;e;)(n=e._liveComponentQueries["_"+t.name])&&n.push(t.instance),e=e.parent},Nm=vo,Lm=go,Vm=yo,Im=bo,Dm=wo,Mm=new oa("teardown"),Um=Eo,Bm=function(t,e){this.init(t,e)};Bm.prototype={detach:yp,find:wp,findAll:kp,findAllComponents:Ep,findComponent:xp,findNextNode:_p,firstNode:Ap,init:Nm,rebind:Lm,render:Vm,toString:Im,unbind:Dm,unrender:Um};var qm=Bm,Wm=function(t){this.type=Th,this.value=t.template.c};Wm.prototype={detach:gc,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createComment(this.value)),this.node},toString:function(){return"<!--"+this.value+"-->"},unrender:function(t){t&&this.node.parentNode.removeChild(this.node)}};var Qm=Wm,zm=function(t){var e,n;this.type=Ph,this.container=e=t.parentFragment.root,this.component=n=e.component,this.container=e,this.containerFragment=t.parentFragment,this.parentFragment=n.parentFragment;var i=this.name=t.template.n||"",r=e._inlinePartials[i];r||(m('Could not find template for partial "'+i+'"',{ractive:t.root}),r=[]),this.fragment=new rv({owner:this,root:e.parent,template:r,pElement:this.containerFragment.pElement}),o(n.yielders[i])?n.yielders[i].push(this):n.yielders[i]=[this],ya.scheduleTask(function(){if(n.yielders[i].length>1)throw new Error("A component template can only have one {{yield"+(i?" "+i:"")+"}} declaration at a time")})};zm.prototype={detach:function(){return this.fragment.detach()},find:function(t){return this.fragment.find(t)},findAll:function(t,e){return this.fragment.findAll(t,e)},findComponent:function(t){return this.fragment.findComponent(t)},findAllComponents:function(t,e){return this.fragment.findAllComponents(t,e)},findNextNode:function(){return this.containerFragment.findNextNode(this)},firstNode:function(){return this.fragment.firstNode()},getValue:function(t){return this.fragment.getValue(t)},render:function(){return this.fragment.render()},unbind:function(){this.fragment.unbind()},unrender:function(t){this.fragment.unrender(t),V(this.component.yielders[this.name],this)},rebind:function(t,e){this.fragment.rebind(t,e)},toString:function(){return this.fragment.toString()}};var Hm=zm,Km=function(t){this.declaration=t.template.a};Km.prototype={init:xs,render:xs,unrender:xs,teardown:xs,toString:function(){return"<!DOCTYPE"+this.declaration+">"}};var Gm=Km,$m=xo,Ym=Ao,Jm=Co,Zm=Oo,Xm=Fo,tv=Po,ev=function(t){this.init(t)};ev.prototype={bubble:ch,detach:lh,find:fh,findAll:dh,findAllComponents:ph,findComponent:mh,findNextNode:vh,firstNode:gh,getArgsList:pc,getNode:mc,getValue:vc,init:$m,rebind:Ym,registerIndexRef:function(t){var e=this.registeredIndexRefs;-1===e.indexOf(t)&&e.push(t)},render:Jm,toString:Zm,unbind:Xm,unregisterIndexRef:function(t){var e=this.registeredIndexRefs;e.splice(e.indexOf(t),1)},unrender:tv};var nv,iv,rv=ev,ov=Ro,sv=["template","partials","components","decorators","events"],av=new oa("reset"),uv=function(t,e){function n(e,i,r){r&&r.partials[t]||e.forEach(function(e){e.type===Sh&&e.getPartialName()===t&&i.push(e),e.fragment&&n(e.fragment.items,i,r),o(e.fragments)?n(e.fragments,i,r):o(e.items)?n(e.items,i,r):e.type===jh&&e.instance&&n(e.instance.fragment.items,i,e.instance),e.type===Oh&&(o(e.attributes)&&n(e.attributes,i,r),o(e.conditionalAttributes)&&n(e.conditionalAttributes,i,r))})}var i,r=[];return n(this.fragment.items,r),this.partials[t]=e,i=ya.start(this,!0),r.forEach(function(e){e.value=void 0,e.setValue(t)}),ya.end(),i},hv=No,cv=wu("reverse"),lv=Lo,fv=wu("shift"),dv=wu("sort"),pv=wu("splice"),mv=Io,vv=Do,gv=new oa("teardown"),yv=Uo,bv=Bo,wv=qo,kv=new oa("unrender"),Ev=wu("unshift"),xv=Wo,_v=new oa("update"),Av=Qo,Cv={add:Xs,animate:_a,detach:Ca,find:Sa,findAll:Ia,findAllComponents:Da,findComponent:Ma,findContainer:Ua,findParent:Ba,fire:za,get:Ha,insert:Ga,merge:Ya,observe:lu,observeOnce:fu,off:mu,on:vu,once:gu,pop:ku,push:Eu,render:Fu,reset:ov,resetPartial:uv,resetTemplate:hv,reverse:cv,set:lv,shift:fv,sort:dv,splice:pv,subtract:mv,teardown:vv,toggle:yv,toHTML:bv,toHtml:bv,unrender:wv,unshift:Ev,update:xv,updateModel:Av},Ov=function(t,e,n){return n||Ho(t,e)?function(){var n,i="_super"in this,r=this._super;return this._super=e,n=t.apply(this,arguments),i&&(this._super=r),n}:t},Sv=Ko,Tv=Jo,Fv=function(t){var e,n,i={};return t&&(e=t._ractive)?(i.ractive=e.root,i.keypath=e.keypath.str,i.index={},(n=Tc(e.proxy.parentFragment))&&(i.index=Tc.resolve(n)),i):i};nv=function(t){return this instanceof nv?void Tm(this,t):new nv(t)},iv={DEBUG:{writable:!0,value:!0},DEBUG_PROMISES:{writable:!0,value:!0},extend:{value:Tv},getNodeInfo:{value:Fv},parse:{value:Hu},Promise:{value:ha},svg:{value:rs},magic:{value:ns},VERSION:{value:"0.7.3"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:hs},events:{writable:!0,value:{}},interpolators:{writable:!0,value:qs},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}},Cs(nv,iv),nv.prototype=i(Cv,us),nv.prototype.constructor=nv,nv.defaults=nv.prototype;var jv="function";if(typeof Date.now!==jv||typeof String.prototype.trim!==jv||typeof Object.keys!==jv||typeof Array.prototype.indexOf!==jv||typeof Array.prototype.forEach!==jv||typeof Array.prototype.map!==jv||typeof Array.prototype.filter!==jv||"undefined"!=typeof window&&typeof window.addEventListener!==jv)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");var Pv=nv;return Pv});
//# sourceMappingURL=ractive-legacy.runtime.min.js.map
